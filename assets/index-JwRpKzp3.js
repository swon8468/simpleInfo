function J2(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Z2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var og={exports:{}},Gc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lS;function eC(){if(lS)return Gc;lS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var m in a)m!=="key"&&(l[m]=a[m])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return Gc.Fragment=e,Gc.jsx=t,Gc.jsxs=t,Gc}var cS;function tC(){return cS||(cS=1,og.exports=eC()),og.exports}var h=tC(),lg={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uS;function nC(){if(uS)return Ue;uS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),T=Symbol.iterator;function N(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,L={};function z(V,K,fe){this.props=V,this.context=K,this.refs=L,this.updater=fe||P}z.prototype.isReactComponent={},z.prototype.setState=function(V,K){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,K,"setState")},z.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function H(){}H.prototype=z.prototype;function G(V,K,fe){this.props=V,this.context=K,this.refs=L,this.updater=fe||P}var ie=G.prototype=new H;ie.constructor=G,M(ie,z.prototype),ie.isPureReactComponent=!0;var re=Array.isArray;function ae(){}var j={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function A(V,K,fe){var q=fe.ref;return{$$typeof:n,type:V,key:K,ref:q!==void 0?q:null,props:fe}}function R(V,K){return A(V.type,K,V.props)}function O(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function S(V){var K={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(fe){return K[fe]})}var x=/\/+/g;function Q(V,K){return typeof V=="object"&&V!==null&&V.key!=null?S(""+V.key):K.toString(36)}function te(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ae,ae):(V.status="pending",V.then(function(K){V.status==="pending"&&(V.status="fulfilled",V.value=K)},function(K){V.status==="pending"&&(V.status="rejected",V.reason=K)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function U(V,K,fe,q,ce){var me=typeof V;(me==="undefined"||me==="boolean")&&(V=null);var Ee=!1;if(V===null)Ee=!0;else switch(me){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(V.$$typeof){case n:case e:Ee=!0;break;case v:return Ee=V._init,U(Ee(V._payload),K,fe,q,ce)}}if(Ee)return ce=ce(V),Ee=q===""?"."+Q(V,0):q,re(ce)?(fe="",Ee!=null&&(fe=Ee.replace(x,"$&/")+"/"),U(ce,K,fe,"",function(Pt){return Pt})):ce!=null&&(O(ce)&&(ce=R(ce,fe+(ce.key==null||V&&V.key===ce.key?"":(""+ce.key).replace(x,"$&/")+"/")+Ee)),K.push(ce)),1;Ee=0;var Te=q===""?".":q+":";if(re(V))for(var Ke=0;Ke<V.length;Ke++)q=V[Ke],me=Te+Q(q,Ke),Ee+=U(q,K,fe,me,ce);else if(Ke=N(V),typeof Ke=="function")for(V=Ke.call(V),Ke=0;!(q=V.next()).done;)q=q.value,me=Te+Q(q,Ke++),Ee+=U(q,K,fe,me,ce);else if(me==="object"){if(typeof V.then=="function")return U(te(V),K,fe,q,ce);throw K=String(V),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function ee(V,K,fe){if(V==null)return V;var q=[],ce=0;return U(V,q,"","",function(me){return K.call(fe,me,ce++)}),q}function ge(V){if(V._status===-1){var K=V._result;K=K(),K.then(function(fe){(V._status===0||V._status===-1)&&(V._status=1,V._result=fe)},function(fe){(V._status===0||V._status===-1)&&(V._status=2,V._result=fe)}),V._status===-1&&(V._status=0,V._result=K)}if(V._status===1)return V._result.default;throw V._result}var be=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Y={map:ee,forEach:function(V,K,fe){ee(V,function(){K.apply(this,arguments)},fe)},count:function(V){var K=0;return ee(V,function(){K++}),K},toArray:function(V){return ee(V,function(K){return K})||[]},only:function(V){if(!O(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ue.Activity=b,Ue.Children=Y,Ue.Component=z,Ue.Fragment=t,Ue.Profiler=a,Ue.PureComponent=G,Ue.StrictMode=i,Ue.Suspense=g,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(V){return j.H.useMemoCache(V)}},Ue.cache=function(V){return function(){return V.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(V,K,fe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var q=M({},V.props),ce=V.key;if(K!=null)for(me in K.key!==void 0&&(ce=""+K.key),K)!I.call(K,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&K.ref===void 0||(q[me]=K[me]);var me=arguments.length-2;if(me===1)q.children=fe;else if(1<me){for(var Ee=Array(me),Te=0;Te<me;Te++)Ee[Te]=arguments[Te+2];q.children=Ee}return A(V.type,ce,q)},Ue.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Ue.createElement=function(V,K,fe){var q,ce={},me=null;if(K!=null)for(q in K.key!==void 0&&(me=""+K.key),K)I.call(K,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(ce[q]=K[q]);var Ee=arguments.length-2;if(Ee===1)ce.children=fe;else if(1<Ee){for(var Te=Array(Ee),Ke=0;Ke<Ee;Ke++)Te[Ke]=arguments[Ke+2];ce.children=Te}if(V&&V.defaultProps)for(q in Ee=V.defaultProps,Ee)ce[q]===void 0&&(ce[q]=Ee[q]);return A(V,me,ce)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(V){return{$$typeof:m,render:V}},Ue.isValidElement=O,Ue.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:ge}},Ue.memo=function(V,K){return{$$typeof:y,type:V,compare:K===void 0?null:K}},Ue.startTransition=function(V){var K=j.T,fe={};j.T=fe;try{var q=V(),ce=j.S;ce!==null&&ce(fe,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(ae,be)}catch(me){be(me)}finally{K!==null&&fe.types!==null&&(K.types=fe.types),j.T=K}},Ue.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Ue.use=function(V){return j.H.use(V)},Ue.useActionState=function(V,K,fe){return j.H.useActionState(V,K,fe)},Ue.useCallback=function(V,K){return j.H.useCallback(V,K)},Ue.useContext=function(V){return j.H.useContext(V)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(V,K){return j.H.useDeferredValue(V,K)},Ue.useEffect=function(V,K){return j.H.useEffect(V,K)},Ue.useEffectEvent=function(V){return j.H.useEffectEvent(V)},Ue.useId=function(){return j.H.useId()},Ue.useImperativeHandle=function(V,K,fe){return j.H.useImperativeHandle(V,K,fe)},Ue.useInsertionEffect=function(V,K){return j.H.useInsertionEffect(V,K)},Ue.useLayoutEffect=function(V,K){return j.H.useLayoutEffect(V,K)},Ue.useMemo=function(V,K){return j.H.useMemo(V,K)},Ue.useOptimistic=function(V,K){return j.H.useOptimistic(V,K)},Ue.useReducer=function(V,K,fe){return j.H.useReducer(V,K,fe)},Ue.useRef=function(V){return j.H.useRef(V)},Ue.useState=function(V){return j.H.useState(V)},Ue.useSyncExternalStore=function(V,K,fe){return j.H.useSyncExternalStore(V,K,fe)},Ue.useTransition=function(){return j.H.useTransition()},Ue.version="19.2.0",Ue}var hS;function Ey(){return hS||(hS=1,lg.exports=nC()),lg.exports}var k=Ey();const sC=Z2(k),dS=J2({__proto__:null,default:sC},[k]);var cg={exports:{}},Kc={},ug={exports:{}},hg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS;function iC(){return fS||(fS=1,(function(n){function e(U,ee){var ge=U.length;U.push(ee);e:for(;0<ge;){var be=ge-1>>>1,Y=U[be];if(0<a(Y,ee))U[be]=ee,U[ge]=Y,ge=be;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var ee=U[0],ge=U.pop();if(ge!==ee){U[0]=ge;e:for(var be=0,Y=U.length,V=Y>>>1;be<V;){var K=2*(be+1)-1,fe=U[K],q=K+1,ce=U[q];if(0>a(fe,ge))q<Y&&0>a(ce,fe)?(U[be]=ce,U[q]=ge,be=q):(U[be]=fe,U[K]=ge,be=K);else if(q<Y&&0>a(ce,ge))U[be]=ce,U[q]=ge,be=q;else break e}}return ee}function a(U,ee){var ge=U.sortIndex-ee.sortIndex;return ge!==0?ge:U.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,m=u.now();n.unstable_now=function(){return u.now()-m}}var g=[],y=[],v=1,b=null,T=3,N=!1,P=!1,M=!1,L=!1,z=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function ie(U){for(var ee=t(y);ee!==null;){if(ee.callback===null)i(y);else if(ee.startTime<=U)i(y),ee.sortIndex=ee.expirationTime,e(g,ee);else break;ee=t(y)}}function re(U){if(M=!1,ie(U),!P)if(t(g)!==null)P=!0,ae||(ae=!0,S());else{var ee=t(y);ee!==null&&te(re,ee.startTime-U)}}var ae=!1,j=-1,I=5,A=-1;function R(){return L?!0:!(n.unstable_now()-A<I)}function O(){if(L=!1,ae){var U=n.unstable_now();A=U;var ee=!0;try{e:{P=!1,M&&(M=!1,H(j),j=-1),N=!0;var ge=T;try{t:{for(ie(U),b=t(g);b!==null&&!(b.expirationTime>U&&R());){var be=b.callback;if(typeof be=="function"){b.callback=null,T=b.priorityLevel;var Y=be(b.expirationTime<=U);if(U=n.unstable_now(),typeof Y=="function"){b.callback=Y,ie(U),ee=!0;break t}b===t(g)&&i(g),ie(U)}else i(g);b=t(g)}if(b!==null)ee=!0;else{var V=t(y);V!==null&&te(re,V.startTime-U),ee=!1}}break e}finally{b=null,T=ge,N=!1}ee=void 0}}finally{ee?S():ae=!1}}}var S;if(typeof G=="function")S=function(){G(O)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Q=x.port2;x.port1.onmessage=O,S=function(){Q.postMessage(null)}}else S=function(){z(O,0)};function te(U,ee){j=z(function(){U(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(U){switch(T){case 1:case 2:case 3:var ee=3;break;default:ee=T}var ge=T;T=ee;try{return U()}finally{T=ge}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(U,ee){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ge=T;T=U;try{return ee()}finally{T=ge}},n.unstable_scheduleCallback=function(U,ee,ge){var be=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?be+ge:be):ge=be,U){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ge+Y,U={id:v++,callback:ee,priorityLevel:U,startTime:ge,expirationTime:Y,sortIndex:-1},ge>be?(U.sortIndex=ge,e(y,U),t(g)===null&&U===t(y)&&(M?(H(j),j=-1):M=!0,te(re,ge-be))):(U.sortIndex=Y,e(g,U),P||N||(P=!0,ae||(ae=!0,S()))),U},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(U){var ee=T;return function(){var ge=T;T=ee;try{return U.apply(this,arguments)}finally{T=ge}}}})(hg)),hg}var mS;function rC(){return mS||(mS=1,ug.exports=iC()),ug.exports}var dg={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pS;function aC(){if(pS)return jn;pS=1;var n=Ey();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:g,containerInfo:y,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,jn.createPortal=function(g,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,v)},jn.flushSync=function(g){var y=u.T,v=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=y,i.p=v,i.d.f()}},jn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},jn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},jn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var v=y.as,b=m(v,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,N=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:N}):v==="script"&&i.d.X(g,{crossOrigin:b,integrity:T,fetchPriority:N,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},jn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=m(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},jn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=m(v,y.crossOrigin);i.d.L(g,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},jn.preloadModule=function(g,y){if(typeof g=="string")if(y){var v=m(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},jn.requestFormReset=function(g){i.d.r(g)},jn.unstable_batchedUpdates=function(g,y){return g(y)},jn.useFormState=function(g,y,v){return u.H.useFormState(g,y,v)},jn.useFormStatus=function(){return u.H.useHostTransitionStatus()},jn.version="19.2.0",jn}var gS;function oC(){if(gS)return dg.exports;gS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dg.exports=aC(),dg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yS;function lC(){if(yS)return Kc;yS=1;var n=rC(),e=Ey(),t=oC();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var r=s,o=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(o=r.return),s=r.return;while(s)}return r.tag===3?o:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function m(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function g(s){if(l(s)!==s)throw Error(i(188))}function y(s){var r=s.alternate;if(!r){if(r=l(s),r===null)throw Error(i(188));return r!==s?null:s}for(var o=s,c=r;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return g(f),s;if(p===c)return g(f),r;p=p.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=p;else{for(var w=!1,C=f.child;C;){if(C===o){w=!0,o=f,c=p;break}if(C===c){w=!0,c=f,o=p;break}C=C.sibling}if(!w){for(C=p.child;C;){if(C===o){w=!0,o=p,c=f;break}if(C===c){w=!0,c=p,o=f;break}C=C.sibling}if(!w)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),G=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function S(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var x=Symbol.for("react.client.reference");function Q(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===x?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case z:return"Profiler";case L:return"StrictMode";case re:return"Suspense";case ae:return"SuspenseList";case A:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case P:return"Portal";case G:return s.displayName||"Context";case H:return(s._context.displayName||"Context")+".Consumer";case ie:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case j:return r=s.displayName||null,r!==null?r:Q(s.type)||"Memo";case I:r=s._payload,s=s._init;try{return Q(s(r))}catch{}}return null}var te=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},be=[],Y=-1;function V(s){return{current:s}}function K(s){0>Y||(s.current=be[Y],be[Y]=null,Y--)}function fe(s,r){Y++,be[Y]=s.current,s.current=r}var q=V(null),ce=V(null),me=V(null),Ee=V(null);function Te(s,r){switch(fe(me,r),fe(ce,s),fe(q,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?D1(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=D1(r),s=j1(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}K(q),fe(q,s)}function Ke(){K(q),K(ce),K(me)}function Pt(s){s.memoizedState!==null&&fe(Ee,s);var r=q.current,o=j1(r,s.type);r!==o&&(fe(ce,s),fe(q,o))}function gs(s){ce.current===s&&(K(q),K(ce)),Ee.current===s&&(K(Ee),Fc._currentValue=ge)}var ys,Sr;function _e(s){if(ys===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);ys=r&&r[1]||"",Sr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ys+s+Sr}var je=!1;function Me(s,r){if(!s||je)return"";je=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(se){var Z=se}Reflect.construct(s,[],de)}else{try{de.call()}catch(se){Z=se}s.call(de.prototype)}}else{try{throw Error()}catch(se){Z=se}(de=s())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(se){if(se&&Z&&typeof se.stack=="string")return[se.stack,Z.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),w=p[0],C=p[1];if(w&&C){var B=w.split(`
`),J=C.split(`
`);for(f=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;f<J.length&&!J[f].includes("DetermineComponentFrameRoot");)f++;if(c===B.length||f===J.length)for(c=B.length-1,f=J.length-1;1<=c&&0<=f&&B[c]!==J[f];)f--;for(;1<=c&&0<=f;c--,f--)if(B[c]!==J[f]){if(c!==1||f!==1)do if(c--,f--,0>f||B[c]!==J[f]){var oe=`
`+B[c].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=c&&0<=f);break}}}finally{je=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?_e(o):""}function Ge(s,r){switch(s.tag){case 26:case 27:case 5:return _e(s.type);case 16:return _e("Lazy");case 13:return s.child!==r&&r!==null?_e("Suspense Fallback"):_e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return Me(s.type,!1);case 11:return Me(s.type.render,!1);case 1:return Me(s.type,!0);case 31:return _e("Activity");default:return""}}function Nt(s){try{var r="",o=null;do r+=Ge(s,o),o=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var st=Object.prototype.hasOwnProperty,Le=n.unstable_scheduleCallback,dt=n.unstable_cancelCallback,Sn=n.unstable_shouldYield,br=n.unstable_requestPaint,bn=n.unstable_now,Aa=n.unstable_getCurrentPriorityLevel,$l=n.unstable_ImmediatePriority,Gl=n.unstable_UserBlockingPriority,wr=n.unstable_NormalPriority,um=n.unstable_LowPriority,Xu=n.unstable_IdlePriority,Wu=n.log,Ju=n.unstable_setDisableYieldValue,Ms=null,wn=null;function vs(s){if(typeof Wu=="function"&&Ju(s),wn&&typeof wn.setStrictMode=="function")try{wn.setStrictMode(Ms,s)}catch{}}var Ht=Math.clz32?Math.clz32:eh,Zu=Math.log,So=Math.LN2;function eh(s){return s>>>=0,s===0?32:31-(Zu(s)/So|0)|0}var Js=256,xa=262144,Jt=4194304;function Zs(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ei(s,r,o){var c=s.pendingLanes;if(c===0)return 0;var f=0,p=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var C=c&134217727;return C!==0?(c=C&~p,c!==0?f=Zs(c):(w&=C,w!==0?f=Zs(w):o||(o=C&~s,o!==0&&(f=Zs(o))))):(C=c&~p,C!==0?f=Zs(C):w!==0?f=Zs(w):o||(o=c&~s,o!==0&&(f=Zs(o)))),f===0?0:r!==0&&r!==f&&(r&p)===0&&(p=f&-f,o=r&-r,p>=o||p===32&&(o&4194048)!==0)?r:f}function Ps(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function hm(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function th(){var s=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),s}function ti(s){for(var r=[],o=0;31>o;o++)r.push(s);return r}function Ca(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function dm(s,r,o,c,f,p){var w=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var C=s.entanglements,B=s.expirationTimes,J=s.hiddenUpdates;for(o=w&~o;0<o;){var oe=31-Ht(o),de=1<<oe;C[oe]=0,B[oe]=-1;var Z=J[oe];if(Z!==null)for(J[oe]=null,oe=0;oe<Z.length;oe++){var se=Z[oe];se!==null&&(se.lane&=-536870913)}o&=~de}c!==0&&Na(s,c,0),p!==0&&f===0&&s.tag!==0&&(s.suspendedLanes|=p&~(w&~r))}function Na(s,r,o){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-Ht(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|o&261930}function Kl(s,r){var o=s.entangledLanes|=r;for(s=s.entanglements;o;){var c=31-Ht(o),f=1<<c;f&r|s[c]&r&&(s[c]|=r),o&=~f}}function Yl(s,r){var o=r&-r;return o=(o&42)!==0?1:Ra(o),(o&(s.suspendedLanes|r))!==0?0:o}function Ra(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ui(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function nh(){var s=ee.p;return s!==0?s:(s=window.event,s===void 0?32:tS(s.type))}function Vs(s,r){var o=ee.p;try{return ee.p=s,r()}finally{ee.p=o}}var Ls=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Ls,mn="__reactProps$"+Ls,ni="__reactContainer$"+Ls,bo="__reactEvents$"+Ls,fm="__reactListeners$"+Ls,sh="__reactHandles$"+Ls,ih="__reactResources$"+Ls,si="__reactMarker$"+Ls;function wo(s){delete s[Zt],delete s[mn],delete s[bo],delete s[fm],delete s[sh]}function ii(s){var r=s[Zt];if(r)return r;for(var o=s.parentNode;o;){if(r=o[ni]||o[Zt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(s=U1(s);s!==null;){if(o=s[Zt])return o;s=U1(s)}return r}s=o,o=s.parentNode}return null}function _s(s){if(s=s[Zt]||s[ni]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function ts(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function ri(s){var r=s[ih];return r||(r=s[ih]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function en(s){s[si]=!0}var Ql=new Set,Xl={};function ai(s,r){oi(s,r),oi(s+"Capture",r)}function oi(s,r){for(Xl[s]=r,s=0;s<r.length;s++)Ql.add(r[s])}var Wl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jl={},Zl={};function rh(s){return st.call(Zl,s)?!0:st.call(Jl,s)?!1:Wl.test(s)?Zl[s]=!0:(Jl[s]=!0,!1)}function Eo(s,r,o){if(rh(r))if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+o)}}function ns(s,r,o){if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+o)}}function tn(s,r,o,c){if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(r,o,""+c)}}function pn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Er(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ec(s,r,o){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,p=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return f.call(this)},set:function(w){o=""+w,p.call(this,w)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function ft(s){if(!s._valueTracker){var r=Er(s)?"checked":"value";s._valueTracker=ec(s,r,""+s[r])}}function Ia(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return s&&(c=Er(s)?s.checked?"true":"false":s.value),s=c,s!==o?(r.setValue(s),!0):!1}function li(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Da=/[\n"\\]/g;function qn(s){return s.replace(Da,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function To(s,r,o,c,f,p,w,C){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),r!=null?w==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+pn(r)):s.value!==""+pn(r)&&(s.value=""+pn(r)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),r!=null?tc(s,w,pn(r)):o!=null?tc(s,w,pn(o)):c!=null&&s.removeAttribute("value"),f==null&&p!=null&&(s.defaultChecked=!!p),f!=null&&(s.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.name=""+pn(C):s.removeAttribute("name")}function ah(s,r,o,c,f,p,w,C){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),r!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||r!=null)){ft(s);return}o=o!=null?""+pn(o):"",r=r!=null?""+pn(r):o,C||r===s.value||(s.value=r),s.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=C?s.checked:!!c,s.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),ft(s)}function tc(s,r,o){r==="number"&&li(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function Tr(s,r,o,c){if(s=s.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<s.length;o++)f=r.hasOwnProperty("$"+s[o].value),s[o].selected!==f&&(s[o].selected=f),f&&c&&(s[o].defaultSelected=!0)}else{for(o=""+pn(o),r=null,f=0;f<s.length;f++){if(s[f].value===o){s[f].selected=!0,c&&(s[f].defaultSelected=!0);return}r!==null||s[f].disabled||(r=s[f])}r!==null&&(r.selected=!0)}}function oh(s,r,o){if(r!=null&&(r=""+pn(r),r!==s.value&&(s.value=r),o==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=o!=null?""+pn(o):""}function Ar(s,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(te(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=pn(r),s.defaultValue=o,c=s.textContent,c===o&&c!==""&&c!==null&&(s.value=c),ft(s)}function Hn(s,r){if(r){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=r;return}}s.textContent=r}var lh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nc(s,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,o):typeof o!="number"||o===0||lh.has(r)?r==="float"?s.cssFloat=o:s[r]=(""+o).trim():s[r]=o+"px"}function sc(s,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&nc(s,f,c)}else for(var p in r)r.hasOwnProperty(p)&&nc(s,p,r[p])}function Ao(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ch=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xo(s){return xr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Us(){}var ic=null;function Ss(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Cr=null,ci=null;function ja(s){var r=_s(s);if(r&&(s=r.stateNode)){var o=s[mn]||null;e:switch(s=r.stateNode,r.type){case"input":if(To(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+qn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==s&&c.form===s.form){var f=c[mn]||null;if(!f)throw Error(i(90));To(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===s.form&&Ia(c)}break e;case"textarea":oh(s,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Tr(s,!!o.multiple,r,!1)}}}var Co=!1;function Nr(s,r,o){if(Co)return s(r,o);Co=!0;try{var c=s(r);return c}finally{if(Co=!1,(Cr!==null||ci!==null)&&(nd(),Cr&&(r=Cr,s=ci,ci=Cr=null,ja(r),s)))for(r=0;r<s.length;r++)ja(s[r])}}function zs(s,r){var o=s.stateNode;if(o===null)return null;var c=o[mn]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ka=!1;if(bs)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){ka=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{ka=!1}var ui=null,rc=null,Oa=null;function ac(){if(Oa)return Oa;var s,r=rc,o=r.length,c,f="value"in ui?ui.value:ui.textContent,p=f.length;for(s=0;s<o&&r[s]===f[s];s++);var w=o-s;for(c=1;c<=w&&r[o-c]===f[p-c];c++);return Oa=f.slice(s,1<c?1-c:void 0)}function Ma(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function zi(){return!0}function Bs(){return!1}function En(s){function r(o,c,f,p,w){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(o=s[C],this[C]=o?o(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?zi:Bs,this.isPropagationStopped=Bs,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),r}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hi=En(Bi),Rr=b({},Bi,{view:0,detail:0}),oc=En(Rr),Ir,No,di,Ro=b({},Rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==di&&(di&&s.type==="mousemove"?(Ir=s.screenX-di.screenX,No=s.screenY-di.screenY):No=Ir=0,di=s),Ir)},movementY:function(s){return"movementY"in s?s.movementY:No}}),lc=En(Ro),Pa=b({},Ro,{dataTransfer:0}),uh=En(Pa),hh=b({},Rr,{relatedTarget:0}),Va=En(hh),cc=b({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),dh=En(cc),Io=b({},Bi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),fh=En(Io),mh=b({},Bi,{data:0}),fi=En(mh),ph={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vh(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=yh[s])?!!r[s]:!1}function Dr(){return vh}var Un=b({},Rr,{key:function(s){if(s.key){var r=ph[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Ma(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?gh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dr,charCode:function(s){return s.type==="keypress"?Ma(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ma(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),_h=En(Un),Sh=b({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fi=En(Sh),d=b({},Rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dr}),_=En(d),E=b({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=En(E),X=b({},Ro,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=En(X),ye=b({},Bi,{newState:0,oldState:0}),Be=En(ye),$t=[9,13,27,32],ot=bs&&"CompositionEvent"in window,Rt=null;bs&&"documentMode"in document&&(Rt=document.documentMode);var ws=bs&&"TextEvent"in window&&!Rt,mi=bs&&(!ot||Rt&&8<Rt&&11>=Rt),Fs=" ",qs=!1;function La(s,r){switch(s){case"keyup":return $t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Do(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var jo=!1;function wx(s,r){switch(s){case"compositionend":return Do(r);case"keypress":return r.which!==32?null:(qs=!0,Fs);case"textInput":return s=r.data,s===Fs&&qs?null:s;default:return null}}function Ex(s,r){if(jo)return s==="compositionend"||!ot&&La(s,r)?(s=ac(),Oa=rc=ui=null,jo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return mi&&r.locale!=="ko"?null:r.data;default:return null}}var Tx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fv(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Tx[s.type]:r==="textarea"}function qv(s,r,o,c){Cr?ci?ci.push(c):ci=[c]:Cr=c,r=cd(r,"onChange"),0<r.length&&(o=new hi("onChange","change",null,o,c),s.push({event:o,listeners:r}))}var uc=null,hc=null;function Ax(s){A1(s,0)}function bh(s){var r=ts(s);if(Ia(r))return s}function Hv(s,r){if(s==="change")return r}var $v=!1;if(bs){var mm;if(bs){var pm="oninput"in document;if(!pm){var Gv=document.createElement("div");Gv.setAttribute("oninput","return;"),pm=typeof Gv.oninput=="function"}mm=pm}else mm=!1;$v=mm&&(!document.documentMode||9<document.documentMode)}function Kv(){uc&&(uc.detachEvent("onpropertychange",Yv),hc=uc=null)}function Yv(s){if(s.propertyName==="value"&&bh(hc)){var r=[];qv(r,hc,s,Ss(s)),Nr(Ax,r)}}function xx(s,r,o){s==="focusin"?(Kv(),uc=r,hc=o,uc.attachEvent("onpropertychange",Yv)):s==="focusout"&&Kv()}function Cx(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return bh(hc)}function Nx(s,r){if(s==="click")return bh(r)}function Rx(s,r){if(s==="input"||s==="change")return bh(r)}function Ix(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var ss=typeof Object.is=="function"?Object.is:Ix;function dc(s,r){if(ss(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var o=Object.keys(s),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!st.call(r,f)||!ss(s[f],r[f]))return!1}return!0}function Qv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Xv(s,r){var o=Qv(s);s=0;for(var c;o;){if(o.nodeType===3){if(c=s+o.textContent.length,s<=r&&c>=r)return{node:o,offset:r-s};s=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Qv(o)}}function Wv(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Wv(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Jv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=li(s.document);r instanceof s.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)s=r.contentWindow;else break;r=li(s.document)}return r}function gm(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var Dx=bs&&"documentMode"in document&&11>=document.documentMode,ko=null,ym=null,fc=null,vm=!1;function Zv(s,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;vm||ko==null||ko!==li(c)||(c=ko,"selectionStart"in c&&gm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),fc&&dc(fc,c)||(fc=c,c=cd(ym,"onSelect"),0<c.length&&(r=new hi("onSelect","select",null,r,o),s.push({event:r,listeners:c}),r.target=ko)))}function Ua(s,r){var o={};return o[s.toLowerCase()]=r.toLowerCase(),o["Webkit"+s]="webkit"+r,o["Moz"+s]="moz"+r,o}var Oo={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionrun:Ua("Transition","TransitionRun"),transitionstart:Ua("Transition","TransitionStart"),transitioncancel:Ua("Transition","TransitionCancel"),transitionend:Ua("Transition","TransitionEnd")},_m={},e0={};bs&&(e0=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function za(s){if(_m[s])return _m[s];if(!Oo[s])return s;var r=Oo[s],o;for(o in r)if(r.hasOwnProperty(o)&&o in e0)return _m[s]=r[o];return s}var t0=za("animationend"),n0=za("animationiteration"),s0=za("animationstart"),jx=za("transitionrun"),kx=za("transitionstart"),Ox=za("transitioncancel"),i0=za("transitionend"),r0=new Map,Sm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sm.push("scrollEnd");function Hs(s,r){r0.set(s,r),ai(r,[s])}var wh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Es=[],Mo=0,bm=0;function Eh(){for(var s=Mo,r=bm=Mo=0;r<s;){var o=Es[r];Es[r++]=null;var c=Es[r];Es[r++]=null;var f=Es[r];Es[r++]=null;var p=Es[r];if(Es[r++]=null,c!==null&&f!==null){var w=c.pending;w===null?f.next=f:(f.next=w.next,w.next=f),c.pending=f}p!==0&&a0(o,f,p)}}function Th(s,r,o,c){Es[Mo++]=s,Es[Mo++]=r,Es[Mo++]=o,Es[Mo++]=c,bm|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function wm(s,r,o,c){return Th(s,r,o,c),Ah(s)}function Ba(s,r){return Th(s,null,null,r),Ah(s)}function a0(s,r,o){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o);for(var f=!1,p=s.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(f=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,f&&r!==null&&(f=31-Ht(o),s=p.hiddenUpdates,c=s[f],c===null?s[f]=[r]:c.push(r),r.lane=o|536870912),p):null}function Ah(s){if(50<Mc)throw Mc=0,Dp=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Po={};function Mx(s,r,o,c){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(s,r,o,c){return new Mx(s,r,o,c)}function Em(s){return s=s.prototype,!(!s||!s.isReactComponent)}function qi(s,r){var o=s.alternate;return o===null?(o=is(s.tag,r,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=r,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,r=s.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function o0(s,r){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function xh(s,r,o,c,f,p){var w=0;if(c=s,typeof s=="function")Em(s)&&(w=1);else if(typeof s=="string")w=z2(s,o,q.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case A:return s=is(31,o,r,f),s.elementType=A,s.lanes=p,s;case M:return Fa(o.children,f,p,r);case L:w=8,f|=24;break;case z:return s=is(12,o,r,f|2),s.elementType=z,s.lanes=p,s;case re:return s=is(13,o,r,f),s.elementType=re,s.lanes=p,s;case ae:return s=is(19,o,r,f),s.elementType=ae,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case G:w=10;break e;case H:w=9;break e;case ie:w=11;break e;case j:w=14;break e;case I:w=16,c=null;break e}w=29,o=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=is(w,o,r,f),r.elementType=s,r.type=c,r.lanes=p,r}function Fa(s,r,o,c){return s=is(7,s,c,r),s.lanes=o,s}function Tm(s,r,o){return s=is(6,s,null,r),s.lanes=o,s}function l0(s){var r=is(18,null,null,0);return r.stateNode=s,r}function Am(s,r,o){return r=is(4,s.children!==null?s.children:[],s.key,r),r.lanes=o,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var c0=new WeakMap;function Ts(s,r){if(typeof s=="object"&&s!==null){var o=c0.get(s);return o!==void 0?o:(r={value:s,source:r,stack:Nt(r)},c0.set(s,r),r)}return{value:s,source:r,stack:Nt(r)}}var Vo=[],Lo=0,Ch=null,mc=0,As=[],xs=0,jr=null,pi=1,gi="";function Hi(s,r){Vo[Lo++]=mc,Vo[Lo++]=Ch,Ch=s,mc=r}function u0(s,r,o){As[xs++]=pi,As[xs++]=gi,As[xs++]=jr,jr=s;var c=pi;s=gi;var f=32-Ht(c)-1;c&=~(1<<f),o+=1;var p=32-Ht(r)+f;if(30<p){var w=f-f%5;p=(c&(1<<w)-1).toString(32),c>>=w,f-=w,pi=1<<32-Ht(r)+f|o<<f|c,gi=p+s}else pi=1<<p|o<<f|c,gi=s}function xm(s){s.return!==null&&(Hi(s,1),u0(s,1,0))}function Cm(s){for(;s===Ch;)Ch=Vo[--Lo],Vo[Lo]=null,mc=Vo[--Lo],Vo[Lo]=null;for(;s===jr;)jr=As[--xs],As[xs]=null,gi=As[--xs],As[xs]=null,pi=As[--xs],As[xs]=null}function h0(s,r){As[xs++]=pi,As[xs++]=gi,As[xs++]=jr,pi=r.id,gi=r.overflow,jr=s}var Tn=null,xt=null,nt=!1,kr=null,Cs=!1,Nm=Error(i(519));function Or(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pc(Ts(r,s)),Nm}function d0(s){var r=s.stateNode,o=s.type,c=s.memoizedProps;switch(r[Zt]=s,r[mn]=c,o){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(o=0;o<Vc.length;o++)Qe(Vc[o],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Qe("invalid",r),ah(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Qe("invalid",r);break;case"textarea":Qe("invalid",r),Ar(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||R1(r.textContent,o)?(c.popover!=null&&(Qe("beforetoggle",r),Qe("toggle",r)),c.onScroll!=null&&Qe("scroll",r),c.onScrollEnd!=null&&Qe("scrollend",r),c.onClick!=null&&(r.onclick=Us),r=!0):r=!1,r||Or(s,!0)}function f0(s){for(Tn=s.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:Cs=!1;return;case 27:case 3:Cs=!0;return;default:Tn=Tn.return}}function Uo(s){if(s!==Tn)return!1;if(!nt)return f0(s),nt=!0,!1;var r=s.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Gp(s.type,s.memoizedProps)),o=!o),o&&xt&&Or(s),f0(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));xt=L1(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));xt=L1(s)}else r===27?(r=xt,Yr(s.type)?(s=Wp,Wp=null,xt=s):xt=r):xt=Tn?Rs(s.stateNode.nextSibling):null;return!0}function qa(){xt=Tn=null,nt=!1}function Rm(){var s=kr;return s!==null&&(Yn===null?Yn=s:Yn.push.apply(Yn,s),kr=null),s}function pc(s){kr===null?kr=[s]:kr.push(s)}var Im=V(null),Ha=null,$i=null;function Mr(s,r,o){fe(Im,r._currentValue),r._currentValue=o}function Gi(s){s._currentValue=Im.current,K(Im)}function Dm(s,r,o){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===o)break;s=s.return}}function jm(s,r,o,c){var f=s.child;for(f!==null&&(f.return=s);f!==null;){var p=f.dependencies;if(p!==null){var w=f.child;p=p.firstContext;e:for(;p!==null;){var C=p;p=f;for(var B=0;B<r.length;B++)if(C.context===r[B]){p.lanes|=o,C=p.alternate,C!==null&&(C.lanes|=o),Dm(p.return,o,s),c||(w=null);break e}p=C.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(i(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),Dm(w,o,s),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===s){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function zo(s,r,o,c){s=null;for(var f=r,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var C=f.type;ss(f.pendingProps.value,w.value)||(s!==null?s.push(C):s=[C])}}else if(f===Ee.current){if(w=f.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(s!==null?s.push(Fc):s=[Fc])}f=f.return}s!==null&&jm(r,s,o,c),r.flags|=262144}function Nh(s){for(s=s.firstContext;s!==null;){if(!ss(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function $a(s){Ha=s,$i=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function An(s){return m0(Ha,s)}function Rh(s,r){return Ha===null&&$a(s),m0(s,r)}function m0(s,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},$i===null){if(s===null)throw Error(i(308));$i=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else $i=$i.next=r;return o}var Px=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(o,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(o){return o()})}},Vx=n.unstable_scheduleCallback,Lx=n.unstable_NormalPriority,nn={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function km(){return{controller:new Px,data:new Map,refCount:0}}function gc(s){s.refCount--,s.refCount===0&&Vx(Lx,function(){s.controller.abort()})}var yc=null,Om=0,Bo=0,Fo=null;function Ux(s,r){if(yc===null){var o=yc=[];Om=0,Bo=Vp(),Fo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Om++,r.then(p0,p0),r}function p0(){if(--Om===0&&yc!==null){Fo!==null&&(Fo.status="fulfilled");var s=yc;yc=null,Bo=0,Fo=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function zx(s,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var g0=U.S;U.S=function(s,r){Z_=bn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ux(s,r),g0!==null&&g0(s,r)};var Ga=V(null);function Mm(){var s=Ga.current;return s!==null?s:Tt.pooledCache}function Ih(s,r){r===null?fe(Ga,Ga.current):fe(Ga,r.pool)}function y0(){var s=Mm();return s===null?null:{parent:nn._currentValue,pool:s}}var qo=Error(i(460)),Pm=Error(i(474)),Dh=Error(i(542)),jh={then:function(){}};function v0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function _0(s,r,o){switch(o=s[o],o===void 0?s.push(r):o!==r&&(r.then(Us,Us),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,b0(s),s;default:if(typeof r.status=="string")r.then(Us,Us);else{if(s=Tt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,b0(s),s}throw Ya=r,qo}}function Ka(s){try{var r=s._init;return r(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ya=o,qo):o}}var Ya=null;function S0(){if(Ya===null)throw Error(i(459));var s=Ya;return Ya=null,s}function b0(s){if(s===qo||s===Dh)throw Error(i(483))}var Ho=null,vc=0;function kh(s){var r=vc;return vc+=1,Ho===null&&(Ho=[]),_0(Ho,s,r)}function _c(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Oh(s,r){throw r.$$typeof===T?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function w0(s){function r($,F){if(s){var W=$.deletions;W===null?($.deletions=[F],$.flags|=16):W.push(F)}}function o($,F){if(!s)return null;for(;F!==null;)r($,F),F=F.sibling;return null}function c($){for(var F=new Map;$!==null;)$.key!==null?F.set($.key,$):F.set($.index,$),$=$.sibling;return F}function f($,F){return $=qi($,F),$.index=0,$.sibling=null,$}function p($,F,W){return $.index=W,s?(W=$.alternate,W!==null?(W=W.index,W<F?($.flags|=67108866,F):W):($.flags|=67108866,F)):($.flags|=1048576,F)}function w($){return s&&$.alternate===null&&($.flags|=67108866),$}function C($,F,W,ue){return F===null||F.tag!==6?(F=Tm(W,$.mode,ue),F.return=$,F):(F=f(F,W),F.return=$,F)}function B($,F,W,ue){var Re=W.type;return Re===M?oe($,F,W.props.children,ue,W.key):F!==null&&(F.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===I&&Ka(Re)===F.type)?(F=f(F,W.props),_c(F,W),F.return=$,F):(F=xh(W.type,W.key,W.props,null,$.mode,ue),_c(F,W),F.return=$,F)}function J($,F,W,ue){return F===null||F.tag!==4||F.stateNode.containerInfo!==W.containerInfo||F.stateNode.implementation!==W.implementation?(F=Am(W,$.mode,ue),F.return=$,F):(F=f(F,W.children||[]),F.return=$,F)}function oe($,F,W,ue,Re){return F===null||F.tag!==7?(F=Fa(W,$.mode,ue,Re),F.return=$,F):(F=f(F,W),F.return=$,F)}function de($,F,W){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Tm(""+F,$.mode,W),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case N:return W=xh(F.type,F.key,F.props,null,$.mode,W),_c(W,F),W.return=$,W;case P:return F=Am(F,$.mode,W),F.return=$,F;case I:return F=Ka(F),de($,F,W)}if(te(F)||S(F))return F=Fa(F,$.mode,W,null),F.return=$,F;if(typeof F.then=="function")return de($,kh(F),W);if(F.$$typeof===G)return de($,Rh($,F),W);Oh($,F)}return null}function Z($,F,W,ue){var Re=F!==null?F.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Re!==null?null:C($,F,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case N:return W.key===Re?B($,F,W,ue):null;case P:return W.key===Re?J($,F,W,ue):null;case I:return W=Ka(W),Z($,F,W,ue)}if(te(W)||S(W))return Re!==null?null:oe($,F,W,ue,null);if(typeof W.then=="function")return Z($,F,kh(W),ue);if(W.$$typeof===G)return Z($,F,Rh($,W),ue);Oh($,W)}return null}function se($,F,W,ue,Re){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return $=$.get(W)||null,C(F,$,""+ue,Re);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case N:return $=$.get(ue.key===null?W:ue.key)||null,B(F,$,ue,Re);case P:return $=$.get(ue.key===null?W:ue.key)||null,J(F,$,ue,Re);case I:return ue=Ka(ue),se($,F,W,ue,Re)}if(te(ue)||S(ue))return $=$.get(W)||null,oe(F,$,ue,Re,null);if(typeof ue.then=="function")return se($,F,W,kh(ue),Re);if(ue.$$typeof===G)return se($,F,W,Rh(F,ue),Re);Oh(F,ue)}return null}function Ae($,F,W,ue){for(var Re=null,rt=null,xe=F,He=F=0,Je=null;xe!==null&&He<W.length;He++){xe.index>He?(Je=xe,xe=null):Je=xe.sibling;var at=Z($,xe,W[He],ue);if(at===null){xe===null&&(xe=Je);break}s&&xe&&at.alternate===null&&r($,xe),F=p(at,F,He),rt===null?Re=at:rt.sibling=at,rt=at,xe=Je}if(He===W.length)return o($,xe),nt&&Hi($,He),Re;if(xe===null){for(;He<W.length;He++)xe=de($,W[He],ue),xe!==null&&(F=p(xe,F,He),rt===null?Re=xe:rt.sibling=xe,rt=xe);return nt&&Hi($,He),Re}for(xe=c(xe);He<W.length;He++)Je=se(xe,$,He,W[He],ue),Je!==null&&(s&&Je.alternate!==null&&xe.delete(Je.key===null?He:Je.key),F=p(Je,F,He),rt===null?Re=Je:rt.sibling=Je,rt=Je);return s&&xe.forEach(function(Zr){return r($,Zr)}),nt&&Hi($,He),Re}function Ie($,F,W,ue){if(W==null)throw Error(i(151));for(var Re=null,rt=null,xe=F,He=F=0,Je=null,at=W.next();xe!==null&&!at.done;He++,at=W.next()){xe.index>He?(Je=xe,xe=null):Je=xe.sibling;var Zr=Z($,xe,at.value,ue);if(Zr===null){xe===null&&(xe=Je);break}s&&xe&&Zr.alternate===null&&r($,xe),F=p(Zr,F,He),rt===null?Re=Zr:rt.sibling=Zr,rt=Zr,xe=Je}if(at.done)return o($,xe),nt&&Hi($,He),Re;if(xe===null){for(;!at.done;He++,at=W.next())at=de($,at.value,ue),at!==null&&(F=p(at,F,He),rt===null?Re=at:rt.sibling=at,rt=at);return nt&&Hi($,He),Re}for(xe=c(xe);!at.done;He++,at=W.next())at=se(xe,$,He,at.value,ue),at!==null&&(s&&at.alternate!==null&&xe.delete(at.key===null?He:at.key),F=p(at,F,He),rt===null?Re=at:rt.sibling=at,rt=at);return s&&xe.forEach(function(W2){return r($,W2)}),nt&&Hi($,He),Re}function bt($,F,W,ue){if(typeof W=="object"&&W!==null&&W.type===M&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case N:e:{for(var Re=W.key;F!==null;){if(F.key===Re){if(Re=W.type,Re===M){if(F.tag===7){o($,F.sibling),ue=f(F,W.props.children),ue.return=$,$=ue;break e}}else if(F.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===I&&Ka(Re)===F.type){o($,F.sibling),ue=f(F,W.props),_c(ue,W),ue.return=$,$=ue;break e}o($,F);break}else r($,F);F=F.sibling}W.type===M?(ue=Fa(W.props.children,$.mode,ue,W.key),ue.return=$,$=ue):(ue=xh(W.type,W.key,W.props,null,$.mode,ue),_c(ue,W),ue.return=$,$=ue)}return w($);case P:e:{for(Re=W.key;F!==null;){if(F.key===Re)if(F.tag===4&&F.stateNode.containerInfo===W.containerInfo&&F.stateNode.implementation===W.implementation){o($,F.sibling),ue=f(F,W.children||[]),ue.return=$,$=ue;break e}else{o($,F);break}else r($,F);F=F.sibling}ue=Am(W,$.mode,ue),ue.return=$,$=ue}return w($);case I:return W=Ka(W),bt($,F,W,ue)}if(te(W))return Ae($,F,W,ue);if(S(W)){if(Re=S(W),typeof Re!="function")throw Error(i(150));return W=Re.call(W),Ie($,F,W,ue)}if(typeof W.then=="function")return bt($,F,kh(W),ue);if(W.$$typeof===G)return bt($,F,Rh($,W),ue);Oh($,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,F!==null&&F.tag===6?(o($,F.sibling),ue=f(F,W),ue.return=$,$=ue):(o($,F),ue=Tm(W,$.mode,ue),ue.return=$,$=ue),w($)):o($,F)}return function($,F,W,ue){try{vc=0;var Re=bt($,F,W,ue);return Ho=null,Re}catch(xe){if(xe===qo||xe===Dh)throw xe;var rt=is(29,xe,null,$.mode);return rt.lanes=ue,rt.return=$,rt}finally{}}}var Qa=w0(!0),E0=w0(!1),Pr=!1;function Vm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lm(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Vr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Lr(s,r,o){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(lt&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Ah(s),a0(s,null,o),r}return Th(s,c,r,o),Ah(s)}function Sc(s,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,o|=c,r.lanes=o,Kl(s,o)}}function Um(s,r){var o=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?f=p=r:p=p.next=r}else f=p=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=r:s.next=r,o.lastBaseUpdate=r}var zm=!1;function bc(){if(zm){var s=Fo;if(s!==null)throw s}}function wc(s,r,o,c){zm=!1;var f=s.updateQueue;Pr=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var B=C,J=B.next;B.next=null,w===null?p=J:w.next=J,w=B;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,C=oe.lastBaseUpdate,C!==w&&(C===null?oe.firstBaseUpdate=J:C.next=J,oe.lastBaseUpdate=B))}if(p!==null){var de=f.baseState;w=0,oe=J=B=null,C=p;do{var Z=C.lane&-536870913,se=Z!==C.lane;if(se?(We&Z)===Z:(c&Z)===Z){Z!==0&&Z===Bo&&(zm=!0),oe!==null&&(oe=oe.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ae=s,Ie=C;Z=r;var bt=o;switch(Ie.tag){case 1:if(Ae=Ie.payload,typeof Ae=="function"){de=Ae.call(bt,de,Z);break e}de=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Ie.payload,Z=typeof Ae=="function"?Ae.call(bt,de,Z):Ae,Z==null)break e;de=b({},de,Z);break e;case 2:Pr=!0}}Z=C.callback,Z!==null&&(s.flags|=64,se&&(s.flags|=8192),se=f.callbacks,se===null?f.callbacks=[Z]:se.push(Z))}else se={lane:Z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},oe===null?(J=oe=se,B=de):oe=oe.next=se,w|=Z;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;se=C,C=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);oe===null&&(B=de),f.baseState=B,f.firstBaseUpdate=J,f.lastBaseUpdate=oe,p===null&&(f.shared.lanes=0),qr|=w,s.lanes=w,s.memoizedState=de}}function T0(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function A0(s,r){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)T0(o[s],r)}var $o=V(null),Mh=V(0);function x0(s,r){s=tr,fe(Mh,s),fe($o,r),tr=s|r.baseLanes}function Bm(){fe(Mh,tr),fe($o,$o.current)}function Fm(){tr=Mh.current,K($o),K(Mh)}var rs=V(null),Ns=null;function Ur(s){var r=s.alternate;fe(Gt,Gt.current&1),fe(rs,s),Ns===null&&(r===null||$o.current!==null||r.memoizedState!==null)&&(Ns=s)}function qm(s){fe(Gt,Gt.current),fe(rs,s),Ns===null&&(Ns=s)}function C0(s){s.tag===22?(fe(Gt,Gt.current),fe(rs,s),Ns===null&&(Ns=s)):zr()}function zr(){fe(Gt,Gt.current),fe(rs,rs.current)}function as(s){K(rs),Ns===s&&(Ns=null),K(Gt)}var Gt=V(0);function Ph(s){for(var r=s;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Qp(o)||Xp(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ki=0,Fe=null,_t=null,sn=null,Vh=!1,Go=!1,Xa=!1,Lh=0,Ec=0,Ko=null,Bx=0;function Vt(){throw Error(i(321))}function Hm(s,r){if(r===null)return!1;for(var o=0;o<r.length&&o<s.length;o++)if(!ss(s[o],r[o]))return!1;return!0}function $m(s,r,o,c,f,p){return Ki=p,Fe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,U.H=s===null||s.memoizedState===null?u_:ap,Xa=!1,p=o(c,f),Xa=!1,Go&&(p=R0(r,o,c,f)),N0(s),p}function N0(s){U.H=xc;var r=_t!==null&&_t.next!==null;if(Ki=0,sn=_t=Fe=null,Vh=!1,Ec=0,Ko=null,r)throw Error(i(300));s===null||rn||(s=s.dependencies,s!==null&&Nh(s)&&(rn=!0))}function R0(s,r,o,c){Fe=s;var f=0;do{if(Go&&(Ko=null),Ec=0,Go=!1,25<=f)throw Error(i(301));if(f+=1,sn=_t=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}U.H=h_,p=r(o,c)}while(Go);return p}function Fx(){var s=U.H,r=s.useState()[0];return r=typeof r.then=="function"?Tc(r):r,s=s.useState()[0],(_t!==null?_t.memoizedState:null)!==s&&(Fe.flags|=1024),r}function Gm(){var s=Lh!==0;return Lh=0,s}function Km(s,r,o){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~o}function Ym(s){if(Vh){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Vh=!1}Ki=0,sn=_t=Fe=null,Go=!1,Ec=Lh=0,Ko=null}function zn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Fe.memoizedState=sn=s:sn=sn.next=s,sn}function Kt(){if(_t===null){var s=Fe.alternate;s=s!==null?s.memoizedState:null}else s=_t.next;var r=sn===null?Fe.memoizedState:sn.next;if(r!==null)sn=r,_t=s;else{if(s===null)throw Fe.alternate===null?Error(i(467)):Error(i(310));_t=s,s={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},sn===null?Fe.memoizedState=sn=s:sn=sn.next=s}return sn}function Uh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tc(s){var r=Ec;return Ec+=1,Ko===null&&(Ko=[]),s=_0(Ko,s,r),r=Fe,(sn===null?r.memoizedState:sn.next)===null&&(r=r.alternate,U.H=r===null||r.memoizedState===null?u_:ap),s}function zh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Tc(s);if(s.$$typeof===G)return An(s)}throw Error(i(438,String(s)))}function Qm(s){var r=null,o=Fe.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Fe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Uh(),Fe.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(s),c=0;c<s;c++)o[c]=R;return r.index++,o}function Yi(s,r){return typeof r=="function"?r(s):r}function Bh(s){var r=Kt();return Xm(r,_t,s)}function Xm(s,r,o){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=s.baseQueue,p=c.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}r.baseQueue=f=p,c.pending=null}if(p=s.baseState,f===null)s.memoizedState=p;else{r=f.next;var C=w=null,B=null,J=r,oe=!1;do{var de=J.lane&-536870913;if(de!==J.lane?(We&de)===de:(Ki&de)===de){var Z=J.revertLane;if(Z===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),de===Bo&&(oe=!0);else if((Ki&Z)===Z){J=J.next,Z===Bo&&(oe=!0);continue}else de={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},B===null?(C=B=de,w=p):B=B.next=de,Fe.lanes|=Z,qr|=Z;de=J.action,Xa&&o(p,de),p=J.hasEagerState?J.eagerState:o(p,de)}else Z={lane:de,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},B===null?(C=B=Z,w=p):B=B.next=Z,Fe.lanes|=de,qr|=de;J=J.next}while(J!==null&&J!==r);if(B===null?w=p:B.next=C,!ss(p,s.memoizedState)&&(rn=!0,oe&&(o=Fo,o!==null)))throw o;s.memoizedState=p,s.baseState=w,s.baseQueue=B,c.lastRenderedState=p}return f===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Wm(s){var r=Kt(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=s;var c=o.dispatch,f=o.pending,p=r.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do p=s(p,w.action),w=w.next;while(w!==f);ss(p,r.memoizedState)||(rn=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,c]}function I0(s,r,o){var c=Fe,f=Kt(),p=nt;if(p){if(o===void 0)throw Error(i(407));o=o()}else o=r();var w=!ss((_t||f).memoizedState,o);if(w&&(f.memoizedState=o,rn=!0),f=f.queue,ep(k0.bind(null,c,f,s),[s]),f.getSnapshot!==r||w||sn!==null&&sn.memoizedState.tag&1){if(c.flags|=2048,Yo(9,{destroy:void 0},j0.bind(null,c,f,o,r),null),Tt===null)throw Error(i(349));p||(Ki&127)!==0||D0(c,r,o)}return o}function D0(s,r,o){s.flags|=16384,s={getSnapshot:r,value:o},r=Fe.updateQueue,r===null?(r=Uh(),Fe.updateQueue=r,r.stores=[s]):(o=r.stores,o===null?r.stores=[s]:o.push(s))}function j0(s,r,o,c){r.value=o,r.getSnapshot=c,O0(r)&&M0(s)}function k0(s,r,o){return o(function(){O0(r)&&M0(s)})}function O0(s){var r=s.getSnapshot;s=s.value;try{var o=r();return!ss(s,o)}catch{return!0}}function M0(s){var r=Ba(s,2);r!==null&&Qn(r,s,2)}function Jm(s){var r=zn();if(typeof s=="function"){var o=s;if(s=o(),Xa){vs(!0);try{o()}finally{vs(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:s},r}function P0(s,r,o,c){return s.baseState=o,Xm(s,_t,typeof c=="function"?c:Yi)}function qx(s,r,o,c,f){if(Hh(s))throw Error(i(485));if(s=r.action,s!==null){var p={payload:f,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};U.T!==null?o(!0):p.isTransition=!1,c(p),o=r.pending,o===null?(p.next=r.pending=p,V0(r,p)):(p.next=o.next,r.pending=o.next=p)}}function V0(s,r){var o=r.action,c=r.payload,f=s.state;if(r.isTransition){var p=U.T,w={};U.T=w;try{var C=o(f,c),B=U.S;B!==null&&B(w,C),L0(s,r,C)}catch(J){Zm(s,r,J)}finally{p!==null&&w.types!==null&&(p.types=w.types),U.T=p}}else try{p=o(f,c),L0(s,r,p)}catch(J){Zm(s,r,J)}}function L0(s,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){U0(s,r,c)},function(c){return Zm(s,r,c)}):U0(s,r,o)}function U0(s,r,o){r.status="fulfilled",r.value=o,z0(r),s.state=o,r=s.pending,r!==null&&(o=r.next,o===r?s.pending=null:(o=o.next,r.next=o,V0(s,o)))}function Zm(s,r,o){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,z0(r),r=r.next;while(r!==c)}s.action=null}function z0(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function B0(s,r){return r}function F0(s,r){if(nt){var o=Tt.formState;if(o!==null){e:{var c=Fe;if(nt){if(xt){t:{for(var f=xt,p=Cs;f.nodeType!==8;){if(!p){f=null;break t}if(f=Rs(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){xt=Rs(f.nextSibling),c=f.data==="F!";break e}}Or(c)}c=!1}c&&(r=o[0])}}return o=zn(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:B0,lastRenderedState:r},o.queue=c,o=o_.bind(null,Fe,c),c.dispatch=o,c=Jm(!1),p=rp.bind(null,Fe,!1,c.queue),c=zn(),f={state:r,dispatch:null,action:s,pending:null},c.queue=f,o=qx.bind(null,Fe,f,p,o),f.dispatch=o,c.memoizedState=s,[r,o,!1]}function q0(s){var r=Kt();return H0(r,_t,s)}function H0(s,r,o){if(r=Xm(s,r,B0)[0],s=Bh(Yi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Tc(r)}catch(w){throw w===qo?Dh:w}else c=r;r=Kt();var f=r.queue,p=f.dispatch;return o!==r.memoizedState&&(Fe.flags|=2048,Yo(9,{destroy:void 0},Hx.bind(null,f,o),null)),[c,p,s]}function Hx(s,r){s.action=r}function $0(s){var r=Kt(),o=_t;if(o!==null)return H0(r,o,s);Kt(),r=r.memoizedState,o=Kt();var c=o.queue.dispatch;return o.memoizedState=s,[r,c,!1]}function Yo(s,r,o,c){return s={tag:s,create:o,deps:c,inst:r,next:null},r=Fe.updateQueue,r===null&&(r=Uh(),Fe.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=s.next=s:(c=o.next,o.next=s,s.next=c,r.lastEffect=s),s}function G0(){return Kt().memoizedState}function Fh(s,r,o,c){var f=zn();Fe.flags|=s,f.memoizedState=Yo(1|r,{destroy:void 0},o,c===void 0?null:c)}function qh(s,r,o,c){var f=Kt();c=c===void 0?null:c;var p=f.memoizedState.inst;_t!==null&&c!==null&&Hm(c,_t.memoizedState.deps)?f.memoizedState=Yo(r,p,o,c):(Fe.flags|=s,f.memoizedState=Yo(1|r,p,o,c))}function K0(s,r){Fh(8390656,8,s,r)}function ep(s,r){qh(2048,8,s,r)}function $x(s){Fe.flags|=4;var r=Fe.updateQueue;if(r===null)r=Uh(),Fe.updateQueue=r,r.events=[s];else{var o=r.events;o===null?r.events=[s]:o.push(s)}}function Y0(s){var r=Kt().memoizedState;return $x({ref:r,nextImpl:s}),function(){if((lt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Q0(s,r){return qh(4,2,s,r)}function X0(s,r){return qh(4,4,s,r)}function W0(s,r){if(typeof r=="function"){s=s();var o=r(s);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function J0(s,r,o){o=o!=null?o.concat([s]):null,qh(4,4,W0.bind(null,r,s),o)}function tp(){}function Z0(s,r){var o=Kt();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Hm(r,c[1])?c[0]:(o.memoizedState=[s,r],s)}function e_(s,r){var o=Kt();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Hm(r,c[1]))return c[0];if(c=s(),Xa){vs(!0);try{s()}finally{vs(!1)}}return o.memoizedState=[c,r],c}function np(s,r,o){return o===void 0||(Ki&1073741824)!==0&&(We&261930)===0?s.memoizedState=r:(s.memoizedState=o,s=t1(),Fe.lanes|=s,qr|=s,o)}function t_(s,r,o,c){return ss(o,r)?o:$o.current!==null?(s=np(s,o,c),ss(s,r)||(rn=!0),s):(Ki&42)===0||(Ki&1073741824)!==0&&(We&261930)===0?(rn=!0,s.memoizedState=o):(s=t1(),Fe.lanes|=s,qr|=s,r)}function n_(s,r,o,c,f){var p=ee.p;ee.p=p!==0&&8>p?p:8;var w=U.T,C={};U.T=C,rp(s,!1,r,o);try{var B=f(),J=U.S;if(J!==null&&J(C,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var oe=zx(B,c);Ac(s,r,oe,cs(s))}else Ac(s,r,c,cs(s))}catch(de){Ac(s,r,{then:function(){},status:"rejected",reason:de},cs())}finally{ee.p=p,w!==null&&C.types!==null&&(w.types=C.types),U.T=w}}function Gx(){}function sp(s,r,o,c){if(s.tag!==5)throw Error(i(476));var f=s_(s).queue;n_(s,f,r,ge,o===null?Gx:function(){return i_(s),o(c)})}function s_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:ge},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:o},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function i_(s){var r=s_(s);r.next===null&&(r=s.alternate.memoizedState),Ac(s,r.next.queue,{},cs())}function ip(){return An(Fc)}function r_(){return Kt().memoizedState}function a_(){return Kt().memoizedState}function Kx(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var o=cs();s=Vr(o);var c=Lr(r,s,o);c!==null&&(Qn(c,r,o),Sc(c,r,o)),r={cache:km()},s.payload=r;return}r=r.return}}function Yx(s,r,o){var c=cs();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Hh(s)?l_(r,o):(o=wm(s,r,o,c),o!==null&&(Qn(o,s,c),c_(o,r,c)))}function o_(s,r,o){var c=cs();Ac(s,r,o,c)}function Ac(s,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Hh(s))l_(r,f);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var w=r.lastRenderedState,C=p(w,o);if(f.hasEagerState=!0,f.eagerState=C,ss(C,w))return Th(s,r,f,0),Tt===null&&Eh(),!1}catch{}finally{}if(o=wm(s,r,f,c),o!==null)return Qn(o,s,c),c_(o,r,c),!0}return!1}function rp(s,r,o,c){if(c={lane:2,revertLane:Vp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Hh(s)){if(r)throw Error(i(479))}else r=wm(s,o,c,2),r!==null&&Qn(r,s,2)}function Hh(s){var r=s.alternate;return s===Fe||r!==null&&r===Fe}function l_(s,r){Go=Vh=!0;var o=s.pending;o===null?r.next=r:(r.next=o.next,o.next=r),s.pending=r}function c_(s,r,o){if((o&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,o|=c,r.lanes=o,Kl(s,o)}}var xc={readContext:An,use:zh,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};xc.useEffectEvent=Vt;var u_={readContext:An,use:zh,useCallback:function(s,r){return zn().memoizedState=[s,r===void 0?null:r],s},useContext:An,useEffect:K0,useImperativeHandle:function(s,r,o){o=o!=null?o.concat([s]):null,Fh(4194308,4,W0.bind(null,r,s),o)},useLayoutEffect:function(s,r){return Fh(4194308,4,s,r)},useInsertionEffect:function(s,r){Fh(4,2,s,r)},useMemo:function(s,r){var o=zn();r=r===void 0?null:r;var c=s();if(Xa){vs(!0);try{s()}finally{vs(!1)}}return o.memoizedState=[c,r],c},useReducer:function(s,r,o){var c=zn();if(o!==void 0){var f=o(r);if(Xa){vs(!0);try{o(r)}finally{vs(!1)}}}else f=r;return c.memoizedState=c.baseState=f,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:f},c.queue=s,s=s.dispatch=Yx.bind(null,Fe,s),[c.memoizedState,s]},useRef:function(s){var r=zn();return s={current:s},r.memoizedState=s},useState:function(s){s=Jm(s);var r=s.queue,o=o_.bind(null,Fe,r);return r.dispatch=o,[s.memoizedState,o]},useDebugValue:tp,useDeferredValue:function(s,r){var o=zn();return np(o,s,r)},useTransition:function(){var s=Jm(!1);return s=n_.bind(null,Fe,s.queue,!0,!1),zn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,o){var c=Fe,f=zn();if(nt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),Tt===null)throw Error(i(349));(We&127)!==0||D0(c,r,o)}f.memoizedState=o;var p={value:o,getSnapshot:r};return f.queue=p,K0(k0.bind(null,c,p,s),[s]),c.flags|=2048,Yo(9,{destroy:void 0},j0.bind(null,c,p,o,r),null),o},useId:function(){var s=zn(),r=Tt.identifierPrefix;if(nt){var o=gi,c=pi;o=(c&~(1<<32-Ht(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=Lh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Bx++,r="_"+r+"r_"+o.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:ip,useFormState:F0,useActionState:F0,useOptimistic:function(s){var r=zn();r.memoizedState=r.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=rp.bind(null,Fe,!0,o),o.dispatch=r,[s,r]},useMemoCache:Qm,useCacheRefresh:function(){return zn().memoizedState=Kx.bind(null,Fe)},useEffectEvent:function(s){var r=zn(),o={impl:s};return r.memoizedState=o,function(){if((lt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},ap={readContext:An,use:zh,useCallback:Z0,useContext:An,useEffect:ep,useImperativeHandle:J0,useInsertionEffect:Q0,useLayoutEffect:X0,useMemo:e_,useReducer:Bh,useRef:G0,useState:function(){return Bh(Yi)},useDebugValue:tp,useDeferredValue:function(s,r){var o=Kt();return t_(o,_t.memoizedState,s,r)},useTransition:function(){var s=Bh(Yi)[0],r=Kt().memoizedState;return[typeof s=="boolean"?s:Tc(s),r]},useSyncExternalStore:I0,useId:r_,useHostTransitionStatus:ip,useFormState:q0,useActionState:q0,useOptimistic:function(s,r){var o=Kt();return P0(o,_t,s,r)},useMemoCache:Qm,useCacheRefresh:a_};ap.useEffectEvent=Y0;var h_={readContext:An,use:zh,useCallback:Z0,useContext:An,useEffect:ep,useImperativeHandle:J0,useInsertionEffect:Q0,useLayoutEffect:X0,useMemo:e_,useReducer:Wm,useRef:G0,useState:function(){return Wm(Yi)},useDebugValue:tp,useDeferredValue:function(s,r){var o=Kt();return _t===null?np(o,s,r):t_(o,_t.memoizedState,s,r)},useTransition:function(){var s=Wm(Yi)[0],r=Kt().memoizedState;return[typeof s=="boolean"?s:Tc(s),r]},useSyncExternalStore:I0,useId:r_,useHostTransitionStatus:ip,useFormState:$0,useActionState:$0,useOptimistic:function(s,r){var o=Kt();return _t!==null?P0(o,_t,s,r):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:Qm,useCacheRefresh:a_};h_.useEffectEvent=Y0;function op(s,r,o,c){r=s.memoizedState,o=o(c,r),o=o==null?r:b({},r,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var lp={enqueueSetState:function(s,r,o){s=s._reactInternals;var c=cs(),f=Vr(c);f.payload=r,o!=null&&(f.callback=o),r=Lr(s,f,c),r!==null&&(Qn(r,s,c),Sc(r,s,c))},enqueueReplaceState:function(s,r,o){s=s._reactInternals;var c=cs(),f=Vr(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Lr(s,f,c),r!==null&&(Qn(r,s,c),Sc(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var o=cs(),c=Vr(o);c.tag=2,r!=null&&(c.callback=r),r=Lr(s,c,o),r!==null&&(Qn(r,s,o),Sc(r,s,o))}};function d_(s,r,o,c,f,p,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,p,w):r.prototype&&r.prototype.isPureReactComponent?!dc(o,c)||!dc(f,p):!0}function f_(s,r,o,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==s&&lp.enqueueReplaceState(r,r.state,null)}function Wa(s,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(s=s.defaultProps){o===r&&(o=b({},o));for(var f in s)o[f]===void 0&&(o[f]=s[f])}return o}function m_(s){wh(s)}function p_(s){console.error(s)}function g_(s){wh(s)}function $h(s,r){try{var o=s.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function y_(s,r,o){try{var c=s.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function cp(s,r,o){return o=Vr(o),o.tag=3,o.payload={element:null},o.callback=function(){$h(s,r)},o}function v_(s){return s=Vr(s),s.tag=3,s}function __(s,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;s.payload=function(){return f(p)},s.callback=function(){y_(r,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){y_(r,o,c),typeof f!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function Qx(s,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&zo(r,o,f,!0),o=rs.current,o!==null){switch(o.tag){case 31:case 13:return Ns===null?sd():o.alternate===null&&Lt===0&&(Lt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===jh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Op(s,c,f)),!1;case 22:return o.flags|=65536,c===jh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Op(s,c,f)),!1}throw Error(i(435,o.tag))}return Op(s,c,f),sd(),!1}if(nt)return r=rs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Nm&&(s=Error(i(422),{cause:c}),pc(Ts(s,o)))):(c!==Nm&&(r=Error(i(423),{cause:c}),pc(Ts(r,o))),s=s.current.alternate,s.flags|=65536,f&=-f,s.lanes|=f,c=Ts(c,o),f=cp(s.stateNode,c,f),Um(s,f),Lt!==4&&(Lt=2)),!1;var p=Error(i(520),{cause:c});if(p=Ts(p,o),Oc===null?Oc=[p]:Oc.push(p),Lt!==4&&(Lt=2),r===null)return!0;c=Ts(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,s=f&-f,o.lanes|=s,s=cp(o.stateNode,c,s),Um(o,s),!1;case 1:if(r=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Hr===null||!Hr.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=v_(f),__(f,s,o,c),Um(o,f),!1}o=o.return}while(o!==null);return!1}var up=Error(i(461)),rn=!1;function xn(s,r,o,c){r.child=s===null?E0(r,null,o,c):Qa(r,s.child,o,c)}function S_(s,r,o,c,f){o=o.render;var p=r.ref;if("ref"in c){var w={};for(var C in c)C!=="ref"&&(w[C]=c[C])}else w=c;return $a(r),c=$m(s,r,o,w,p,f),C=Gm(),s!==null&&!rn?(Km(s,r,f),Qi(s,r,f)):(nt&&C&&xm(r),r.flags|=1,xn(s,r,c,f),r.child)}function b_(s,r,o,c,f){if(s===null){var p=o.type;return typeof p=="function"&&!Em(p)&&p.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=p,w_(s,r,p,c,f)):(s=xh(o.type,null,c,r,r.mode,f),s.ref=r.ref,s.return=r,r.child=s)}if(p=s.child,!vp(s,f)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:dc,o(w,c)&&s.ref===r.ref)return Qi(s,r,f)}return r.flags|=1,s=qi(p,c),s.ref=r.ref,s.return=r,r.child=s}function w_(s,r,o,c,f){if(s!==null){var p=s.memoizedProps;if(dc(p,c)&&s.ref===r.ref)if(rn=!1,r.pendingProps=c=p,vp(s,f))(s.flags&131072)!==0&&(rn=!0);else return r.lanes=s.lanes,Qi(s,r,f)}return hp(s,r,o,c,f)}function E_(s,r,o,c){var f=c.children,p=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,s!==null){for(c=r.child=s.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~p}else c=0,r.child=null;return T_(s,r,p,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ih(r,p!==null?p.cachePool:null),p!==null?x0(r,p):Bm(),C0(r);else return c=r.lanes=536870912,T_(s,r,p!==null?p.baseLanes|o:o,o,c)}else p!==null?(Ih(r,p.cachePool),x0(r,p),zr(),r.memoizedState=null):(s!==null&&Ih(r,null),Bm(),zr());return xn(s,r,f,o),r.child}function Cc(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function T_(s,r,o,c,f){var p=Mm();return p=p===null?null:{parent:nn._currentValue,pool:p},r.memoizedState={baseLanes:o,cachePool:p},s!==null&&Ih(r,null),Bm(),C0(r),s!==null&&zo(s,r,c,!0),r.childLanes=f,null}function Gh(s,r){return r=Yh({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function A_(s,r,o){return Qa(r,s.child,null,o),s=Gh(r,r.pendingProps),s.flags|=2,as(r),r.memoizedState=null,s}function Xx(s,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(nt){if(c.mode==="hidden")return s=Gh(r,c),r.lanes=536870912,Cc(null,s);if(qm(r),(s=xt)?(s=V1(s,Cs),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:jr!==null?{id:pi,overflow:gi}:null,retryLane:536870912,hydrationErrors:null},o=l0(s),o.return=r,r.child=o,Tn=r,xt=null)):s=null,s===null)throw Or(r);return r.lanes=536870912,null}return Gh(r,c)}var p=s.memoizedState;if(p!==null){var w=p.dehydrated;if(qm(r),f)if(r.flags&256)r.flags&=-257,r=A_(s,r,o);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(rn||zo(s,r,o,!1),f=(o&s.childLanes)!==0,rn||f){if(c=Tt,c!==null&&(w=Yl(c,o),w!==0&&w!==p.retryLane))throw p.retryLane=w,Ba(s,w),Qn(c,s,w),up;sd(),r=A_(s,r,o)}else s=p.treeContext,xt=Rs(w.nextSibling),Tn=r,nt=!0,kr=null,Cs=!1,s!==null&&h0(r,s),r=Gh(r,c),r.flags|=4096;return r}return s=qi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Kh(s,r){var o=r.ref;if(o===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(s===null||s.ref!==o)&&(r.flags|=4194816)}}function hp(s,r,o,c,f){return $a(r),o=$m(s,r,o,c,void 0,f),c=Gm(),s!==null&&!rn?(Km(s,r,f),Qi(s,r,f)):(nt&&c&&xm(r),r.flags|=1,xn(s,r,o,f),r.child)}function x_(s,r,o,c,f,p){return $a(r),r.updateQueue=null,o=R0(r,c,o,f),N0(s),c=Gm(),s!==null&&!rn?(Km(s,r,p),Qi(s,r,p)):(nt&&c&&xm(r),r.flags|=1,xn(s,r,o,p),r.child)}function C_(s,r,o,c,f){if($a(r),r.stateNode===null){var p=Po,w=o.contextType;typeof w=="object"&&w!==null&&(p=An(w)),p=new o(c,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=lp,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=c,p.state=r.memoizedState,p.refs={},Vm(r),w=o.contextType,p.context=typeof w=="object"&&w!==null?An(w):Po,p.state=r.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(op(r,o,w,c),p.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&lp.enqueueReplaceState(p,p.state,null),wc(r,c,p,f),bc(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){p=r.stateNode;var C=r.memoizedProps,B=Wa(o,C);p.props=B;var J=p.context,oe=o.contextType;w=Po,typeof oe=="object"&&oe!==null&&(w=An(oe));var de=o.getDerivedStateFromProps;oe=typeof de=="function"||typeof p.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,oe||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(C||J!==w)&&f_(r,p,c,w),Pr=!1;var Z=r.memoizedState;p.state=Z,wc(r,c,p,f),bc(),J=r.memoizedState,C||Z!==J||Pr?(typeof de=="function"&&(op(r,o,de,c),J=r.memoizedState),(B=Pr||d_(r,o,B,c,Z,J,w))?(oe||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=J),p.props=c,p.state=J,p.context=w,c=B):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{p=r.stateNode,Lm(s,r),w=r.memoizedProps,oe=Wa(o,w),p.props=oe,de=r.pendingProps,Z=p.context,J=o.contextType,B=Po,typeof J=="object"&&J!==null&&(B=An(J)),C=o.getDerivedStateFromProps,(J=typeof C=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==de||Z!==B)&&f_(r,p,c,B),Pr=!1,Z=r.memoizedState,p.state=Z,wc(r,c,p,f),bc();var se=r.memoizedState;w!==de||Z!==se||Pr||s!==null&&s.dependencies!==null&&Nh(s.dependencies)?(typeof C=="function"&&(op(r,o,C,c),se=r.memoizedState),(oe=Pr||d_(r,o,oe,c,Z,se,B)||s!==null&&s.dependencies!==null&&Nh(s.dependencies))?(J||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,se,B),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,se,B)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===s.memoizedProps&&Z===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&Z===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=se),p.props=c,p.state=se,p.context=B,c=oe):(typeof p.componentDidUpdate!="function"||w===s.memoizedProps&&Z===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&Z===s.memoizedState||(r.flags|=1024),c=!1)}return p=c,Kh(s,r),c=(r.flags&128)!==0,p||c?(p=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,s!==null&&c?(r.child=Qa(r,s.child,null,f),r.child=Qa(r,null,o,f)):xn(s,r,o,f),r.memoizedState=p.state,s=r.child):s=Qi(s,r,f),s}function N_(s,r,o,c){return qa(),r.flags|=256,xn(s,r,o,c),r.child}var dp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fp(s){return{baseLanes:s,cachePool:y0()}}function mp(s,r,o){return s=s!==null?s.childLanes&~o:0,r&&(s|=ls),s}function R_(s,r,o){var c=r.pendingProps,f=!1,p=(r.flags&128)!==0,w;if((w=p)||(w=s!==null&&s.memoizedState===null?!1:(Gt.current&2)!==0),w&&(f=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,s===null){if(nt){if(f?Ur(r):zr(),(s=xt)?(s=V1(s,Cs),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:jr!==null?{id:pi,overflow:gi}:null,retryLane:536870912,hydrationErrors:null},o=l0(s),o.return=r,r.child=o,Tn=r,xt=null)):s=null,s===null)throw Or(r);return Xp(s)?r.lanes=32:r.lanes=536870912,null}var C=c.children;return c=c.fallback,f?(zr(),f=r.mode,C=Yh({mode:"hidden",children:C},f),c=Fa(c,f,o,null),C.return=r,c.return=r,C.sibling=c,r.child=C,c=r.child,c.memoizedState=fp(o),c.childLanes=mp(s,w,o),r.memoizedState=dp,Cc(null,c)):(Ur(r),pp(r,C))}var B=s.memoizedState;if(B!==null&&(C=B.dehydrated,C!==null)){if(p)r.flags&256?(Ur(r),r.flags&=-257,r=gp(s,r,o)):r.memoizedState!==null?(zr(),r.child=s.child,r.flags|=128,r=null):(zr(),C=c.fallback,f=r.mode,c=Yh({mode:"visible",children:c.children},f),C=Fa(C,f,o,null),C.flags|=2,c.return=r,C.return=r,c.sibling=C,r.child=c,Qa(r,s.child,null,o),c=r.child,c.memoizedState=fp(o),c.childLanes=mp(s,w,o),r.memoizedState=dp,r=Cc(null,c));else if(Ur(r),Xp(C)){if(w=C.nextSibling&&C.nextSibling.dataset,w)var J=w.dgst;w=J,c=Error(i(419)),c.stack="",c.digest=w,pc({value:c,source:null,stack:null}),r=gp(s,r,o)}else if(rn||zo(s,r,o,!1),w=(o&s.childLanes)!==0,rn||w){if(w=Tt,w!==null&&(c=Yl(w,o),c!==0&&c!==B.retryLane))throw B.retryLane=c,Ba(s,c),Qn(w,s,c),up;Qp(C)||sd(),r=gp(s,r,o)}else Qp(C)?(r.flags|=192,r.child=s.child,r=null):(s=B.treeContext,xt=Rs(C.nextSibling),Tn=r,nt=!0,kr=null,Cs=!1,s!==null&&h0(r,s),r=pp(r,c.children),r.flags|=4096);return r}return f?(zr(),C=c.fallback,f=r.mode,B=s.child,J=B.sibling,c=qi(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,J!==null?C=qi(J,C):(C=Fa(C,f,o,null),C.flags|=2),C.return=r,c.return=r,c.sibling=C,r.child=c,Cc(null,c),c=r.child,C=s.child.memoizedState,C===null?C=fp(o):(f=C.cachePool,f!==null?(B=nn._currentValue,f=f.parent!==B?{parent:B,pool:B}:f):f=y0(),C={baseLanes:C.baseLanes|o,cachePool:f}),c.memoizedState=C,c.childLanes=mp(s,w,o),r.memoizedState=dp,Cc(s.child,c)):(Ur(r),o=s.child,s=o.sibling,o=qi(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,s!==null&&(w=r.deletions,w===null?(r.deletions=[s],r.flags|=16):w.push(s)),r.child=o,r.memoizedState=null,o)}function pp(s,r){return r=Yh({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Yh(s,r){return s=is(22,s,null,r),s.lanes=0,s}function gp(s,r,o){return Qa(r,s.child,null,o),s=pp(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function I_(s,r,o){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Dm(s.return,r,o)}function yp(s,r,o,c,f,p){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:p}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=o,w.tailMode=f,w.treeForkCount=p)}function D_(s,r,o){var c=r.pendingProps,f=c.revealOrder,p=c.tail;c=c.children;var w=Gt.current,C=(w&2)!==0;if(C?(w=w&1|2,r.flags|=128):w&=1,fe(Gt,w),xn(s,r,c,o),c=nt?mc:0,!C&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&I_(s,o,r);else if(s.tag===19)I_(s,o,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)s=o.alternate,s!==null&&Ph(s)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),yp(r,!1,f,o,p,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(s=f.alternate,s!==null&&Ph(s)===null){r.child=f;break}s=f.sibling,f.sibling=o,o=f,f=s}yp(r,!0,o,null,p,c);break;case"together":yp(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Qi(s,r,o){if(s!==null&&(r.dependencies=s.dependencies),qr|=r.lanes,(o&r.childLanes)===0)if(s!==null){if(zo(s,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,o=qi(s,s.pendingProps),r.child=o,o.return=r;s.sibling!==null;)s=s.sibling,o=o.sibling=qi(s,s.pendingProps),o.return=r;o.sibling=null}return r.child}function vp(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Nh(s)))}function Wx(s,r,o){switch(r.tag){case 3:Te(r,r.stateNode.containerInfo),Mr(r,nn,s.memoizedState.cache),qa();break;case 27:case 5:Pt(r);break;case 4:Te(r,r.stateNode.containerInfo);break;case 10:Mr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,qm(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ur(r),r.flags|=128,null):(o&r.child.childLanes)!==0?R_(s,r,o):(Ur(r),s=Qi(s,r,o),s!==null?s.sibling:null);Ur(r);break;case 19:var f=(s.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(zo(s,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return D_(s,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),fe(Gt,Gt.current),c)break;return null;case 22:return r.lanes=0,E_(s,r,o,r.pendingProps);case 24:Mr(r,nn,s.memoizedState.cache)}return Qi(s,r,o)}function j_(s,r,o){if(s!==null)if(s.memoizedProps!==r.pendingProps)rn=!0;else{if(!vp(s,o)&&(r.flags&128)===0)return rn=!1,Wx(s,r,o);rn=(s.flags&131072)!==0}else rn=!1,nt&&(r.flags&1048576)!==0&&u0(r,mc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=Ka(r.elementType),r.type=s,typeof s=="function")Em(s)?(c=Wa(s,c),r.tag=1,r=C_(null,r,s,c,o)):(r.tag=0,r=hp(null,r,s,c,o));else{if(s!=null){var f=s.$$typeof;if(f===ie){r.tag=11,r=S_(null,r,s,c,o);break e}else if(f===j){r.tag=14,r=b_(null,r,s,c,o);break e}}throw r=Q(s)||s,Error(i(306,r,""))}}return r;case 0:return hp(s,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=Wa(c,r.pendingProps),C_(s,r,c,f,o);case 3:e:{if(Te(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var p=r.memoizedState;f=p.element,Lm(s,r),wc(r,c,null,o);var w=r.memoizedState;if(c=w.cache,Mr(r,nn,c),c!==p.cache&&jm(r,[nn],o,!0),bc(),c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=N_(s,r,c,o);break e}else if(c!==f){f=Ts(Error(i(424)),r),pc(f),r=N_(s,r,c,o);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(xt=Rs(s.firstChild),Tn=r,nt=!0,kr=null,Cs=!0,o=E0(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(qa(),c===f){r=Qi(s,r,o);break e}xn(s,r,c,o)}r=r.child}return r;case 26:return Kh(s,r),s===null?(o=q1(r.type,null,r.pendingProps,null))?r.memoizedState=o:nt||(o=r.type,s=r.pendingProps,c=ud(me.current).createElement(o),c[Zt]=r,c[mn]=s,Cn(c,o,s),en(c),r.stateNode=c):r.memoizedState=q1(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Pt(r),s===null&&nt&&(c=r.stateNode=z1(r.type,r.pendingProps,me.current),Tn=r,Cs=!0,f=xt,Yr(r.type)?(Wp=f,xt=Rs(c.firstChild)):xt=f),xn(s,r,r.pendingProps.children,o),Kh(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&nt&&((f=c=xt)&&(c=C2(c,r.type,r.pendingProps,Cs),c!==null?(r.stateNode=c,Tn=r,xt=Rs(c.firstChild),Cs=!1,f=!0):f=!1),f||Or(r)),Pt(r),f=r.type,p=r.pendingProps,w=s!==null?s.memoizedProps:null,c=p.children,Gp(f,p)?c=null:w!==null&&Gp(f,w)&&(r.flags|=32),r.memoizedState!==null&&(f=$m(s,r,Fx,null,null,o),Fc._currentValue=f),Kh(s,r),xn(s,r,c,o),r.child;case 6:return s===null&&nt&&((s=o=xt)&&(o=N2(o,r.pendingProps,Cs),o!==null?(r.stateNode=o,Tn=r,xt=null,s=!0):s=!1),s||Or(r)),null;case 13:return R_(s,r,o);case 4:return Te(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=Qa(r,null,c,o):xn(s,r,c,o),r.child;case 11:return S_(s,r,r.type,r.pendingProps,o);case 7:return xn(s,r,r.pendingProps,o),r.child;case 8:return xn(s,r,r.pendingProps.children,o),r.child;case 12:return xn(s,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,Mr(r,r.type,c.value),xn(s,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,$a(r),f=An(f),c=c(f),r.flags|=1,xn(s,r,c,o),r.child;case 14:return b_(s,r,r.type,r.pendingProps,o);case 15:return w_(s,r,r.type,r.pendingProps,o);case 19:return D_(s,r,o);case 31:return Xx(s,r,o);case 22:return E_(s,r,o,r.pendingProps);case 24:return $a(r),c=An(nn),s===null?(f=Mm(),f===null&&(f=Tt,p=km(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),r.memoizedState={parent:c,cache:f},Vm(r),Mr(r,nn,f)):((s.lanes&o)!==0&&(Lm(s,r),wc(r,null,null,o),bc()),f=s.memoizedState,p=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Mr(r,nn,c)):(c=p.cache,Mr(r,nn,c),c!==f.cache&&jm(r,[nn],o,!0))),xn(s,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Xi(s){s.flags|=4}function _p(s,r,o,c,f){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(f&335544128)===f)if(s.stateNode.complete)s.flags|=8192;else if(r1())s.flags|=8192;else throw Ya=jh,Pm}else s.flags&=-16777217}function k_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Y1(r))if(r1())s.flags|=8192;else throw Ya=jh,Pm}function Qh(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?th():536870912,s.lanes|=r,Jo|=r)}function Nc(s,r){if(!nt)switch(s.tailMode){case"hidden":r=s.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function Ct(s){var r=s.alternate!==null&&s.alternate.child===s.child,o=0,c=0;if(r)for(var f=s.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=s,f=f.sibling;else for(f=s.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=s,f=f.sibling;return s.subtreeFlags|=c,s.childLanes=o,r}function Jx(s,r,o){var c=r.pendingProps;switch(Cm(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(r),null;case 1:return Ct(r),null;case 3:return o=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Gi(nn),Ke(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Uo(r)?Xi(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Rm())),Ct(r),null;case 26:var f=r.type,p=r.memoizedState;return s===null?(Xi(r),p!==null?(Ct(r),k_(r,p)):(Ct(r),_p(r,f,null,c,o))):p?p!==s.memoizedState?(Xi(r),Ct(r),k_(r,p)):(Ct(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&Xi(r),Ct(r),_p(r,f,s,c,o)),null;case 27:if(gs(r),o=me.current,f=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Xi(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Ct(r),null}s=q.current,Uo(r)?d0(r):(s=z1(f,c,o),r.stateNode=s,Xi(r))}return Ct(r),null;case 5:if(gs(r),f=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Xi(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Ct(r),null}if(p=q.current,Uo(r))d0(r);else{var w=ud(me.current);switch(p){case 1:p=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=w.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?w.createElement(f,{is:c.is}):w.createElement(f)}}p[Zt]=r,p[mn]=c;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)p.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=p;e:switch(Cn(p,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Xi(r)}}return Ct(r),_p(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,o),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&Xi(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=me.current,Uo(r)){if(s=r.stateNode,o=r.memoizedProps,c=null,f=Tn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}s[Zt]=r,s=!!(s.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||R1(s.nodeValue,o)),s||Or(r,!0)}else s=ud(s).createTextNode(c),s[Zt]=r,r.stateNode=s}return Ct(r),null;case 31:if(o=r.memoizedState,s===null||s.memoizedState!==null){if(c=Uo(r),o!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Zt]=r}else qa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ct(r),s=!1}else o=Rm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return r.flags&256?(as(r),r):(as(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Ct(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(f=Uo(r),c!==null&&c.dehydrated!==null){if(s===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Zt]=r}else qa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ct(r),f=!1}else f=Rm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(as(r),r):(as(r),null)}return as(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,s=s!==null&&s.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)),o!==s&&o&&(r.child.flags|=8192),Qh(r,r.updateQueue),Ct(r),null);case 4:return Ke(),s===null&&Bp(r.stateNode.containerInfo),Ct(r),null;case 10:return Gi(r.type),Ct(r),null;case 19:if(K(Gt),c=r.memoizedState,c===null)return Ct(r),null;if(f=(r.flags&128)!==0,p=c.rendering,p===null)if(f)Nc(c,!1);else{if(Lt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(p=Ph(s),p!==null){for(r.flags|=128,Nc(c,!1),s=p.updateQueue,r.updateQueue=s,Qh(r,s),r.subtreeFlags=0,s=o,o=r.child;o!==null;)o0(o,s),o=o.sibling;return fe(Gt,Gt.current&1|2),nt&&Hi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&bn()>ed&&(r.flags|=128,f=!0,Nc(c,!1),r.lanes=4194304)}else{if(!f)if(s=Ph(p),s!==null){if(r.flags|=128,f=!0,s=s.updateQueue,r.updateQueue=s,Qh(r,s),Nc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!nt)return Ct(r),null}else 2*bn()-c.renderingStartTime>ed&&o!==536870912&&(r.flags|=128,f=!0,Nc(c,!1),r.lanes=4194304);c.isBackwards?(p.sibling=r.child,r.child=p):(s=c.last,s!==null?s.sibling=p:r.child=p,c.last=p)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=bn(),s.sibling=null,o=Gt.current,fe(Gt,f?o&1|2:o&1),nt&&Hi(r,c.treeForkCount),s):(Ct(r),null);case 22:case 23:return as(r),Fm(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Ct(r),r.subtreeFlags&6&&(r.flags|=8192)):Ct(r),o=r.updateQueue,o!==null&&Qh(r,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),s!==null&&K(Ga),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Gi(nn),Ct(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Zx(s,r){switch(Cm(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Gi(nn),Ke(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return gs(r),null;case 31:if(r.memoizedState!==null){if(as(r),r.alternate===null)throw Error(i(340));qa()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(as(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));qa()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return K(Gt),null;case 4:return Ke(),null;case 10:return Gi(r.type),null;case 22:case 23:return as(r),Fm(),s!==null&&K(Ga),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Gi(nn),null;case 25:return null;default:return null}}function O_(s,r){switch(Cm(r),r.tag){case 3:Gi(nn),Ke();break;case 26:case 27:case 5:gs(r);break;case 4:Ke();break;case 31:r.memoizedState!==null&&as(r);break;case 13:as(r);break;case 19:K(Gt);break;case 10:Gi(r.type);break;case 22:case 23:as(r),Fm(),s!==null&&K(Ga);break;case 24:Gi(nn)}}function Rc(s,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&s)===s){c=void 0;var p=o.create,w=o.inst;c=p(),w.destroy=c}o=o.next}while(o!==f)}}catch(C){pt(r,r.return,C)}}function Br(s,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&s)===s){var w=c.inst,C=w.destroy;if(C!==void 0){w.destroy=void 0,f=r;var B=o,J=C;try{J()}catch(oe){pt(f,B,oe)}}}c=c.next}while(c!==p)}}catch(oe){pt(r,r.return,oe)}}function M_(s){var r=s.updateQueue;if(r!==null){var o=s.stateNode;try{A0(r,o)}catch(c){pt(s,s.return,c)}}}function P_(s,r,o){o.props=Wa(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(c){pt(s,r,c)}}function Ic(s,r){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof o=="function"?s.refCleanup=o(c):o.current=c}}catch(f){pt(s,r,f)}}function yi(s,r){var o=s.ref,c=s.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){pt(s,r,f)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){pt(s,r,f)}else o.current=null}function V_(s){var r=s.type,o=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){pt(s,s.return,f)}}function Sp(s,r,o){try{var c=s.stateNode;b2(c,s.type,o,r),c[mn]=r}catch(f){pt(s,s.return,f)}}function L_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Yr(s.type)||s.tag===4}function bp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||L_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Yr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function wp(s,r,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(s),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Us));else if(c!==4&&(c===27&&Yr(s.type)&&(o=s.stateNode,r=null),s=s.child,s!==null))for(wp(s,r,o),s=s.sibling;s!==null;)wp(s,r,o),s=s.sibling}function Xh(s,r,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?o.insertBefore(s,r):o.appendChild(s);else if(c!==4&&(c===27&&Yr(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(Xh(s,r,o),s=s.sibling;s!==null;)Xh(s,r,o),s=s.sibling}function U_(s){var r=s.stateNode,o=s.memoizedProps;try{for(var c=s.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Cn(r,c,o),r[Zt]=s,r[mn]=o}catch(p){pt(s,s.return,p)}}var Wi=!1,an=!1,Ep=!1,z_=typeof WeakSet=="function"?WeakSet:Set,gn=null;function e2(s,r){if(s=s.containerInfo,Hp=yd,s=Jv(s),gm(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var w=0,C=-1,B=-1,J=0,oe=0,de=s,Z=null;t:for(;;){for(var se;de!==o||f!==0&&de.nodeType!==3||(C=w+f),de!==p||c!==0&&de.nodeType!==3||(B=w+c),de.nodeType===3&&(w+=de.nodeValue.length),(se=de.firstChild)!==null;)Z=de,de=se;for(;;){if(de===s)break t;if(Z===o&&++J===f&&(C=w),Z===p&&++oe===c&&(B=w),(se=de.nextSibling)!==null)break;de=Z,Z=de.parentNode}de=se}o=C===-1||B===-1?null:{start:C,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for($p={focusedElem:s,selectionRange:o},yd=!1,gn=r;gn!==null;)if(r=gn,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,gn=s;else for(;gn!==null;){switch(r=gn,p=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)f=s[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,o=r,f=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var Ae=Wa(o.type,f);s=c.getSnapshotBeforeUpdate(Ae,p),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ie){pt(o,o.return,Ie)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,o=s.nodeType,o===9)Yp(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Yp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,gn=s;break}gn=r.return}}function B_(s,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Zi(s,o),c&4&&Rc(5,o);break;case 1:if(Zi(s,o),c&4)if(s=o.stateNode,r===null)try{s.componentDidMount()}catch(w){pt(o,o.return,w)}else{var f=Wa(o.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(f,r,s.__reactInternalSnapshotBeforeUpdate)}catch(w){pt(o,o.return,w)}}c&64&&M_(o),c&512&&Ic(o,o.return);break;case 3:if(Zi(s,o),c&64&&(s=o.updateQueue,s!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{A0(s,r)}catch(w){pt(o,o.return,w)}}break;case 27:r===null&&c&4&&U_(o);case 26:case 5:Zi(s,o),r===null&&c&4&&V_(o),c&512&&Ic(o,o.return);break;case 12:Zi(s,o);break;case 31:Zi(s,o),c&4&&H_(s,o);break;case 13:Zi(s,o),c&4&&$_(s,o),c&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=c2.bind(null,o),R2(s,o))));break;case 22:if(c=o.memoizedState!==null||Wi,!c){r=r!==null&&r.memoizedState!==null||an,f=Wi;var p=an;Wi=c,(an=r)&&!p?er(s,o,(o.subtreeFlags&8772)!==0):Zi(s,o),Wi=f,an=p}break;case 30:break;default:Zi(s,o)}}function F_(s){var r=s.alternate;r!==null&&(s.alternate=null,F_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&wo(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var It=null,$n=!1;function Ji(s,r,o){for(o=o.child;o!==null;)q_(s,r,o),o=o.sibling}function q_(s,r,o){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Ms,o)}catch{}switch(o.tag){case 26:an||yi(o,r),Ji(s,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:an||yi(o,r);var c=It,f=$n;Yr(o.type)&&(It=o.stateNode,$n=!1),Ji(s,r,o),Uc(o.stateNode),It=c,$n=f;break;case 5:an||yi(o,r);case 6:if(c=It,f=$n,It=null,Ji(s,r,o),It=c,$n=f,It!==null)if($n)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(o.stateNode)}catch(p){pt(o,r,p)}else try{It.removeChild(o.stateNode)}catch(p){pt(o,r,p)}break;case 18:It!==null&&($n?(s=It,M1(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),al(s)):M1(It,o.stateNode));break;case 4:c=It,f=$n,It=o.stateNode.containerInfo,$n=!0,Ji(s,r,o),It=c,$n=f;break;case 0:case 11:case 14:case 15:Br(2,o,r),an||Br(4,o,r),Ji(s,r,o);break;case 1:an||(yi(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&P_(o,r,c)),Ji(s,r,o);break;case 21:Ji(s,r,o);break;case 22:an=(c=an)||o.memoizedState!==null,Ji(s,r,o),an=c;break;default:Ji(s,r,o)}}function H_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{al(s)}catch(o){pt(r,r.return,o)}}}function $_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{al(s)}catch(o){pt(r,r.return,o)}}function t2(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new z_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new z_),r;default:throw Error(i(435,s.tag))}}function Wh(s,r){var o=t2(s);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=u2.bind(null,s,c);c.then(f,f)}})}function Gn(s,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],p=s,w=r,C=w;e:for(;C!==null;){switch(C.tag){case 27:if(Yr(C.type)){It=C.stateNode,$n=!1;break e}break;case 5:It=C.stateNode,$n=!1;break e;case 3:case 4:It=C.stateNode.containerInfo,$n=!0;break e}C=C.return}if(It===null)throw Error(i(160));q_(p,w,f),It=null,$n=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)G_(r,s),r=r.sibling}var $s=null;function G_(s,r){var o=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Gn(r,s),Kn(s),c&4&&(Br(3,s,s.return),Rc(3,s),Br(5,s,s.return));break;case 1:Gn(r,s),Kn(s),c&512&&(an||o===null||yi(o,o.return)),c&64&&Wi&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=$s;if(Gn(r,s),Kn(s),c&512&&(an||o===null||yi(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=s.memoizedState,o===null)if(c===null)if(s.stateNode===null){e:{c=s.type,o=s.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[si]||p[Zt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),Cn(p,c,o),p[Zt]=s,en(p),c=p;break e;case"link":var w=G1("link","href",f).get(c+(o.href||""));if(w){for(var C=0;C<w.length;C++)if(p=w[C],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(C,1);break t}}p=f.createElement(c),Cn(p,c,o),f.head.appendChild(p);break;case"meta":if(w=G1("meta","content",f).get(c+(o.content||""))){for(C=0;C<w.length;C++)if(p=w[C],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(C,1);break t}}p=f.createElement(c),Cn(p,c,o),f.head.appendChild(p);break;default:throw Error(i(468,c))}p[Zt]=s,en(p),c=p}s.stateNode=c}else K1(f,s.type,s.stateNode);else s.stateNode=$1(f,c,s.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?K1(f,s.type,s.stateNode):$1(f,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Sp(s,s.memoizedProps,o.memoizedProps)}break;case 27:Gn(r,s),Kn(s),c&512&&(an||o===null||yi(o,o.return)),o!==null&&c&4&&Sp(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Gn(r,s),Kn(s),c&512&&(an||o===null||yi(o,o.return)),s.flags&32){f=s.stateNode;try{Hn(f,"")}catch(Ae){pt(s,s.return,Ae)}}c&4&&s.stateNode!=null&&(f=s.memoizedProps,Sp(s,f,o!==null?o.memoizedProps:f)),c&1024&&(Ep=!0);break;case 6:if(Gn(r,s),Kn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,o=s.stateNode;try{o.nodeValue=c}catch(Ae){pt(s,s.return,Ae)}}break;case 3:if(fd=null,f=$s,$s=hd(r.containerInfo),Gn(r,s),$s=f,Kn(s),c&4&&o!==null&&o.memoizedState.isDehydrated)try{al(r.containerInfo)}catch(Ae){pt(s,s.return,Ae)}Ep&&(Ep=!1,K_(s));break;case 4:c=$s,$s=hd(s.stateNode.containerInfo),Gn(r,s),Kn(s),$s=c;break;case 12:Gn(r,s),Kn(s);break;case 31:Gn(r,s),Kn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Wh(s,c)));break;case 13:Gn(r,s),Kn(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Zh=bn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Wh(s,c)));break;case 22:f=s.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,J=Wi,oe=an;if(Wi=J||f,an=oe||B,Gn(r,s),an=oe,Wi=J,Kn(s),c&8192)e:for(r=s.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||B||Wi||an||Ja(s)),o=null,r=s;;){if(r.tag===5||r.tag===26){if(o===null){B=o=r;try{if(p=B.stateNode,f)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{C=B.stateNode;var de=B.memoizedProps.style,Z=de!=null&&de.hasOwnProperty("display")?de.display:null;C.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ae){pt(B,B.return,Ae)}}}else if(r.tag===6){if(o===null){B=r;try{B.stateNode.nodeValue=f?"":B.memoizedProps}catch(Ae){pt(B,B.return,Ae)}}}else if(r.tag===18){if(o===null){B=r;try{var se=B.stateNode;f?P1(se,!0):P1(B.stateNode,!1)}catch(Ae){pt(B,B.return,Ae)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Wh(s,o))));break;case 19:Gn(r,s),Kn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Wh(s,c)));break;case 30:break;case 21:break;default:Gn(r,s),Kn(s)}}function Kn(s){var r=s.flags;if(r&2){try{for(var o,c=s.return;c!==null;){if(L_(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,p=bp(s);Xh(s,p,f);break;case 5:var w=o.stateNode;o.flags&32&&(Hn(w,""),o.flags&=-33);var C=bp(s);Xh(s,C,w);break;case 3:case 4:var B=o.stateNode.containerInfo,J=bp(s);wp(s,J,B);break;default:throw Error(i(161))}}catch(oe){pt(s,s.return,oe)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function K_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;K_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Zi(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)B_(s,r.alternate,r),r=r.sibling}function Ja(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Br(4,r,r.return),Ja(r);break;case 1:yi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&P_(r,r.return,o),Ja(r);break;case 27:Uc(r.stateNode);case 26:case 5:yi(r,r.return),Ja(r);break;case 22:r.memoizedState===null&&Ja(r);break;case 30:Ja(r);break;default:Ja(r)}s=s.sibling}}function er(s,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=s,p=r,w=p.flags;switch(p.tag){case 0:case 11:case 15:er(f,p,o),Rc(4,p);break;case 1:if(er(f,p,o),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(J){pt(c,c.return,J)}if(c=p,f=c.updateQueue,f!==null){var C=c.stateNode;try{var B=f.shared.hiddenCallbacks;if(B!==null)for(f.shared.hiddenCallbacks=null,f=0;f<B.length;f++)T0(B[f],C)}catch(J){pt(c,c.return,J)}}o&&w&64&&M_(p),Ic(p,p.return);break;case 27:U_(p);case 26:case 5:er(f,p,o),o&&c===null&&w&4&&V_(p),Ic(p,p.return);break;case 12:er(f,p,o);break;case 31:er(f,p,o),o&&w&4&&H_(f,p);break;case 13:er(f,p,o),o&&w&4&&$_(f,p);break;case 22:p.memoizedState===null&&er(f,p,o),Ic(p,p.return);break;case 30:break;default:er(f,p,o)}r=r.sibling}}function Tp(s,r){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&gc(o))}function Ap(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&gc(s))}function Gs(s,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Y_(s,r,o,c),r=r.sibling}function Y_(s,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Gs(s,r,o,c),f&2048&&Rc(9,r);break;case 1:Gs(s,r,o,c);break;case 3:Gs(s,r,o,c),f&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&gc(s)));break;case 12:if(f&2048){Gs(s,r,o,c),s=r.stateNode;try{var p=r.memoizedProps,w=p.id,C=p.onPostCommit;typeof C=="function"&&C(w,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(B){pt(r,r.return,B)}}else Gs(s,r,o,c);break;case 31:Gs(s,r,o,c);break;case 13:Gs(s,r,o,c);break;case 23:break;case 22:p=r.stateNode,w=r.alternate,r.memoizedState!==null?p._visibility&2?Gs(s,r,o,c):Dc(s,r):p._visibility&2?Gs(s,r,o,c):(p._visibility|=2,Qo(s,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Tp(w,r);break;case 24:Gs(s,r,o,c),f&2048&&Ap(r.alternate,r);break;default:Gs(s,r,o,c)}}function Qo(s,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var p=s,w=r,C=o,B=c,J=w.flags;switch(w.tag){case 0:case 11:case 15:Qo(p,w,C,B,f),Rc(8,w);break;case 23:break;case 22:var oe=w.stateNode;w.memoizedState!==null?oe._visibility&2?Qo(p,w,C,B,f):Dc(p,w):(oe._visibility|=2,Qo(p,w,C,B,f)),f&&J&2048&&Tp(w.alternate,w);break;case 24:Qo(p,w,C,B,f),f&&J&2048&&Ap(w.alternate,w);break;default:Qo(p,w,C,B,f)}r=r.sibling}}function Dc(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=s,c=r,f=c.flags;switch(c.tag){case 22:Dc(o,c),f&2048&&Tp(c.alternate,c);break;case 24:Dc(o,c),f&2048&&Ap(c.alternate,c);break;default:Dc(o,c)}r=r.sibling}}var jc=8192;function Xo(s,r,o){if(s.subtreeFlags&jc)for(s=s.child;s!==null;)Q_(s,r,o),s=s.sibling}function Q_(s,r,o){switch(s.tag){case 26:Xo(s,r,o),s.flags&jc&&s.memoizedState!==null&&B2(o,$s,s.memoizedState,s.memoizedProps);break;case 5:Xo(s,r,o);break;case 3:case 4:var c=$s;$s=hd(s.stateNode.containerInfo),Xo(s,r,o),$s=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=jc,jc=16777216,Xo(s,r,o),jc=c):Xo(s,r,o));break;default:Xo(s,r,o)}}function X_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function kc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];gn=c,J_(c,s)}X_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)W_(s),s=s.sibling}function W_(s){switch(s.tag){case 0:case 11:case 15:kc(s),s.flags&2048&&Br(9,s,s.return);break;case 3:kc(s);break;case 12:kc(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Jh(s)):kc(s);break;default:kc(s)}}function Jh(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];gn=c,J_(c,s)}X_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Br(8,r,r.return),Jh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Jh(r));break;default:Jh(r)}s=s.sibling}}function J_(s,r){for(;gn!==null;){var o=gn;switch(o.tag){case 0:case 11:case 15:Br(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:gc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,gn=c;else e:for(o=s;gn!==null;){c=gn;var f=c.sibling,p=c.return;if(F_(c),c===o){gn=null;break e}if(f!==null){f.return=p,gn=f;break e}gn=p}}}var n2={getCacheForType:function(s){var r=An(nn),o=r.data.get(s);return o===void 0&&(o=s(),r.data.set(s,o)),o},cacheSignal:function(){return An(nn).controller.signal}},s2=typeof WeakMap=="function"?WeakMap:Map,lt=0,Tt=null,Ye=null,We=0,mt=0,os=null,Fr=!1,Wo=!1,xp=!1,tr=0,Lt=0,qr=0,Za=0,Cp=0,ls=0,Jo=0,Oc=null,Yn=null,Np=!1,Zh=0,Z_=0,ed=1/0,td=null,Hr=null,hn=0,$r=null,Zo=null,nr=0,Rp=0,Ip=null,e1=null,Mc=0,Dp=null;function cs(){return(lt&2)!==0&&We!==0?We&-We:U.T!==null?Vp():nh()}function t1(){if(ls===0)if((We&536870912)===0||nt){var s=xa;xa<<=1,(xa&3932160)===0&&(xa=262144),ls=s}else ls=536870912;return s=rs.current,s!==null&&(s.flags|=32),ls}function Qn(s,r,o){(s===Tt&&(mt===2||mt===9)||s.cancelPendingCommit!==null)&&(el(s,0),Gr(s,We,ls,!1)),Ca(s,o),((lt&2)===0||s!==Tt)&&(s===Tt&&((lt&2)===0&&(Za|=o),Lt===4&&Gr(s,We,ls,!1)),vi(s))}function n1(s,r,o){if((lt&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&s.expiredLanes)===0||Ps(s,r),f=c?a2(s,r):kp(s,r,!0),p=c;do{if(f===0){Wo&&!c&&Gr(s,r,0,!1);break}else{if(o=s.current.alternate,p&&!i2(o)){f=kp(s,r,!1),p=!1;continue}if(f===2){if(p=r,s.errorRecoveryDisabledLanes&p)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var C=s;f=Oc;var B=C.current.memoizedState.isDehydrated;if(B&&(el(C,w).flags|=256),w=kp(C,w,!1),w!==2){if(xp&&!B){C.errorRecoveryDisabledLanes|=p,Za|=p,f=4;break e}p=Yn,Yn=f,p!==null&&(Yn===null?Yn=p:Yn.push.apply(Yn,p))}f=w}if(p=!1,f!==2)continue}}if(f===1){el(s,0),Gr(s,r,0,!0);break}e:{switch(c=s,p=f,p){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Gr(c,r,ls,!Fr);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Zh+300-bn(),10<f)){if(Gr(c,r,ls,!Fr),ei(c,0,!0)!==0)break e;nr=r,c.timeoutHandle=k1(s1.bind(null,c,o,Yn,td,Np,r,ls,Za,Jo,Fr,p,"Throttled",-0,0),f);break e}s1(c,o,Yn,td,Np,r,ls,Za,Jo,Fr,p,null,-0,0)}}break}while(!0);vi(s)}function s1(s,r,o,c,f,p,w,C,B,J,oe,de,Z,se){if(s.timeoutHandle=-1,de=r.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Us},Q_(r,p,de);var Ae=(p&62914560)===p?Zh-bn():(p&4194048)===p?Z_-bn():0;if(Ae=F2(de,Ae),Ae!==null){nr=p,s.cancelPendingCommit=Ae(h1.bind(null,s,r,p,o,c,f,w,C,B,oe,de,null,Z,se)),Gr(s,p,w,!J);return}}h1(s,r,p,o,c,f,w,C,B)}function i2(s){for(var r=s;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],p=f.getSnapshot;f=f.value;try{if(!ss(p(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Gr(s,r,o,c){r&=~Cp,r&=~Za,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var f=r;0<f;){var p=31-Ht(f),w=1<<p;c[p]=-1,f&=~w}o!==0&&Na(s,o,r)}function nd(){return(lt&6)===0?(Pc(0),!1):!0}function jp(){if(Ye!==null){if(mt===0)var s=Ye.return;else s=Ye,$i=Ha=null,Ym(s),Ho=null,vc=0,s=Ye;for(;s!==null;)O_(s.alternate,s),s=s.return;Ye=null}}function el(s,r){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,T2(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),nr=0,jp(),Tt=s,Ye=o=qi(s.current,null),We=r,mt=0,os=null,Fr=!1,Wo=Ps(s,r),xp=!1,Jo=ls=Cp=Za=qr=Lt=0,Yn=Oc=null,Np=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var f=31-Ht(c),p=1<<f;r|=s[f],c&=~p}return tr=r,Eh(),o}function i1(s,r){Fe=null,U.H=xc,r===qo||r===Dh?(r=S0(),mt=3):r===Pm?(r=S0(),mt=4):mt=r===up?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,os=r,Ye===null&&(Lt=1,$h(s,Ts(r,s.current)))}function r1(){var s=rs.current;return s===null?!0:(We&4194048)===We?Ns===null:(We&62914560)===We||(We&536870912)!==0?s===Ns:!1}function a1(){var s=U.H;return U.H=xc,s===null?xc:s}function o1(){var s=U.A;return U.A=n2,s}function sd(){Lt=4,Fr||(We&4194048)!==We&&rs.current!==null||(Wo=!0),(qr&134217727)===0&&(Za&134217727)===0||Tt===null||Gr(Tt,We,ls,!1)}function kp(s,r,o){var c=lt;lt|=2;var f=a1(),p=o1();(Tt!==s||We!==r)&&(td=null,el(s,r)),r=!1;var w=Lt;e:do try{if(mt!==0&&Ye!==null){var C=Ye,B=os;switch(mt){case 8:jp(),w=6;break e;case 3:case 2:case 9:case 6:rs.current===null&&(r=!0);var J=mt;if(mt=0,os=null,tl(s,C,B,J),o&&Wo){w=0;break e}break;default:J=mt,mt=0,os=null,tl(s,C,B,J)}}r2(),w=Lt;break}catch(oe){i1(s,oe)}while(!0);return r&&s.shellSuspendCounter++,$i=Ha=null,lt=c,U.H=f,U.A=p,Ye===null&&(Tt=null,We=0,Eh()),w}function r2(){for(;Ye!==null;)l1(Ye)}function a2(s,r){var o=lt;lt|=2;var c=a1(),f=o1();Tt!==s||We!==r?(td=null,ed=bn()+500,el(s,r)):Wo=Ps(s,r);e:do try{if(mt!==0&&Ye!==null){r=Ye;var p=os;t:switch(mt){case 1:mt=0,os=null,tl(s,r,p,1);break;case 2:case 9:if(v0(p)){mt=0,os=null,c1(r);break}r=function(){mt!==2&&mt!==9||Tt!==s||(mt=7),vi(s)},p.then(r,r);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:v0(p)?(mt=0,os=null,c1(r)):(mt=0,os=null,tl(s,r,p,7));break;case 5:var w=null;switch(Ye.tag){case 26:w=Ye.memoizedState;case 5:case 27:var C=Ye;if(w?Y1(w):C.stateNode.complete){mt=0,os=null;var B=C.sibling;if(B!==null)Ye=B;else{var J=C.return;J!==null?(Ye=J,id(J)):Ye=null}break t}}mt=0,os=null,tl(s,r,p,5);break;case 6:mt=0,os=null,tl(s,r,p,6);break;case 8:jp(),Lt=6;break e;default:throw Error(i(462))}}o2();break}catch(oe){i1(s,oe)}while(!0);return $i=Ha=null,U.H=c,U.A=f,lt=o,Ye!==null?0:(Tt=null,We=0,Eh(),Lt)}function o2(){for(;Ye!==null&&!Sn();)l1(Ye)}function l1(s){var r=j_(s.alternate,s,tr);s.memoizedProps=s.pendingProps,r===null?id(s):Ye=r}function c1(s){var r=s,o=r.alternate;switch(r.tag){case 15:case 0:r=x_(o,r,r.pendingProps,r.type,void 0,We);break;case 11:r=x_(o,r,r.pendingProps,r.type.render,r.ref,We);break;case 5:Ym(r);default:O_(o,r),r=Ye=o0(r,tr),r=j_(o,r,tr)}s.memoizedProps=s.pendingProps,r===null?id(s):Ye=r}function tl(s,r,o,c){$i=Ha=null,Ym(r),Ho=null,vc=0;var f=r.return;try{if(Qx(s,f,r,o,We)){Lt=1,$h(s,Ts(o,s.current)),Ye=null;return}}catch(p){if(f!==null)throw Ye=f,p;Lt=1,$h(s,Ts(o,s.current)),Ye=null;return}r.flags&32768?(nt||c===1?s=!0:Wo||(We&536870912)!==0?s=!1:(Fr=s=!0,(c===2||c===9||c===3||c===6)&&(c=rs.current,c!==null&&c.tag===13&&(c.flags|=16384))),u1(r,s)):id(r)}function id(s){var r=s;do{if((r.flags&32768)!==0){u1(r,Fr);return}s=r.return;var o=Jx(r.alternate,r,tr);if(o!==null){Ye=o;return}if(r=r.sibling,r!==null){Ye=r;return}Ye=r=s}while(r!==null);Lt===0&&(Lt=5)}function u1(s,r){do{var o=Zx(s.alternate,s);if(o!==null){o.flags&=32767,Ye=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(s=s.sibling,s!==null)){Ye=s;return}Ye=s=o}while(s!==null);Lt=6,Ye=null}function h1(s,r,o,c,f,p,w,C,B){s.cancelPendingCommit=null;do rd();while(hn!==0);if((lt&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(p=r.lanes|r.childLanes,p|=bm,dm(s,o,p,w,C,B),s===Tt&&(Ye=Tt=null,We=0),Zo=r,$r=s,nr=o,Rp=p,Ip=f,e1=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,h2(wr,function(){return g1(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=U.T,U.T=null,f=ee.p,ee.p=2,w=lt,lt|=4;try{e2(s,r,o)}finally{lt=w,ee.p=f,U.T=c}}hn=1,d1(),f1(),m1()}}function d1(){if(hn===1){hn=0;var s=$r,r=Zo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=U.T,U.T=null;var c=ee.p;ee.p=2;var f=lt;lt|=4;try{G_(r,s);var p=$p,w=Jv(s.containerInfo),C=p.focusedElem,B=p.selectionRange;if(w!==C&&C&&C.ownerDocument&&Wv(C.ownerDocument.documentElement,C)){if(B!==null&&gm(C)){var J=B.start,oe=B.end;if(oe===void 0&&(oe=J),"selectionStart"in C)C.selectionStart=J,C.selectionEnd=Math.min(oe,C.value.length);else{var de=C.ownerDocument||document,Z=de&&de.defaultView||window;if(Z.getSelection){var se=Z.getSelection(),Ae=C.textContent.length,Ie=Math.min(B.start,Ae),bt=B.end===void 0?Ie:Math.min(B.end,Ae);!se.extend&&Ie>bt&&(w=bt,bt=Ie,Ie=w);var $=Xv(C,Ie),F=Xv(C,bt);if($&&F&&(se.rangeCount!==1||se.anchorNode!==$.node||se.anchorOffset!==$.offset||se.focusNode!==F.node||se.focusOffset!==F.offset)){var W=de.createRange();W.setStart($.node,$.offset),se.removeAllRanges(),Ie>bt?(se.addRange(W),se.extend(F.node,F.offset)):(W.setEnd(F.node,F.offset),se.addRange(W))}}}}for(de=[],se=C;se=se.parentNode;)se.nodeType===1&&de.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<de.length;C++){var ue=de[C];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}yd=!!Hp,$p=Hp=null}finally{lt=f,ee.p=c,U.T=o}}s.current=r,hn=2}}function f1(){if(hn===2){hn=0;var s=$r,r=Zo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=U.T,U.T=null;var c=ee.p;ee.p=2;var f=lt;lt|=4;try{B_(s,r.alternate,r)}finally{lt=f,ee.p=c,U.T=o}}hn=3}}function m1(){if(hn===4||hn===3){hn=0,br();var s=$r,r=Zo,o=nr,c=e1;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?hn=5:(hn=0,Zo=$r=null,p1(s,s.pendingLanes));var f=s.pendingLanes;if(f===0&&(Hr=null),Ui(o),r=r.stateNode,wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Ms,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=U.T,f=ee.p,ee.p=2,U.T=null;try{for(var p=s.onRecoverableError,w=0;w<c.length;w++){var C=c[w];p(C.value,{componentStack:C.stack})}}finally{U.T=r,ee.p=f}}(nr&3)!==0&&rd(),vi(s),f=s.pendingLanes,(o&261930)!==0&&(f&42)!==0?s===Dp?Mc++:(Mc=0,Dp=s):Mc=0,Pc(0)}}function p1(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,gc(r)))}function rd(){return d1(),f1(),m1(),g1()}function g1(){if(hn!==5)return!1;var s=$r,r=Rp;Rp=0;var o=Ui(nr),c=U.T,f=ee.p;try{ee.p=32>o?32:o,U.T=null,o=Ip,Ip=null;var p=$r,w=nr;if(hn=0,Zo=$r=null,nr=0,(lt&6)!==0)throw Error(i(331));var C=lt;if(lt|=4,W_(p.current),Y_(p,p.current,w,o),lt=C,Pc(0,!1),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Ms,p)}catch{}return!0}finally{ee.p=f,U.T=c,p1(s,r)}}function y1(s,r,o){r=Ts(o,r),r=cp(s.stateNode,r,2),s=Lr(s,r,2),s!==null&&(Ca(s,2),vi(s))}function pt(s,r,o){if(s.tag===3)y1(s,s,o);else for(;r!==null;){if(r.tag===3){y1(r,s,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Hr===null||!Hr.has(c))){s=Ts(o,s),o=v_(2),c=Lr(r,o,2),c!==null&&(__(o,c,r,s),Ca(c,2),vi(c));break}}r=r.return}}function Op(s,r,o){var c=s.pingCache;if(c===null){c=s.pingCache=new s2;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(xp=!0,f.add(o),s=l2.bind(null,s,r,o),r.then(s,s))}function l2(s,r,o){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,Tt===s&&(We&o)===o&&(Lt===4||Lt===3&&(We&62914560)===We&&300>bn()-Zh?(lt&2)===0&&el(s,0):Cp|=o,Jo===We&&(Jo=0)),vi(s)}function v1(s,r){r===0&&(r=th()),s=Ba(s,r),s!==null&&(Ca(s,r),vi(s))}function c2(s){var r=s.memoizedState,o=0;r!==null&&(o=r.retryLane),v1(s,o)}function u2(s,r){var o=0;switch(s.tag){case 31:case 13:var c=s.stateNode,f=s.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),v1(s,o)}function h2(s,r){return Le(s,r)}var ad=null,nl=null,Mp=!1,od=!1,Pp=!1,Kr=0;function vi(s){s!==nl&&s.next===null&&(nl===null?ad=nl=s:nl=nl.next=s),od=!0,Mp||(Mp=!0,f2())}function Pc(s,r){if(!Pp&&od){Pp=!0;do for(var o=!1,c=ad;c!==null;){if(s!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var w=c.suspendedLanes,C=c.pingedLanes;p=(1<<31-Ht(42|s)+1)-1,p&=f&~(w&~C),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,w1(c,p))}else p=We,p=ei(c,c===Tt?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Ps(c,p)||(o=!0,w1(c,p));c=c.next}while(o);Pp=!1}}function d2(){_1()}function _1(){od=Mp=!1;var s=0;Kr!==0&&E2()&&(s=Kr);for(var r=bn(),o=null,c=ad;c!==null;){var f=c.next,p=S1(c,r);p===0?(c.next=null,o===null?ad=f:o.next=f,f===null&&(nl=o)):(o=c,(s!==0||(p&3)!==0)&&(od=!0)),c=f}hn!==0&&hn!==5||Pc(s),Kr!==0&&(Kr=0)}function S1(s,r){for(var o=s.suspendedLanes,c=s.pingedLanes,f=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var w=31-Ht(p),C=1<<w,B=f[w];B===-1?((C&o)===0||(C&c)!==0)&&(f[w]=hm(C,r)):B<=r&&(s.expiredLanes|=C),p&=~C}if(r=Tt,o=We,o=ei(s,s===r?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,o===0||s===r&&(mt===2||mt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&dt(c),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Ps(s,o)){if(r=o&-o,r===s.callbackPriority)return r;switch(c!==null&&dt(c),Ui(o)){case 2:case 8:o=Gl;break;case 32:o=wr;break;case 268435456:o=Xu;break;default:o=wr}return c=b1.bind(null,s),o=Le(o,c),s.callbackPriority=r,s.callbackNode=o,r}return c!==null&&c!==null&&dt(c),s.callbackPriority=2,s.callbackNode=null,2}function b1(s,r){if(hn!==0&&hn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(rd()&&s.callbackNode!==o)return null;var c=We;return c=ei(s,s===Tt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(n1(s,c,r),S1(s,bn()),s.callbackNode!=null&&s.callbackNode===o?b1.bind(null,s):null)}function w1(s,r){if(rd())return null;n1(s,r,!0)}function f2(){A2(function(){(lt&6)!==0?Le($l,d2):_1()})}function Vp(){if(Kr===0){var s=Bo;s===0&&(s=Js,Js<<=1,(Js&261888)===0&&(Js=256)),Kr=s}return Kr}function E1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:xo(""+s)}function T1(s,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,s.id&&o.setAttribute("form",s.id),r.parentNode.insertBefore(o,r),s=new FormData(s),o.parentNode.removeChild(o),s}function m2(s,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var p=E1((f[mn]||null).action),w=c.submitter;w&&(r=(r=w[mn]||null)?E1(r.formAction):w.getAttribute("formAction"),r!==null&&(p=r,w=null));var C=new hi("action","action",null,c,f);s.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Kr!==0){var B=w?T1(f,w):new FormData(f);sp(o,{pending:!0,data:B,method:f.method,action:p},null,B)}}else typeof p=="function"&&(C.preventDefault(),B=w?T1(f,w):new FormData(f),sp(o,{pending:!0,data:B,method:f.method,action:p},p,B))},currentTarget:f}]})}}for(var Lp=0;Lp<Sm.length;Lp++){var Up=Sm[Lp],p2=Up.toLowerCase(),g2=Up[0].toUpperCase()+Up.slice(1);Hs(p2,"on"+g2)}Hs(t0,"onAnimationEnd"),Hs(n0,"onAnimationIteration"),Hs(s0,"onAnimationStart"),Hs("dblclick","onDoubleClick"),Hs("focusin","onFocus"),Hs("focusout","onBlur"),Hs(jx,"onTransitionRun"),Hs(kx,"onTransitionStart"),Hs(Ox,"onTransitionCancel"),Hs(i0,"onTransitionEnd"),oi("onMouseEnter",["mouseout","mouseover"]),oi("onMouseLeave",["mouseout","mouseover"]),oi("onPointerEnter",["pointerout","pointerover"]),oi("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vc));function A1(s,r){r=(r&4)!==0;for(var o=0;o<s.length;o++){var c=s[o],f=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var w=c.length-1;0<=w;w--){var C=c[w],B=C.instance,J=C.currentTarget;if(C=C.listener,B!==p&&f.isPropagationStopped())break e;p=C,f.currentTarget=J;try{p(f)}catch(oe){wh(oe)}f.currentTarget=null,p=B}else for(w=0;w<c.length;w++){if(C=c[w],B=C.instance,J=C.currentTarget,C=C.listener,B!==p&&f.isPropagationStopped())break e;p=C,f.currentTarget=J;try{p(f)}catch(oe){wh(oe)}f.currentTarget=null,p=B}}}}function Qe(s,r){var o=r[bo];o===void 0&&(o=r[bo]=new Set);var c=s+"__bubble";o.has(c)||(x1(r,s,2,!1),o.add(c))}function zp(s,r,o){var c=0;r&&(c|=4),x1(o,s,c,r)}var ld="_reactListening"+Math.random().toString(36).slice(2);function Bp(s){if(!s[ld]){s[ld]=!0,Ql.forEach(function(o){o!=="selectionchange"&&(y2.has(o)||zp(o,!1,s),zp(o,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[ld]||(r[ld]=!0,zp("selectionchange",!1,r))}}function x1(s,r,o,c){switch(tS(r)){case 2:var f=$2;break;case 8:f=G2;break;default:f=ng}o=f.bind(null,r,o,s),f=void 0,!ka||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?s.addEventListener(r,o,{capture:!0,passive:f}):s.addEventListener(r,o,!0):f!==void 0?s.addEventListener(r,o,{passive:f}):s.addEventListener(r,o,!1)}function Fp(s,r,o,c,f){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===f)break;if(w===4)for(w=c.return;w!==null;){var B=w.tag;if((B===3||B===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;C!==null;){if(w=ii(C),w===null)return;if(B=w.tag,B===5||B===6||B===26||B===27){c=p=w;continue e}C=C.parentNode}}c=c.return}Nr(function(){var J=p,oe=Ss(o),de=[];e:{var Z=r0.get(s);if(Z!==void 0){var se=hi,Ae=s;switch(s){case"keypress":if(Ma(o)===0)break e;case"keydown":case"keyup":se=_h;break;case"focusin":Ae="focus",se=Va;break;case"focusout":Ae="blur",se=Va;break;case"beforeblur":case"afterblur":se=Va;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=uh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=_;break;case t0:case n0:case s0:se=dh;break;case i0:se=D;break;case"scroll":case"scrollend":se=oc;break;case"wheel":se=ne;break;case"copy":case"cut":case"paste":se=fh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Fi;break;case"toggle":case"beforetoggle":se=Be}var Ie=(r&4)!==0,bt=!Ie&&(s==="scroll"||s==="scrollend"),$=Ie?Z!==null?Z+"Capture":null:Z;Ie=[];for(var F=J,W;F!==null;){var ue=F;if(W=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||W===null||$===null||(ue=zs(F,$),ue!=null&&Ie.push(Lc(F,ue,W))),bt)break;F=F.return}0<Ie.length&&(Z=new se(Z,Ae,null,o,oe),de.push({event:Z,listeners:Ie}))}}if((r&7)===0){e:{if(Z=s==="mouseover"||s==="pointerover",se=s==="mouseout"||s==="pointerout",Z&&o!==ic&&(Ae=o.relatedTarget||o.fromElement)&&(ii(Ae)||Ae[ni]))break e;if((se||Z)&&(Z=oe.window===oe?oe:(Z=oe.ownerDocument)?Z.defaultView||Z.parentWindow:window,se?(Ae=o.relatedTarget||o.toElement,se=J,Ae=Ae?ii(Ae):null,Ae!==null&&(bt=l(Ae),Ie=Ae.tag,Ae!==bt||Ie!==5&&Ie!==27&&Ie!==6)&&(Ae=null)):(se=null,Ae=J),se!==Ae)){if(Ie=lc,ue="onMouseLeave",$="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(Ie=Fi,ue="onPointerLeave",$="onPointerEnter",F="pointer"),bt=se==null?Z:ts(se),W=Ae==null?Z:ts(Ae),Z=new Ie(ue,F+"leave",se,o,oe),Z.target=bt,Z.relatedTarget=W,ue=null,ii(oe)===J&&(Ie=new Ie($,F+"enter",Ae,o,oe),Ie.target=W,Ie.relatedTarget=bt,ue=Ie),bt=ue,se&&Ae)t:{for(Ie=v2,$=se,F=Ae,W=0,ue=$;ue;ue=Ie(ue))W++;ue=0;for(var Re=F;Re;Re=Ie(Re))ue++;for(;0<W-ue;)$=Ie($),W--;for(;0<ue-W;)F=Ie(F),ue--;for(;W--;){if($===F||F!==null&&$===F.alternate){Ie=$;break t}$=Ie($),F=Ie(F)}Ie=null}else Ie=null;se!==null&&C1(de,Z,se,Ie,!1),Ae!==null&&bt!==null&&C1(de,bt,Ae,Ie,!0)}}e:{if(Z=J?ts(J):window,se=Z.nodeName&&Z.nodeName.toLowerCase(),se==="select"||se==="input"&&Z.type==="file")var rt=Hv;else if(Fv(Z))if($v)rt=Rx;else{rt=Cx;var xe=xx}else se=Z.nodeName,!se||se.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?J&&Ao(J.elementType)&&(rt=Hv):rt=Nx;if(rt&&(rt=rt(s,J))){qv(de,rt,o,oe);break e}xe&&xe(s,Z,J),s==="focusout"&&J&&Z.type==="number"&&J.memoizedProps.value!=null&&tc(Z,"number",Z.value)}switch(xe=J?ts(J):window,s){case"focusin":(Fv(xe)||xe.contentEditable==="true")&&(ko=xe,ym=J,fc=null);break;case"focusout":fc=ym=ko=null;break;case"mousedown":vm=!0;break;case"contextmenu":case"mouseup":case"dragend":vm=!1,Zv(de,o,oe);break;case"selectionchange":if(Dx)break;case"keydown":case"keyup":Zv(de,o,oe)}var He;if(ot)e:{switch(s){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else jo?La(s,o)&&(Je="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(Je="onCompositionStart");Je&&(mi&&o.locale!=="ko"&&(jo||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&jo&&(He=ac()):(ui=oe,rc="value"in ui?ui.value:ui.textContent,jo=!0)),xe=cd(J,Je),0<xe.length&&(Je=new fi(Je,s,null,o,oe),de.push({event:Je,listeners:xe}),He?Je.data=He:(He=Do(o),He!==null&&(Je.data=He)))),(He=ws?wx(s,o):Ex(s,o))&&(Je=cd(J,"onBeforeInput"),0<Je.length&&(xe=new fi("onBeforeInput","beforeinput",null,o,oe),de.push({event:xe,listeners:Je}),xe.data=He)),m2(de,s,J,o,oe)}A1(de,r)})}function Lc(s,r,o){return{instance:s,listener:r,currentTarget:o}}function cd(s,r){for(var o=r+"Capture",c=[];s!==null;){var f=s,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=zs(s,o),f!=null&&c.unshift(Lc(s,f,p)),f=zs(s,r),f!=null&&c.push(Lc(s,f,p))),s.tag===3)return c;s=s.return}return[]}function v2(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function C1(s,r,o,c,f){for(var p=r._reactName,w=[];o!==null&&o!==c;){var C=o,B=C.alternate,J=C.stateNode;if(C=C.tag,B!==null&&B===c)break;C!==5&&C!==26&&C!==27||J===null||(B=J,f?(J=zs(o,p),J!=null&&w.unshift(Lc(o,J,B))):f||(J=zs(o,p),J!=null&&w.push(Lc(o,J,B)))),o=o.return}w.length!==0&&s.push({event:r,listeners:w})}var _2=/\r\n?/g,S2=/\u0000|\uFFFD/g;function N1(s){return(typeof s=="string"?s:""+s).replace(_2,`
`).replace(S2,"")}function R1(s,r){return r=N1(r),N1(s)===r}function St(s,r,o,c,f,p){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Hn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Hn(s,""+c);break;case"className":ns(s,"class",c);break;case"tabIndex":ns(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ns(s,o,c);break;case"style":sc(s,c,p);break;case"data":if(r!=="object"){ns(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){s.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=xo(""+c),s.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(r!=="input"&&St(s,r,"name",f.name,f,null),St(s,r,"formEncType",f.formEncType,f,null),St(s,r,"formMethod",f.formMethod,f,null),St(s,r,"formTarget",f.formTarget,f,null)):(St(s,r,"encType",f.encType,f,null),St(s,r,"method",f.method,f,null),St(s,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=xo(""+c),s.setAttribute(o,c);break;case"onClick":c!=null&&(s.onclick=Us);break;case"onScroll":c!=null&&Qe("scroll",s);break;case"onScrollEnd":c!=null&&Qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}o=xo(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""+c):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":c===!0?s.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,c):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(o,c):s.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(o):s.setAttribute(o,c);break;case"popover":Qe("beforetoggle",s),Qe("toggle",s),Eo(s,"popover",c);break;case"xlinkActuate":tn(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":tn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":tn(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":tn(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":tn(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":tn(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":tn(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":tn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":tn(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Eo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ch.get(o)||o,Eo(s,o,c))}}function qp(s,r,o,c,f,p){switch(o){case"style":sc(s,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"children":typeof c=="string"?Hn(s,c):(typeof c=="number"||typeof c=="bigint")&&Hn(s,""+c);break;case"onScroll":c!=null&&Qe("scroll",s);break;case"onScrollEnd":c!=null&&Qe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),p=s[mn]||null,p=p!=null?p[o]:null,typeof p=="function"&&s.removeEventListener(r,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(r,c,f);break e}o in s?s[o]=c:c===!0?s.setAttribute(o,""):Eo(s,o,c)}}}function Cn(s,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",s),Qe("load",s);var c=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:St(s,r,p,w,o,null)}}f&&St(s,r,"srcSet",o.srcSet,o,null),c&&St(s,r,"src",o.src,o,null);return;case"input":Qe("invalid",s);var C=p=w=f=null,B=null,J=null;for(c in o)if(o.hasOwnProperty(c)){var oe=o[c];if(oe!=null)switch(c){case"name":f=oe;break;case"type":w=oe;break;case"checked":B=oe;break;case"defaultChecked":J=oe;break;case"value":p=oe;break;case"defaultValue":C=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,r));break;default:St(s,r,c,oe,o,null)}}ah(s,p,C,B,J,w,f,!1);return;case"select":Qe("invalid",s),c=w=p=null;for(f in o)if(o.hasOwnProperty(f)&&(C=o[f],C!=null))switch(f){case"value":p=C;break;case"defaultValue":w=C;break;case"multiple":c=C;default:St(s,r,f,C,o,null)}r=p,o=w,s.multiple=!!c,r!=null?Tr(s,!!c,r,!1):o!=null&&Tr(s,!!c,o,!0);return;case"textarea":Qe("invalid",s),p=f=c=null;for(w in o)if(o.hasOwnProperty(w)&&(C=o[w],C!=null))switch(w){case"value":c=C;break;case"defaultValue":f=C;break;case"children":p=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:St(s,r,w,C,o,null)}Ar(s,c,f,p);return;case"option":for(B in o)if(o.hasOwnProperty(B)&&(c=o[B],c!=null))switch(B){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:St(s,r,B,c,o,null)}return;case"dialog":Qe("beforetoggle",s),Qe("toggle",s),Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":Qe("load",s);break;case"video":case"audio":for(c=0;c<Vc.length;c++)Qe(Vc[c],s);break;case"image":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"embed":case"source":case"link":Qe("error",s),Qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in o)if(o.hasOwnProperty(J)&&(c=o[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:St(s,r,J,c,o,null)}return;default:if(Ao(r)){for(oe in o)o.hasOwnProperty(oe)&&(c=o[oe],c!==void 0&&qp(s,r,oe,c,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(c=o[C],c!=null&&St(s,r,C,c,o,null))}function b2(s,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,w=null,C=null,B=null,J=null,oe=null;for(se in o){var de=o[se];if(o.hasOwnProperty(se)&&de!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":B=de;default:c.hasOwnProperty(se)||St(s,r,se,null,c,de)}}for(var Z in c){var se=c[Z];if(de=o[Z],c.hasOwnProperty(Z)&&(se!=null||de!=null))switch(Z){case"type":p=se;break;case"name":f=se;break;case"checked":J=se;break;case"defaultChecked":oe=se;break;case"value":w=se;break;case"defaultValue":C=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,r));break;default:se!==de&&St(s,r,Z,se,c,de)}}To(s,w,C,B,J,oe,p,f);return;case"select":se=w=C=Z=null;for(p in o)if(B=o[p],o.hasOwnProperty(p)&&B!=null)switch(p){case"value":break;case"multiple":se=B;default:c.hasOwnProperty(p)||St(s,r,p,null,c,B)}for(f in c)if(p=c[f],B=o[f],c.hasOwnProperty(f)&&(p!=null||B!=null))switch(f){case"value":Z=p;break;case"defaultValue":C=p;break;case"multiple":w=p;default:p!==B&&St(s,r,f,p,c,B)}r=C,o=w,c=se,Z!=null?Tr(s,!!o,Z,!1):!!c!=!!o&&(r!=null?Tr(s,!!o,r,!0):Tr(s,!!o,o?[]:"",!1));return;case"textarea":se=Z=null;for(C in o)if(f=o[C],o.hasOwnProperty(C)&&f!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:St(s,r,C,null,c,f)}for(w in c)if(f=c[w],p=o[w],c.hasOwnProperty(w)&&(f!=null||p!=null))switch(w){case"value":Z=f;break;case"defaultValue":se=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==p&&St(s,r,w,f,c,p)}oh(s,Z,se);return;case"option":for(var Ae in o)if(Z=o[Ae],o.hasOwnProperty(Ae)&&Z!=null&&!c.hasOwnProperty(Ae))switch(Ae){case"selected":s.selected=!1;break;default:St(s,r,Ae,null,c,Z)}for(B in c)if(Z=c[B],se=o[B],c.hasOwnProperty(B)&&Z!==se&&(Z!=null||se!=null))switch(B){case"selected":s.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:St(s,r,B,Z,c,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in o)Z=o[Ie],o.hasOwnProperty(Ie)&&Z!=null&&!c.hasOwnProperty(Ie)&&St(s,r,Ie,null,c,Z);for(J in c)if(Z=c[J],se=o[J],c.hasOwnProperty(J)&&Z!==se&&(Z!=null||se!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:St(s,r,J,Z,c,se)}return;default:if(Ao(r)){for(var bt in o)Z=o[bt],o.hasOwnProperty(bt)&&Z!==void 0&&!c.hasOwnProperty(bt)&&qp(s,r,bt,void 0,c,Z);for(oe in c)Z=c[oe],se=o[oe],!c.hasOwnProperty(oe)||Z===se||Z===void 0&&se===void 0||qp(s,r,oe,Z,c,se);return}}for(var $ in o)Z=o[$],o.hasOwnProperty($)&&Z!=null&&!c.hasOwnProperty($)&&St(s,r,$,null,c,Z);for(de in c)Z=c[de],se=o[de],!c.hasOwnProperty(de)||Z===se||Z==null&&se==null||St(s,r,de,Z,c,se)}function I1(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function w2(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],p=f.transferSize,w=f.initiatorType,C=f.duration;if(p&&C&&I1(w)){for(w=0,C=f.responseEnd,c+=1;c<o.length;c++){var B=o[c],J=B.startTime;if(J>C)break;var oe=B.transferSize,de=B.initiatorType;oe&&I1(de)&&(B=B.responseEnd,w+=oe*(B<C?1:(C-J)/(B-J)))}if(--c,r+=8*(p+w)/(f.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Hp=null,$p=null;function ud(s){return s.nodeType===9?s:s.ownerDocument}function D1(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j1(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Gp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Kp=null;function E2(){var s=window.event;return s&&s.type==="popstate"?s===Kp?!1:(Kp=s,!0):(Kp=null,!1)}var k1=typeof setTimeout=="function"?setTimeout:void 0,T2=typeof clearTimeout=="function"?clearTimeout:void 0,O1=typeof Promise=="function"?Promise:void 0,A2=typeof queueMicrotask=="function"?queueMicrotask:typeof O1<"u"?function(s){return O1.resolve(null).then(s).catch(x2)}:k1;function x2(s){setTimeout(function(){throw s})}function Yr(s){return s==="head"}function M1(s,r){var o=r,c=0;do{var f=o.nextSibling;if(s.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){s.removeChild(f),al(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Uc(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,Uc(o);for(var p=o.firstChild;p;){var w=p.nextSibling,C=p.nodeName;p[si]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=w}}else o==="body"&&Uc(s.ownerDocument.body);o=f}while(o);al(r)}function P1(s,r){var o=s;s=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=c}while(o)}function Yp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Yp(o),wo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function C2(s,r,o,c){for(;s.nodeType===1;){var f=o;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[si])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==f.rel||s.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||s.getAttribute("title")!==(f.title==null?null:f.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(f.src==null?null:f.src)||s.getAttribute("type")!==(f.type==null?null:f.type)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=Rs(s.nextSibling),s===null)break}return null}function N2(s,r,o){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Rs(s.nextSibling),s===null))return null;return s}function V1(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Rs(s.nextSibling),s===null))return null;return s}function Qp(s){return s.data==="$?"||s.data==="$~"}function Xp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function R2(s,r){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Rs(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var Wp=null;function L1(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(r===0)return Rs(s.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}s=s.nextSibling}return null}function U1(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return s;r--}else o!=="/$"&&o!=="/&"||r++}s=s.previousSibling}return null}function z1(s,r,o){switch(r=ud(o),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Uc(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);wo(s)}var Is=new Map,B1=new Set;function hd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var sr=ee.d;ee.d={f:I2,r:D2,D:j2,C:k2,L:O2,m:M2,X:V2,S:P2,M:L2};function I2(){var s=sr.f(),r=nd();return s||r}function D2(s){var r=_s(s);r!==null&&r.tag===5&&r.type==="form"?i_(r):sr.r(s)}var sl=typeof document>"u"?null:document;function F1(s,r,o){var c=sl;if(c&&typeof r=="string"&&r){var f=qn(r);f='link[rel="'+s+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),B1.has(f)||(B1.add(f),s={rel:s,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Cn(r,"link",s),en(r),c.head.appendChild(r)))}}function j2(s){sr.D(s),F1("dns-prefetch",s,null)}function k2(s,r){sr.C(s,r),F1("preconnect",s,r)}function O2(s,r,o){sr.L(s,r,o);var c=sl;if(c&&s&&r){var f='link[rel="preload"][as="'+qn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+qn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+qn(o.imageSizes)+'"]')):f+='[href="'+qn(s)+'"]';var p=f;switch(r){case"style":p=il(s);break;case"script":p=rl(s)}Is.has(p)||(s=b({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:s,as:r},o),Is.set(p,s),c.querySelector(f)!==null||r==="style"&&c.querySelector(zc(p))||r==="script"&&c.querySelector(Bc(p))||(r=c.createElement("link"),Cn(r,"link",s),en(r),c.head.appendChild(r)))}}function M2(s,r){sr.m(s,r);var o=sl;if(o&&s){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+qn(c)+'"][href="'+qn(s)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=rl(s)}if(!Is.has(p)&&(s=b({rel:"modulepreload",href:s},r),Is.set(p,s),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Bc(p)))return}c=o.createElement("link"),Cn(c,"link",s),en(c),o.head.appendChild(c)}}}function P2(s,r,o){sr.S(s,r,o);var c=sl;if(c&&s){var f=ri(c).hoistableStyles,p=il(s);r=r||"default";var w=f.get(p);if(!w){var C={loading:0,preload:null};if(w=c.querySelector(zc(p)))C.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":r},o),(o=Is.get(p))&&Jp(s,o);var B=w=c.createElement("link");en(B),Cn(B,"link",s),B._p=new Promise(function(J,oe){B.onload=J,B.onerror=oe}),B.addEventListener("load",function(){C.loading|=1}),B.addEventListener("error",function(){C.loading|=2}),C.loading|=4,dd(w,r,c)}w={type:"stylesheet",instance:w,count:1,state:C},f.set(p,w)}}}function V2(s,r){sr.X(s,r);var o=sl;if(o&&s){var c=ri(o).hoistableScripts,f=rl(s),p=c.get(f);p||(p=o.querySelector(Bc(f)),p||(s=b({src:s,async:!0},r),(r=Is.get(f))&&Zp(s,r),p=o.createElement("script"),en(p),Cn(p,"link",s),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function L2(s,r){sr.M(s,r);var o=sl;if(o&&s){var c=ri(o).hoistableScripts,f=rl(s),p=c.get(f);p||(p=o.querySelector(Bc(f)),p||(s=b({src:s,async:!0,type:"module"},r),(r=Is.get(f))&&Zp(s,r),p=o.createElement("script"),en(p),Cn(p,"link",s),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function q1(s,r,o,c){var f=(f=me.current)?hd(f):null;if(!f)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=il(o.href),o=ri(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=il(o.href);var p=ri(f).hoistableStyles,w=p.get(s);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,w),(p=f.querySelector(zc(s)))&&!p._p&&(w.instance=p,w.state.loading=5),Is.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Is.set(s,o),p||U2(f,s,o,w.state))),r&&c===null)throw Error(i(528,""));return w}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=rl(o),o=ri(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function il(s){return'href="'+qn(s)+'"'}function zc(s){return'link[rel="stylesheet"]['+s+"]"}function H1(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function U2(s,r,o,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Cn(r,"link",o),en(r),s.head.appendChild(r))}function rl(s){return'[src="'+qn(s)+'"]'}function Bc(s){return"script[async]"+s}function $1(s,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+qn(o.href)+'"]');if(c)return r.instance=c,en(c),c;var f=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),en(c),Cn(c,"style",f),dd(c,o.precedence,s),r.instance=c;case"stylesheet":f=il(o.href);var p=s.querySelector(zc(f));if(p)return r.state.loading|=4,r.instance=p,en(p),p;c=H1(o),(f=Is.get(f))&&Jp(c,f),p=(s.ownerDocument||s).createElement("link"),en(p);var w=p;return w._p=new Promise(function(C,B){w.onload=C,w.onerror=B}),Cn(p,"link",c),r.state.loading|=4,dd(p,o.precedence,s),r.instance=p;case"script":return p=rl(o.src),(f=s.querySelector(Bc(p)))?(r.instance=f,en(f),f):(c=o,(f=Is.get(p))&&(c=b({},o),Zp(c,f)),s=s.ownerDocument||s,f=s.createElement("script"),en(f),Cn(f,"link",c),s.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,dd(c,o.precedence,s));return r.instance}function dd(s,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,w=0;w<c.length;w++){var C=c[w];if(C.dataset.precedence===r)p=C;else if(p!==f)break}p?p.parentNode.insertBefore(s,p.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(s,r.firstChild))}function Jp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Zp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var fd=null;function G1(s,r,o){if(fd===null){var c=new Map,f=fd=new Map;f.set(o,c)}else f=fd,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(s))return c;for(c.set(s,null),o=o.getElementsByTagName(s),f=0;f<o.length;f++){var p=o[f];if(!(p[si]||p[Zt]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(r)||"";w=s+w;var C=c.get(w);C?C.push(p):c.set(w,[p])}}return c}function K1(s,r,o){s=s.ownerDocument||s,s.head.insertBefore(o,r==="title"?s.querySelector("head > title"):null)}function z2(s,r,o){if(o===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Y1(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function B2(s,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=il(c.href),p=r.querySelector(zc(f));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=md.bind(s),r.then(s,s)),o.state.loading|=4,o.instance=p,en(p);return}p=r.ownerDocument||r,c=H1(c),(f=Is.get(f))&&Jp(c,f),p=p.createElement("link"),en(p);var w=p;w._p=new Promise(function(C,B){w.onload=C,w.onerror=B}),Cn(p,"link",c),o.instance=p}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=md.bind(s),r.addEventListener("load",o),r.addEventListener("error",o))}}var eg=0;function F2(s,r){return s.stylesheets&&s.count===0&&gd(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var c=setTimeout(function(){if(s.stylesheets&&gd(s,s.stylesheets),s.unsuspend){var p=s.unsuspend;s.unsuspend=null,p()}},6e4+r);0<s.imgBytes&&eg===0&&(eg=62500*w2());var f=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&gd(s,s.stylesheets),s.unsuspend)){var p=s.unsuspend;s.unsuspend=null,p()}},(s.imgBytes>eg?50:800)+r);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function md(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var pd=null;function gd(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,pd=new Map,r.forEach(q2,s),pd=null,md.call(s))}function q2(s,r){if(!(r.state.loading&4)){var o=pd.get(s);if(o)var c=o.get(null);else{o=new Map,pd.set(s,o);for(var f=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var w=f[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}f=r.instance,w=f.getAttribute("data-precedence"),p=o.get(w)||c,p===c&&o.set(null,f),o.set(w,f),this.count++,c=md.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(f,s.firstChild)),r.state.loading|=4}}var Fc={$$typeof:G,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function H2(s,r,o,c,f,p,w,C,B){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ti(0),this.hiddenUpdates=ti(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Q1(s,r,o,c,f,p,w,C,B,J,oe,de){return s=new H2(s,r,o,w,B,J,oe,de,C),r=1,p===!0&&(r|=24),p=is(3,null,null,r),s.current=p,p.stateNode=s,r=km(),r.refCount++,s.pooledCache=r,r.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:r},Vm(p),s}function X1(s){return s?(s=Po,s):Po}function W1(s,r,o,c,f,p){f=X1(f),c.context===null?c.context=f:c.pendingContext=f,c=Vr(r),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=Lr(s,c,r),o!==null&&(Qn(o,s,r),Sc(o,s,r))}function J1(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<r?o:r}}function tg(s,r){J1(s,r),(s=s.alternate)&&J1(s,r)}function Z1(s){if(s.tag===13||s.tag===31){var r=Ba(s,67108864);r!==null&&Qn(r,s,67108864),tg(s,67108864)}}function eS(s){if(s.tag===13||s.tag===31){var r=cs();r=Ra(r);var o=Ba(s,r);o!==null&&Qn(o,s,r),tg(s,r)}}var yd=!0;function $2(s,r,o,c){var f=U.T;U.T=null;var p=ee.p;try{ee.p=2,ng(s,r,o,c)}finally{ee.p=p,U.T=f}}function G2(s,r,o,c){var f=U.T;U.T=null;var p=ee.p;try{ee.p=8,ng(s,r,o,c)}finally{ee.p=p,U.T=f}}function ng(s,r,o,c){if(yd){var f=sg(c);if(f===null)Fp(s,r,c,vd,o),nS(s,c);else if(Y2(f,s,r,o,c))c.stopPropagation();else if(nS(s,c),r&4&&-1<K2.indexOf(s)){for(;f!==null;){var p=_s(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=Zs(p.pendingLanes);if(w!==0){var C=p;for(C.pendingLanes|=2,C.entangledLanes|=2;w;){var B=1<<31-Ht(w);C.entanglements[1]|=B,w&=~B}vi(p),(lt&6)===0&&(ed=bn()+500,Pc(0))}}break;case 31:case 13:C=Ba(p,2),C!==null&&Qn(C,p,2),nd(),tg(p,2)}if(p=sg(c),p===null&&Fp(s,r,c,vd,o),p===f)break;f=p}f!==null&&c.stopPropagation()}else Fp(s,r,c,null,o)}}function sg(s){return s=Ss(s),ig(s)}var vd=null;function ig(s){if(vd=null,s=ii(s),s!==null){var r=l(s);if(r===null)s=null;else{var o=r.tag;if(o===13){if(s=u(r),s!==null)return s;s=null}else if(o===31){if(s=m(r),s!==null)return s;s=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return vd=s,null}function tS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Aa()){case $l:return 2;case Gl:return 8;case wr:case um:return 32;case Xu:return 268435456;default:return 32}default:return 32}}var rg=!1,Qr=null,Xr=null,Wr=null,qc=new Map,Hc=new Map,Jr=[],K2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nS(s,r){switch(s){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":qc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(r.pointerId)}}function $c(s,r,o,c,f,p){return s===null||s.nativeEvent!==p?(s={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},r!==null&&(r=_s(r),r!==null&&Z1(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),s)}function Y2(s,r,o,c,f){switch(r){case"focusin":return Qr=$c(Qr,s,r,o,c,f),!0;case"dragenter":return Xr=$c(Xr,s,r,o,c,f),!0;case"mouseover":return Wr=$c(Wr,s,r,o,c,f),!0;case"pointerover":var p=f.pointerId;return qc.set(p,$c(qc.get(p)||null,s,r,o,c,f)),!0;case"gotpointercapture":return p=f.pointerId,Hc.set(p,$c(Hc.get(p)||null,s,r,o,c,f)),!0}return!1}function sS(s){var r=ii(s.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){s.blockedOn=r,Vs(s.priority,function(){eS(o)});return}}else if(r===31){if(r=m(o),r!==null){s.blockedOn=r,Vs(s.priority,function(){eS(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function _d(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var o=sg(s.nativeEvent);if(o===null){o=s.nativeEvent;var c=new o.constructor(o.type,o);ic=c,o.target.dispatchEvent(c),ic=null}else return r=_s(o),r!==null&&Z1(r),s.blockedOn=o,!1;r.shift()}return!0}function iS(s,r,o){_d(s)&&o.delete(r)}function Q2(){rg=!1,Qr!==null&&_d(Qr)&&(Qr=null),Xr!==null&&_d(Xr)&&(Xr=null),Wr!==null&&_d(Wr)&&(Wr=null),qc.forEach(iS),Hc.forEach(iS)}function Sd(s,r){s.blockedOn===r&&(s.blockedOn=null,rg||(rg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Q2)))}var bd=null;function rS(s){bd!==s&&(bd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){bd===s&&(bd=null);for(var r=0;r<s.length;r+=3){var o=s[r],c=s[r+1],f=s[r+2];if(typeof c!="function"){if(ig(c||o)===null)continue;break}var p=_s(o);p!==null&&(s.splice(r,3),r-=3,sp(p,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function al(s){function r(B){return Sd(B,s)}Qr!==null&&Sd(Qr,s),Xr!==null&&Sd(Xr,s),Wr!==null&&Sd(Wr,s),qc.forEach(r),Hc.forEach(r);for(var o=0;o<Jr.length;o++){var c=Jr[o];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Jr.length&&(o=Jr[0],o.blockedOn===null);)sS(o),o.blockedOn===null&&Jr.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],p=o[c+1],w=f[mn]||null;if(typeof p=="function")w||rS(o);else if(w){var C=null;if(p&&p.hasAttribute("formAction")){if(f=p,w=p[mn]||null)C=w.formAction;else if(ig(f)!==null)continue}else C=w.action;typeof C=="function"?o[c+1]=C:(o.splice(c,3),c-=3),rS(o)}}}function aS(){function s(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function ag(s){this._internalRoot=s}wd.prototype.render=ag.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=cs();W1(o,c,s,r,null,null)},wd.prototype.unmount=ag.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;W1(s.current,2,null,s,null,null),nd(),r[ni]=null}};function wd(s){this._internalRoot=s}wd.prototype.unstable_scheduleHydration=function(s){if(s){var r=nh();s={blockedOn:null,target:s,priority:r};for(var o=0;o<Jr.length&&r!==0&&r<Jr[o].priority;o++);Jr.splice(o,0,s),o===0&&sS(s)}};var oS=e.version;if(oS!=="19.2.0")throw Error(i(527,oS,"19.2.0"));ee.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=y(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var X2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ed.isDisabled&&Ed.supportsFiber)try{Ms=Ed.inject(X2),wn=Ed}catch{}}return Kc.createRoot=function(s,r){if(!a(s))throw Error(i(299));var o=!1,c="",f=m_,p=p_,w=g_;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=Q1(s,1,!1,null,null,o,c,null,f,p,w,aS),s[ni]=r.current,Bp(s),new ag(r)},Kc.hydrateRoot=function(s,r,o){if(!a(s))throw Error(i(299));var c=!1,f="",p=m_,w=p_,C=g_,B=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.formState!==void 0&&(B=o.formState)),r=Q1(s,1,!0,r,o??null,c,f,B,p,w,C,aS),r.context=X1(null),o=r.current,c=cs(),c=Ra(c),f=Vr(c),f.callback=null,Lr(o,f,c),o=c,r.current.lanes=o,Ca(r,o),vi(r),s[ni]=r.current,Bp(s),new wd(r)},Kc.version="19.2.0",Kc}var vS;function cC(){if(vS)return cg.exports;vS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cg.exports=lC(),cg.exports}var uC=cC();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _S="popstate";function hC(n={}){function e(i,a){let{pathname:l,search:u,hash:m}=i.location;return Pg("",{pathname:l,search:u,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:du(a)}return fC(e,t,null,n)}function Ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ji(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dC(){return Math.random().toString(36).substring(2,10)}function SS(n,e){return{usr:n.state,key:n.key,idx:e}}function Pg(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ol(e):e,state:t,key:e&&e.key||i||dC()}}function du({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ol(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function fC(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,m="POP",g=null,y=v();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function v(){return(u.state||{idx:null}).idx}function b(){m="POP";let L=v(),z=L==null?null:L-y;y=L,g&&g({action:m,location:M.location,delta:z})}function T(L,z){m="PUSH";let H=Pg(M.location,L,z);y=v()+1;let G=SS(H,y),ie=M.createHref(H);try{u.pushState(G,"",ie)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;a.location.assign(ie)}l&&g&&g({action:m,location:M.location,delta:1})}function N(L,z){m="REPLACE";let H=Pg(M.location,L,z);y=v();let G=SS(H,y),ie=M.createHref(H);u.replaceState(G,"",ie),l&&g&&g({action:m,location:M.location,delta:0})}function P(L){return mC(L)}let M={get action(){return m},get location(){return n(a,u)},listen(L){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(_S,b),g=L,()=>{a.removeEventListener(_S,b),g=null}},createHref(L){return e(a,L)},createURL:P,encodeLocation(L){let z=P(L);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:T,replace:N,go(L){return u.go(L)}};return M}function mC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ot(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:du(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function jw(n,e,t="/"){return pC(n,e,t,!1)}function pC(n,e,t,i){let a=typeof e=="string"?Ol(e):e,l=dr(a.pathname||"/",t);if(l==null)return null;let u=kw(n);gC(u);let m=null;for(let g=0;m==null&&g<u.length;++g){let y=CC(l);m=AC(u[g],y,i)}return m}function kw(n,e=[],t=[],i="",a=!1){let l=(u,m,g=a,y)=>{let v={relativePath:y===void 0?u.path||"":y,caseSensitive:u.caseSensitive===!0,childrenIndex:m,route:u};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(i)&&g)return;Ot(v.relativePath.startsWith(i),`Absolute route path "${v.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(i.length)}let b=cr([i,v.relativePath]),T=t.concat(v);u.children&&u.children.length>0&&(Ot(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),kw(u.children,e,T,b,g)),!(u.path==null&&!u.index)&&e.push({path:b,score:EC(b,u.index),routesMeta:T})};return n.forEach((u,m)=>{if(u.path===""||!u.path?.includes("?"))l(u,m);else for(let g of Ow(u.path))l(u,m,!0,g)}),e}function Ow(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=Ow(i.join("/")),m=[];return m.push(...u.map(g=>g===""?l:[l,g].join("/"))),a&&m.push(...u),m.map(g=>n.startsWith("/")&&g===""?"/":g)}function gC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:TC(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var yC=/^:[\w-]+$/,vC=3,_C=2,SC=1,bC=10,wC=-2,bS=n=>n==="*";function EC(n,e){let t=n.split("/"),i=t.length;return t.some(bS)&&(i+=wC),e&&(i+=_C),t.filter(a=>!bS(a)).reduce((a,l)=>a+(yC.test(l)?vC:l===""?SC:bC),i)}function TC(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function AC(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",u=[];for(let m=0;m<i.length;++m){let g=i[m],y=m===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",b=Xd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),T=g.route;if(!b&&y&&t&&!i[i.length-1].route.index&&(b=Xd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!b)return null;Object.assign(a,b.params),u.push({params:a,pathname:cr([l,b.pathname]),pathnameBase:DC(cr([l,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(l=cr([l,b.pathnameBase]))}return u}function Xd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=xC(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:i.reduce((y,{paramName:v,isOptional:b},T)=>{if(v==="*"){let P=m[T]||"";u=l.slice(0,l.length-P.length).replace(/(.)\/+$/,"$1")}const N=m[T];return b&&!N?y[v]=void 0:y[v]=(N||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:u,pattern:n}}function xC(n,e=!1,t=!0){ji(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,m,g)=>(i.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function CC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ji(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function dr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function NC(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Ol(n):n;return{pathname:t?t.startsWith("/")?t:RC(t,e):e,search:jC(i),hash:kC(a)}}function RC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function fg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Mw(n){let e=IC(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Pw(n,e,t,i=!1){let a;typeof n=="string"?a=Ol(n):(a={...n},Ot(!a.pathname||!a.pathname.includes("?"),fg("?","pathname","search",a)),Ot(!a.pathname||!a.pathname.includes("#"),fg("#","pathname","hash",a)),Ot(!a.search||!a.search.includes("#"),fg("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,m;if(u==null)m=t;else{let b=e.length-1;if(!i&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),b-=1;a.pathname=T.join("/")}m=b>=0?e[b]:"/"}let g=NC(a,m),y=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}var cr=n=>n.join("/").replace(/\/\/+/g,"/"),DC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),jC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function OC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Vw=["POST","PUT","PATCH","DELETE"];new Set(Vw);var MC=["GET",...Vw];new Set(MC);var Ml=k.createContext(null);Ml.displayName="DataRouter";var bf=k.createContext(null);bf.displayName="DataRouterState";k.createContext(!1);var Lw=k.createContext({isTransitioning:!1});Lw.displayName="ViewTransition";var PC=k.createContext(new Map);PC.displayName="Fetchers";var VC=k.createContext(null);VC.displayName="Await";var Mi=k.createContext(null);Mi.displayName="Navigation";var Nu=k.createContext(null);Nu.displayName="Location";var _r=k.createContext({outlet:null,matches:[],isDataRoute:!1});_r.displayName="Route";var Ty=k.createContext(null);Ty.displayName="RouteError";function LC(n,{relative:e}={}){Ot(Ru(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=k.useContext(Mi),{hash:a,pathname:l,search:u}=Iu(n,{relative:e}),m=l;return t!=="/"&&(m=l==="/"?t:cr([t,l])),i.createHref({pathname:m,search:u,hash:a})}function Ru(){return k.useContext(Nu)!=null}function Pi(){return Ot(Ru(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Nu).location}var Uw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zw(n){k.useContext(Mi).static||k.useLayoutEffect(n)}function es(){let{isDataRoute:n}=k.useContext(_r);return n?WC():UC()}function UC(){Ot(Ru(),"useNavigate() may be used only in the context of a <Router> component.");let n=k.useContext(Ml),{basename:e,navigator:t}=k.useContext(Mi),{matches:i}=k.useContext(_r),{pathname:a}=Pi(),l=JSON.stringify(Mw(i)),u=k.useRef(!1);return zw(()=>{u.current=!0}),k.useCallback((g,y={})=>{if(ji(u.current,Uw),!u.current)return;if(typeof g=="number"){t.go(g);return}let v=Pw(g,JSON.parse(l),a,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:cr([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,l,a,n])}k.createContext(null);function Iu(n,{relative:e}={}){let{matches:t}=k.useContext(_r),{pathname:i}=Pi(),a=JSON.stringify(Mw(t));return k.useMemo(()=>Pw(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function zC(n,e){return Bw(n,e)}function Bw(n,e,t,i,a){Ot(Ru(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=k.useContext(Mi),{matches:u}=k.useContext(_r),m=u[u.length-1],g=m?m.params:{},y=m?m.pathname:"/",v=m?m.pathnameBase:"/",b=m&&m.route;{let H=b&&b.path||"";Fw(y,!b||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let T=Pi(),N;if(e){let H=typeof e=="string"?Ol(e):e;Ot(v==="/"||H.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${H.pathname}" was given in the \`location\` prop.`),N=H}else N=T;let P=N.pathname||"/",M=P;if(v!=="/"){let H=v.replace(/^\//,"").split("/");M="/"+P.replace(/^\//,"").split("/").slice(H.length).join("/")}let L=jw(n,{pathname:M});ji(b||L!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),ji(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=$C(L&&L.map(H=>Object.assign({},H,{params:Object.assign({},g,H.params),pathname:cr([v,l.encodeLocation?l.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?v:cr([v,l.encodeLocation?l.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),u,t,i,a);return e&&z?k.createElement(Nu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},z):z}function BC(){let n=XC(),e=OC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:l},"ErrorBoundary")," or"," ",k.createElement("code",{style:l},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:a},t):null,u)}var FC=k.createElement(BC,null),qC=class extends k.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?k.createElement(_r.Provider,{value:this.props.routeContext},k.createElement(Ty.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HC({routeContext:n,match:e,children:t}){let i=k.useContext(Ml);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(_r.Provider,{value:n},t)}function $C(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,u=t?.errors;if(u!=null){let y=l.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);Ot(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let m=!1,g=-1;if(t)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=y),v.route.id){let{loaderData:b,errors:T}=t,N=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!T||T[v.route.id]===void 0);if(v.route.lazy||N){m=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}return l.reduceRight((y,v,b)=>{let T,N=!1,P=null,M=null;t&&(T=u&&v.route.id?u[v.route.id]:void 0,P=v.route.errorElement||FC,m&&(g<0&&b===0?(Fw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,M=null):g===b&&(N=!0,M=v.route.hydrateFallbackElement||null)));let L=e.concat(l.slice(0,b+1)),z=()=>{let H;return T?H=P:N?H=M:v.route.Component?H=k.createElement(v.route.Component,null):v.route.element?H=v.route.element:H=y,k.createElement(HC,{match:v,routeContext:{outlet:y,matches:L,isDataRoute:t!=null},children:H})};return t&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?k.createElement(qC,{location:t.location,revalidation:t.revalidation,component:P,error:T,children:z(),routeContext:{outlet:null,matches:L,isDataRoute:!0},unstable_onError:i}):z()},null)}function Ay(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GC(n){let e=k.useContext(Ml);return Ot(e,Ay(n)),e}function KC(n){let e=k.useContext(bf);return Ot(e,Ay(n)),e}function YC(n){let e=k.useContext(_r);return Ot(e,Ay(n)),e}function xy(n){let e=YC(n),t=e.matches[e.matches.length-1];return Ot(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function QC(){return xy("useRouteId")}function XC(){let n=k.useContext(Ty),e=KC("useRouteError"),t=xy("useRouteError");return n!==void 0?n:e.errors?.[t]}function WC(){let{router:n}=GC("useNavigate"),e=xy("useNavigate"),t=k.useRef(!1);return zw(()=>{t.current=!0}),k.useCallback(async(a,l={})=>{ji(t.current,Uw),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var wS={};function Fw(n,e,t){!e&&!wS[n]&&(wS[n]=!0,ji(!1,t))}k.memo(JC);function JC({routes:n,future:e,state:t,unstable_onError:i}){return Bw(n,void 0,t,i,e)}function dn(n){Ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZC({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){Ot(!Ru(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),m=k.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof t=="string"&&(t=Ol(t));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:T="default"}=t,N=k.useMemo(()=>{let P=dr(g,u);return P==null?null:{location:{pathname:P,search:y,hash:v,state:b,key:T},navigationType:i}},[u,g,y,v,b,T,i]);return ji(N!=null,`<Router basename="${u}"> is not able to match the URL "${g}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:k.createElement(Mi.Provider,{value:m},k.createElement(Nu.Provider,{children:e,value:N}))}function Cy({children:n,location:e}){return zC(Vg(n),e)}function Vg(n,e=[]){let t=[];return k.Children.forEach(n,(i,a)=>{if(!k.isValidElement(i))return;let l=[...e,a];if(i.type===k.Fragment){t.push.apply(t,Vg(i.props.children,l));return}Ot(i.type===dn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ot(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Vg(i.props.children,l)),t.push(u)}),t}var Md="get",Pd="application/x-www-form-urlencoded";function wf(n){return n!=null&&typeof n.tagName=="string"}function eN(n){return wf(n)&&n.tagName.toLowerCase()==="button"}function tN(n){return wf(n)&&n.tagName.toLowerCase()==="form"}function nN(n){return wf(n)&&n.tagName.toLowerCase()==="input"}function sN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iN(n,e){return n.button===0&&(!e||e==="_self")&&!sN(n)}var Td=null;function rN(){if(Td===null)try{new FormData(document.createElement("form"),0),Td=!1}catch{Td=!0}return Td}var aN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mg(n){return n!=null&&!aN.has(n)?(ji(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pd}"`),null):n}function oN(n,e){let t,i,a,l,u;if(tN(n)){let m=n.getAttribute("action");i=m?dr(m,e):null,t=n.getAttribute("method")||Md,a=mg(n.getAttribute("enctype"))||Pd,l=new FormData(n)}else if(eN(n)||nN(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=n.getAttribute("formaction")||m.getAttribute("action");if(i=g?dr(g,e):null,t=n.getAttribute("formmethod")||m.getAttribute("method")||Md,a=mg(n.getAttribute("formenctype"))||mg(m.getAttribute("enctype"))||Pd,l=new FormData(m,n),!rN()){let{name:y,type:v,value:b}=n;if(v==="image"){let T=y?`${y}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else y&&l.append(y,b)}}else{if(wf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Md,i=null,a=Pd,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ny(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lN(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&dr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function cN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function hN(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await cN(l,t);return u.links?u.links():[]}return[]}));return pN(i.flat(1).filter(uN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function ES(n,e,t,i,a,l){let u=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,m=(g,y)=>t[y].pathname!==g.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==g.params["*"];return l==="assets"?e.filter((g,y)=>u(g,y)||m(g,y)):l==="data"?e.filter((g,y)=>{let v=i.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(u(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let b=g.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function dN(n,e,{includeHydrateFallback:t}={}){return fN(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function fN(n){return[...new Set(n)]}function mN(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function pN(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(mN(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function qw(){let n=k.useContext(Ml);return Ny(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function gN(){let n=k.useContext(bf);return Ny(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ry=k.createContext(void 0);Ry.displayName="FrameworkContext";function Hw(){let n=k.useContext(Ry);return Ny(n,"You must render this element inside a <HydratedRouter> element"),n}function yN(n,e){let t=k.useContext(Ry),[i,a]=k.useState(!1),[l,u]=k.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:v,onTouchStart:b}=e,T=k.useRef(null);k.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let M=z=>{z.forEach(H=>{u(H.isIntersecting)})},L=new IntersectionObserver(M,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[n]),k.useEffect(()=>{if(i){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[i]);let N=()=>{a(!0)},P=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,T,{}]:[l,T,{onFocus:Yc(m,N),onBlur:Yc(g,P),onMouseEnter:Yc(y,N),onMouseLeave:Yc(v,P),onTouchStart:Yc(b,N)}]:[!1,T,{}]}function Yc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function vN({page:n,...e}){let{router:t}=qw(),i=k.useMemo(()=>jw(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?k.createElement(SN,{page:n,matches:i,...e}):null}function _N(n){let{manifest:e,routeModules:t}=Hw(),[i,a]=k.useState([]);return k.useEffect(()=>{let l=!1;return hN(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),i}function SN({page:n,matches:e,...t}){let i=Pi(),{manifest:a,routeModules:l}=Hw(),{basename:u}=qw(),{loaderData:m,matches:g}=gN(),y=k.useMemo(()=>ES(n,e,g,a,i,"data"),[n,e,g,a,i]),v=k.useMemo(()=>ES(n,e,g,a,i,"assets"),[n,e,g,a,i]),b=k.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let P=new Set,M=!1;if(e.forEach(z=>{let H=a.routes[z.route.id];!H||!H.hasLoader||(!y.some(G=>G.route.id===z.route.id)&&z.route.id in m&&l[z.route.id]?.shouldRevalidate||H.hasClientLoader?M=!0:P.add(z.route.id))}),P.size===0)return[];let L=lN(n,u,"data");return M&&P.size>0&&L.searchParams.set("_routes",e.filter(z=>P.has(z.route.id)).map(z=>z.route.id).join(",")),[L.pathname+L.search]},[u,m,i,a,y,e,n,l]),T=k.useMemo(()=>dN(v,a),[v,a]),N=_N(v);return k.createElement(k.Fragment,null,b.map(P=>k.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...t})),T.map(P=>k.createElement("link",{key:P,rel:"modulepreload",href:P,...t})),N.map(({key:P,link:M})=>k.createElement("link",{key:P,nonce:t.nonce,...M})))}function bN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var $w=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$w&&(window.__reactRouterVersion="7.9.4")}catch{}function wN({basename:n,children:e,window:t}){let i=k.useRef();i.current==null&&(i.current=hC({window:t,v5Compat:!0}));let a=i.current,[l,u]=k.useState({action:a.action,location:a.location}),m=k.useCallback(g=>{k.startTransition(()=>u(g))},[u]);return k.useLayoutEffect(()=>a.listen(m),[a,m]),k.createElement(ZC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var Gw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kw=k.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:m,target:g,to:y,preventScrollReset:v,viewTransition:b,...T},N){let{basename:P}=k.useContext(Mi),M=typeof y=="string"&&Gw.test(y),L,z=!1;if(typeof y=="string"&&M&&(L=y,$w))try{let A=new URL(window.location.href),R=y.startsWith("//")?new URL(A.protocol+y):new URL(y),O=dr(R.pathname,P);R.origin===A.origin&&O!=null?y=O+R.search+R.hash:z=!0}catch{ji(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=LC(y,{relative:a}),[G,ie,re]=yN(i,T),ae=xN(y,{replace:u,state:m,target:g,preventScrollReset:v,relative:a,viewTransition:b});function j(A){e&&e(A),A.defaultPrevented||ae(A)}let I=k.createElement("a",{...T,...re,href:L||H,onClick:z||l?e:j,ref:bN(N,ie),target:g,"data-discover":!M&&t==="render"?"true":void 0});return G&&!M?k.createElement(k.Fragment,null,I,k.createElement(vN,{page:H})):I});Kw.displayName="Link";var EN=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:m,children:g,...y},v){let b=Iu(u,{relative:y.relative}),T=Pi(),N=k.useContext(bf),{navigator:P,basename:M}=k.useContext(Mi),L=N!=null&&DN(b)&&m===!0,z=P.encodeLocation?P.encodeLocation(b).pathname:b.pathname,H=T.pathname,G=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(H=H.toLowerCase(),G=G?G.toLowerCase():null,z=z.toLowerCase()),G&&M&&(G=dr(G,M)||G);const ie=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let re=H===z||!a&&H.startsWith(z)&&H.charAt(ie)==="/",ae=G!=null&&(G===z||!a&&G.startsWith(z)&&G.charAt(z.length)==="/"),j={isActive:re,isPending:ae,isTransitioning:L},I=re?e:void 0,A;typeof i=="function"?A=i(j):A=[i,re?"active":null,ae?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let R=typeof l=="function"?l(j):l;return k.createElement(Kw,{...y,"aria-current":I,className:A,ref:v,style:R,to:u,viewTransition:m},typeof g=="function"?g(j):g)});EN.displayName="NavLink";var TN=k.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:u=Md,action:m,onSubmit:g,relative:y,preventScrollReset:v,viewTransition:b,...T},N)=>{let P=RN(),M=IN(m,{relative:y}),L=u.toLowerCase()==="get"?"get":"post",z=typeof m=="string"&&Gw.test(m),H=G=>{if(g&&g(G),G.defaultPrevented)return;G.preventDefault();let ie=G.nativeEvent.submitter,re=ie?.getAttribute("formmethod")||u;P(ie||G.currentTarget,{fetcherKey:e,method:re,navigate:t,replace:a,state:l,relative:y,preventScrollReset:v,viewTransition:b})};return k.createElement("form",{ref:N,method:L,action:M,onSubmit:i?g:H,...T,"data-discover":!z&&n==="render"?"true":void 0})});TN.displayName="Form";function AN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yw(n){let e=k.useContext(Ml);return Ot(e,AN(n)),e}function xN(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:u}={}){let m=es(),g=Pi(),y=Iu(n,{relative:l});return k.useCallback(v=>{if(iN(v,e)){v.preventDefault();let b=t!==void 0?t:du(g)===du(y);m(n,{replace:b,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[g,m,y,t,i,e,n,a,l,u])}var CN=0,NN=()=>`__${String(++CN)}__`;function RN(){let{router:n}=Yw("useSubmit"),{basename:e}=k.useContext(Mi),t=QC();return k.useCallback(async(i,a={})=>{let{action:l,method:u,encType:m,formData:g,body:y}=oN(i,e);if(a.navigate===!1){let v=a.fetcherKey||NN();await n.fetch(v,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:g,body:y,formMethod:a.method||u,formEncType:a.encType||m,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:g,body:y,formMethod:a.method||u,formEncType:a.encType||m,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function IN(n,{relative:e}={}){let{basename:t}=k.useContext(Mi),i=k.useContext(_r);Ot(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Iu(n||".",{relative:e})},u=Pi();if(n==null){l.search=u.search;let m=new URLSearchParams(l.search),g=m.getAll("index");if(g.some(v=>v==="")){m.delete("index"),g.filter(b=>b).forEach(b=>m.append("index",b));let v=m.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:cr([t,l.pathname])),du(l)}function DN(n,{relative:e}={}){let t=k.useContext(Lw);Ot(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Yw("useViewTransitionState"),a=Iu(n,{relative:e});if(!t.isTransitioning)return!1;let l=dr(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=dr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Xd(a.pathname,u)!=null||Xd(a.pathname,l)!=null}const jN=()=>{};var TS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},kN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],m=n[t++],g=((a&7)<<18|(l&63)<<12|(u&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Xw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,m=u?n[a+1]:0,g=a+2<n.length,y=g?n[a+2]:0,v=l>>2,b=(l&3)<<4|m>>4;let T=(m&15)<<2|y>>6,N=y&63;g||(N=64,u||(T=64)),i.push(t[v],t[b],t[T],t[N])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Qw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],m=a<n.length?t[n.charAt(a)]:0;++a;const y=a<n.length?t[n.charAt(a)]:64;++a;const b=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||m==null||y==null||b==null)throw new ON;const T=l<<2|m>>4;if(i.push(T),y!==64){const N=m<<4&240|y>>2;if(i.push(N),b!==64){const P=y<<6&192|b;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ON extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MN=function(n){const e=Qw(n);return Xw.encodeByteArray(e,!0)},Wd=function(n){return MN(n).replace(/\./g,"")},Ww=function(n){try{return Xw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=()=>PN().__FIREBASE_DEFAULTS__,LN=()=>{if(typeof process>"u"||typeof TS>"u")return;const n=TS.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},UN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ww(n[1]);return e&&JSON.parse(e)},Ef=()=>{try{return jN()||VN()||LN()||UN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Jw=n=>Ef()?.emulatorHosts?.[n],Zw=n=>{const e=Jw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},eE=()=>Ef()?.config,tE=n=>Ef()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Iy(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Wd(JSON.stringify(t)),Wd(JSON.stringify(u)),""].join(".")}const su={};function BN(){const n={prod:[],emulator:[]};for(const e of Object.keys(su))su[e]?n.emulator.push(e):n.prod.push(e);return n}function FN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let AS=!1;function Dy(n,e){if(typeof window>"u"||typeof document>"u"||!wa(window.location.host)||su[n]===e||su[n]||AS)return;su[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",l=BN().prod.length>0;function u(){const T=document.getElementById(i);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,N){T.setAttribute("width","24"),T.setAttribute("id",N),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{AS=!0,u()},T}function v(T,N){T.setAttribute("id",N),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=FN(i),N=t("text"),P=document.getElementById(N)||document.createElement("span"),M=t("learnmore"),L=document.getElementById(M)||document.createElement("a"),z=t("preprendIcon"),H=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;m(G),v(L,M);const ie=y();g(H,z),G.append(H,P,L,ie),document.body.appendChild(G)}l?(P.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function HN(){const n=Ef()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $N(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function KN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YN(){const n=Ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function QN(){return!HN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XN(){try{return typeof indexedDB=="object"}catch{return!1}}function WN(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="FirebaseError";class Vi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=JN,Object.setPrototypeOf(this,Vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Du.prototype.create)}}class Du{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?ZN(l,i):"Error",m=`${this.serviceName}: ${u} (${a}).`;return new Vi(a,m,i)}}function ZN(n,e){return n.replace(eR,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const eR=/\{\$([^}]+)}/g;function tR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function lo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],u=e[a];if(xS(l)&&xS(u)){if(!lo(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function xS(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nR(n,e){const t=new sR(n,e);return t.subscribe.bind(t)}class sR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");iR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=pg),a.error===void 0&&(a.error=pg),a.complete===void 0&&(a.complete=pg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(n){return n&&n._delegate?n._delegate:n}class ma{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new zN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oR(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&u.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:aR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aR(n){return n===no?void 0:n}function oR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ze||(Ze={}));const cR={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},uR=Ze.INFO,hR={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},dR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=hR[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jy{constructor(e){this.name=e,this._logLevel=uR,this._logHandler=dR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const fR=(n,e)=>e.some(t=>n instanceof t);let CS,NS;function mR(){return CS||(CS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pR(){return NS||(NS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sE=new WeakMap,Lg=new WeakMap,iE=new WeakMap,gg=new WeakMap,ky=new WeakMap;function gR(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(la(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&sE.set(t,n)}).catch(()=>{}),ky.set(e,n),e}function yR(n){if(Lg.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Lg.set(n,e)}let Ug={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Lg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||iE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return la(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function vR(n){Ug=n(Ug)}function _R(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(yg(this),e,...t);return iE.set(i,e.sort?e.sort():[e]),la(i)}:pR().includes(n)?function(...e){return n.apply(yg(this),e),la(sE.get(this))}:function(...e){return la(n.apply(yg(this),e))}}function SR(n){return typeof n=="function"?_R(n):(n instanceof IDBTransaction&&yR(n),fR(n,mR())?new Proxy(n,Ug):n)}function la(n){if(n instanceof IDBRequest)return gR(n);if(gg.has(n))return gg.get(n);const e=SR(n);return e!==n&&(gg.set(n,e),ky.set(e,n)),e}const yg=n=>ky.get(n);function bR(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),m=la(u);return i&&u.addEventListener("upgradeneeded",g=>{i(la(u.result),g.oldVersion,g.newVersion,la(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const wR=["get","getKey","getAll","getAllKeys","count"],ER=["put","add","delete","clear"],vg=new Map;function RS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vg.get(e))return vg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=ER.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||wR.includes(t)))return;const l=async function(u,...m){const g=this.transaction(u,a?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),a&&g.done]))[0]};return vg.set(e,l),l}vR(n=>({...n,get:(e,t,i)=>RS(e,t)||n.get(e,t,i),has:(e,t)=>!!RS(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(AR(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function AR(n){return n.getComponent()?.type==="VERSION"}const zg="@firebase/app",IS="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new jy("@firebase/app"),xR="@firebase/app-compat",CR="@firebase/analytics-compat",NR="@firebase/analytics",RR="@firebase/app-check-compat",IR="@firebase/app-check",DR="@firebase/auth",jR="@firebase/auth-compat",kR="@firebase/database",OR="@firebase/data-connect",MR="@firebase/database-compat",PR="@firebase/functions",VR="@firebase/functions-compat",LR="@firebase/installations",UR="@firebase/installations-compat",zR="@firebase/messaging",BR="@firebase/messaging-compat",FR="@firebase/performance",qR="@firebase/performance-compat",HR="@firebase/remote-config",$R="@firebase/remote-config-compat",GR="@firebase/storage",KR="@firebase/storage-compat",YR="@firebase/firestore",QR="@firebase/ai",XR="@firebase/firestore-compat",WR="firebase",JR="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="[DEFAULT]",ZR={[zg]:"fire-core",[xR]:"fire-core-compat",[NR]:"fire-analytics",[CR]:"fire-analytics-compat",[IR]:"fire-app-check",[RR]:"fire-app-check-compat",[DR]:"fire-auth",[jR]:"fire-auth-compat",[kR]:"fire-rtdb",[OR]:"fire-data-connect",[MR]:"fire-rtdb-compat",[PR]:"fire-fn",[VR]:"fire-fn-compat",[LR]:"fire-iid",[UR]:"fire-iid-compat",[zR]:"fire-fcm",[BR]:"fire-fcm-compat",[FR]:"fire-perf",[qR]:"fire-perf-compat",[HR]:"fire-rc",[$R]:"fire-rc-compat",[GR]:"fire-gcs",[KR]:"fire-gcs-compat",[YR]:"fire-fst",[XR]:"fire-fst-compat",[QR]:"fire-vertex","fire-js":"fire-js",[WR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=new Map,eI=new Map,Fg=new Map;function DS(n,e){try{n.container.addComponent(e)}catch(t){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function co(n){const e=n.name;if(Fg.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;Fg.set(e,n);for(const t of Jd.values())DS(t,n);for(const t of eI.values())DS(t,n);return!0}function Tf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ks(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ca=new Du("app","Firebase",tI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ca.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=JR;function rE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Bg,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw ca.create("bad-app-name",{appName:String(a)});if(t||(t=eE()),!t)throw ca.create("no-options");const l=Jd.get(a);if(l){if(lo(t,l.options)&&lo(i,l.config))return l;throw ca.create("duplicate-app",{appName:a})}const u=new lR(a);for(const g of Fg.values())u.addComponent(g);const m=new nI(t,i,u);return Jd.set(a,m),m}function Oy(n=Bg){const e=Jd.get(n);if(!e&&n===Bg&&eE())return rE();if(!e)throw ca.create("no-app",{appName:n});return e}function xi(n,e,t){let i=ZR[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(u.join(" "));return}co(new ma(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="firebase-heartbeat-database",iI=1,fu="firebase-heartbeat-store";let _g=null;function aE(){return _g||(_g=bR(sI,iI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ca.create("idb-open",{originalErrorMessage:n.message})})),_g}async function rI(n){try{const t=(await aE()).transaction(fu),i=await t.objectStore(fu).get(oE(n));return await t.done,i}catch(e){if(e instanceof Vi)fr.warn(e.message);else{const t=ca.create("idb-get",{originalErrorMessage:e?.message});fr.warn(t.message)}}}async function jS(n,e){try{const i=(await aE()).transaction(fu,"readwrite");await i.objectStore(fu).put(e,oE(n)),await i.done}catch(t){if(t instanceof Vi)fr.warn(t.message);else{const i=ca.create("idb-set",{originalErrorMessage:t?.message});fr.warn(i.message)}}}function oE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=1024,oI=30;class lI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=kS();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>oI){const a=hI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=kS(),{heartbeatsToSend:t,unsentEntries:i}=cI(this._heartbeatsCache.heartbeats),a=Wd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return fr.warn(e),""}}}function kS(){return new Date().toISOString().substring(0,10)}function cI(n,e=aI){const t=[];let i=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),OS(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),OS(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class uI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XN()?WN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return jS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return jS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function OS(n){return Wd(JSON.stringify({version:2,heartbeats:n})).length}function hI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(n){co(new ma("platform-logger",e=>new TR(e),"PRIVATE")),co(new ma("heartbeat",e=>new lI(e),"PRIVATE")),xi(zg,IS,n),xi(zg,IS,"esm2020"),xi("fire-js","")}dI("");var MS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ua,lE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,I){function A(){}A.prototype=I.prototype,j.F=I.prototype,j.prototype=new A,j.prototype.constructor=j,j.D=function(R,O,S){for(var x=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)x[Q-2]=arguments[Q];return I.prototype[O].apply(R,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(j,I,A){A||(A=0);const R=Array(16);if(typeof I=="string")for(var O=0;O<16;++O)R[O]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(O=0;O<16;++O)R[O]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=j.g[0],A=j.g[1],O=j.g[2];let S=j.g[3],x;x=I+(S^A&(O^S))+R[0]+3614090360&4294967295,I=A+(x<<7&4294967295|x>>>25),x=S+(O^I&(A^O))+R[1]+3905402710&4294967295,S=I+(x<<12&4294967295|x>>>20),x=O+(A^S&(I^A))+R[2]+606105819&4294967295,O=S+(x<<17&4294967295|x>>>15),x=A+(I^O&(S^I))+R[3]+3250441966&4294967295,A=O+(x<<22&4294967295|x>>>10),x=I+(S^A&(O^S))+R[4]+4118548399&4294967295,I=A+(x<<7&4294967295|x>>>25),x=S+(O^I&(A^O))+R[5]+1200080426&4294967295,S=I+(x<<12&4294967295|x>>>20),x=O+(A^S&(I^A))+R[6]+2821735955&4294967295,O=S+(x<<17&4294967295|x>>>15),x=A+(I^O&(S^I))+R[7]+4249261313&4294967295,A=O+(x<<22&4294967295|x>>>10),x=I+(S^A&(O^S))+R[8]+1770035416&4294967295,I=A+(x<<7&4294967295|x>>>25),x=S+(O^I&(A^O))+R[9]+2336552879&4294967295,S=I+(x<<12&4294967295|x>>>20),x=O+(A^S&(I^A))+R[10]+4294925233&4294967295,O=S+(x<<17&4294967295|x>>>15),x=A+(I^O&(S^I))+R[11]+2304563134&4294967295,A=O+(x<<22&4294967295|x>>>10),x=I+(S^A&(O^S))+R[12]+1804603682&4294967295,I=A+(x<<7&4294967295|x>>>25),x=S+(O^I&(A^O))+R[13]+4254626195&4294967295,S=I+(x<<12&4294967295|x>>>20),x=O+(A^S&(I^A))+R[14]+2792965006&4294967295,O=S+(x<<17&4294967295|x>>>15),x=A+(I^O&(S^I))+R[15]+1236535329&4294967295,A=O+(x<<22&4294967295|x>>>10),x=I+(O^S&(A^O))+R[1]+4129170786&4294967295,I=A+(x<<5&4294967295|x>>>27),x=S+(A^O&(I^A))+R[6]+3225465664&4294967295,S=I+(x<<9&4294967295|x>>>23),x=O+(I^A&(S^I))+R[11]+643717713&4294967295,O=S+(x<<14&4294967295|x>>>18),x=A+(S^I&(O^S))+R[0]+3921069994&4294967295,A=O+(x<<20&4294967295|x>>>12),x=I+(O^S&(A^O))+R[5]+3593408605&4294967295,I=A+(x<<5&4294967295|x>>>27),x=S+(A^O&(I^A))+R[10]+38016083&4294967295,S=I+(x<<9&4294967295|x>>>23),x=O+(I^A&(S^I))+R[15]+3634488961&4294967295,O=S+(x<<14&4294967295|x>>>18),x=A+(S^I&(O^S))+R[4]+3889429448&4294967295,A=O+(x<<20&4294967295|x>>>12),x=I+(O^S&(A^O))+R[9]+568446438&4294967295,I=A+(x<<5&4294967295|x>>>27),x=S+(A^O&(I^A))+R[14]+3275163606&4294967295,S=I+(x<<9&4294967295|x>>>23),x=O+(I^A&(S^I))+R[3]+4107603335&4294967295,O=S+(x<<14&4294967295|x>>>18),x=A+(S^I&(O^S))+R[8]+1163531501&4294967295,A=O+(x<<20&4294967295|x>>>12),x=I+(O^S&(A^O))+R[13]+2850285829&4294967295,I=A+(x<<5&4294967295|x>>>27),x=S+(A^O&(I^A))+R[2]+4243563512&4294967295,S=I+(x<<9&4294967295|x>>>23),x=O+(I^A&(S^I))+R[7]+1735328473&4294967295,O=S+(x<<14&4294967295|x>>>18),x=A+(S^I&(O^S))+R[12]+2368359562&4294967295,A=O+(x<<20&4294967295|x>>>12),x=I+(A^O^S)+R[5]+4294588738&4294967295,I=A+(x<<4&4294967295|x>>>28),x=S+(I^A^O)+R[8]+2272392833&4294967295,S=I+(x<<11&4294967295|x>>>21),x=O+(S^I^A)+R[11]+1839030562&4294967295,O=S+(x<<16&4294967295|x>>>16),x=A+(O^S^I)+R[14]+4259657740&4294967295,A=O+(x<<23&4294967295|x>>>9),x=I+(A^O^S)+R[1]+2763975236&4294967295,I=A+(x<<4&4294967295|x>>>28),x=S+(I^A^O)+R[4]+1272893353&4294967295,S=I+(x<<11&4294967295|x>>>21),x=O+(S^I^A)+R[7]+4139469664&4294967295,O=S+(x<<16&4294967295|x>>>16),x=A+(O^S^I)+R[10]+3200236656&4294967295,A=O+(x<<23&4294967295|x>>>9),x=I+(A^O^S)+R[13]+681279174&4294967295,I=A+(x<<4&4294967295|x>>>28),x=S+(I^A^O)+R[0]+3936430074&4294967295,S=I+(x<<11&4294967295|x>>>21),x=O+(S^I^A)+R[3]+3572445317&4294967295,O=S+(x<<16&4294967295|x>>>16),x=A+(O^S^I)+R[6]+76029189&4294967295,A=O+(x<<23&4294967295|x>>>9),x=I+(A^O^S)+R[9]+3654602809&4294967295,I=A+(x<<4&4294967295|x>>>28),x=S+(I^A^O)+R[12]+3873151461&4294967295,S=I+(x<<11&4294967295|x>>>21),x=O+(S^I^A)+R[15]+530742520&4294967295,O=S+(x<<16&4294967295|x>>>16),x=A+(O^S^I)+R[2]+3299628645&4294967295,A=O+(x<<23&4294967295|x>>>9),x=I+(O^(A|~S))+R[0]+4096336452&4294967295,I=A+(x<<6&4294967295|x>>>26),x=S+(A^(I|~O))+R[7]+1126891415&4294967295,S=I+(x<<10&4294967295|x>>>22),x=O+(I^(S|~A))+R[14]+2878612391&4294967295,O=S+(x<<15&4294967295|x>>>17),x=A+(S^(O|~I))+R[5]+4237533241&4294967295,A=O+(x<<21&4294967295|x>>>11),x=I+(O^(A|~S))+R[12]+1700485571&4294967295,I=A+(x<<6&4294967295|x>>>26),x=S+(A^(I|~O))+R[3]+2399980690&4294967295,S=I+(x<<10&4294967295|x>>>22),x=O+(I^(S|~A))+R[10]+4293915773&4294967295,O=S+(x<<15&4294967295|x>>>17),x=A+(S^(O|~I))+R[1]+2240044497&4294967295,A=O+(x<<21&4294967295|x>>>11),x=I+(O^(A|~S))+R[8]+1873313359&4294967295,I=A+(x<<6&4294967295|x>>>26),x=S+(A^(I|~O))+R[15]+4264355552&4294967295,S=I+(x<<10&4294967295|x>>>22),x=O+(I^(S|~A))+R[6]+2734768916&4294967295,O=S+(x<<15&4294967295|x>>>17),x=A+(S^(O|~I))+R[13]+1309151649&4294967295,A=O+(x<<21&4294967295|x>>>11),x=I+(O^(A|~S))+R[4]+4149444226&4294967295,I=A+(x<<6&4294967295|x>>>26),x=S+(A^(I|~O))+R[11]+3174756917&4294967295,S=I+(x<<10&4294967295|x>>>22),x=O+(I^(S|~A))+R[2]+718787259&4294967295,O=S+(x<<15&4294967295|x>>>17),x=A+(S^(O|~I))+R[9]+3951481745&4294967295,j.g[0]=j.g[0]+I&4294967295,j.g[1]=j.g[1]+(O+(x<<21&4294967295|x>>>11))&4294967295,j.g[2]=j.g[2]+O&4294967295,j.g[3]=j.g[3]+S&4294967295}i.prototype.v=function(j,I){I===void 0&&(I=j.length);const A=I-this.blockSize,R=this.C;let O=this.h,S=0;for(;S<I;){if(O==0)for(;S<=A;)a(this,j,S),S+=this.blockSize;if(typeof j=="string"){for(;S<I;)if(R[O++]=j.charCodeAt(S++),O==this.blockSize){a(this,R),O=0;break}}else for(;S<I;)if(R[O++]=j[S++],O==this.blockSize){a(this,R),O=0;break}}this.h=O,this.o+=I},i.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var I=1;I<j.length-8;++I)j[I]=0;I=this.o*8;for(var A=j.length-8;A<j.length;++A)j[A]=I&255,I/=256;for(this.v(j),j=Array(16),I=0,A=0;A<4;++A)for(let R=0;R<32;R+=8)j[I++]=this.g[A]>>>R&255;return j};function l(j,I){var A=m;return Object.prototype.hasOwnProperty.call(A,j)?A[j]:A[j]=I(j)}function u(j,I){this.h=I;const A=[];let R=!0;for(let O=j.length-1;O>=0;O--){const S=j[O]|0;R&&S==I||(A[O]=S,R=!1)}this.g=A}var m={};function g(j){return-128<=j&&j<128?l(j,function(I){return new u([I|0],I<0?-1:0)}):new u([j|0],j<0?-1:0)}function y(j){if(isNaN(j)||!isFinite(j))return b;if(j<0)return L(y(-j));const I=[];let A=1;for(let R=0;j>=A;R++)I[R]=j/A|0,A*=4294967296;return new u(I,0)}function v(j,I){if(j.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(j.charAt(0)=="-")return L(v(j.substring(1),I));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(I,8));let R=b;for(let S=0;S<j.length;S+=8){var O=Math.min(8,j.length-S);const x=parseInt(j.substring(S,S+O),I);O<8?(O=y(Math.pow(I,O)),R=R.j(O).add(y(x))):(R=R.j(A),R=R.add(y(x)))}return R}var b=g(0),T=g(1),N=g(16777216);n=u.prototype,n.m=function(){if(M(this))return-L(this).m();let j=0,I=1;for(let A=0;A<this.g.length;A++){const R=this.i(A);j+=(R>=0?R:4294967296+R)*I,I*=4294967296}return j},n.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(P(this))return"0";if(M(this))return"-"+L(this).toString(j);const I=y(Math.pow(j,6));var A=this;let R="";for(;;){const O=ie(A,I).g;A=z(A,O.j(I));let S=((A.g.length>0?A.g[0]:A.h)>>>0).toString(j);if(A=O,P(A))return S+R;for(;S.length<6;)S="0"+S;R=S+R}},n.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function P(j){if(j.h!=0)return!1;for(let I=0;I<j.g.length;I++)if(j.g[I]!=0)return!1;return!0}function M(j){return j.h==-1}n.l=function(j){return j=z(this,j),M(j)?-1:P(j)?0:1};function L(j){const I=j.g.length,A=[];for(let R=0;R<I;R++)A[R]=~j.g[R];return new u(A,~j.h).add(T)}n.abs=function(){return M(this)?L(this):this},n.add=function(j){const I=Math.max(this.g.length,j.g.length),A=[];let R=0;for(let O=0;O<=I;O++){let S=R+(this.i(O)&65535)+(j.i(O)&65535),x=(S>>>16)+(this.i(O)>>>16)+(j.i(O)>>>16);R=x>>>16,S&=65535,x&=65535,A[O]=x<<16|S}return new u(A,A[A.length-1]&-2147483648?-1:0)};function z(j,I){return j.add(L(I))}n.j=function(j){if(P(this)||P(j))return b;if(M(this))return M(j)?L(this).j(L(j)):L(L(this).j(j));if(M(j))return L(this.j(L(j)));if(this.l(N)<0&&j.l(N)<0)return y(this.m()*j.m());const I=this.g.length+j.g.length,A=[];for(var R=0;R<2*I;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(let O=0;O<j.g.length;O++){const S=this.i(R)>>>16,x=this.i(R)&65535,Q=j.i(O)>>>16,te=j.i(O)&65535;A[2*R+2*O]+=x*te,H(A,2*R+2*O),A[2*R+2*O+1]+=S*te,H(A,2*R+2*O+1),A[2*R+2*O+1]+=x*Q,H(A,2*R+2*O+1),A[2*R+2*O+2]+=S*Q,H(A,2*R+2*O+2)}for(j=0;j<I;j++)A[j]=A[2*j+1]<<16|A[2*j];for(j=I;j<2*I;j++)A[j]=0;return new u(A,0)};function H(j,I){for(;(j[I]&65535)!=j[I];)j[I+1]+=j[I]>>>16,j[I]&=65535,I++}function G(j,I){this.g=j,this.h=I}function ie(j,I){if(P(I))throw Error("division by zero");if(P(j))return new G(b,b);if(M(j))return I=ie(L(j),I),new G(L(I.g),L(I.h));if(M(I))return I=ie(j,L(I)),new G(L(I.g),I.h);if(j.g.length>30){if(M(j)||M(I))throw Error("slowDivide_ only works with positive integers.");for(var A=T,R=I;R.l(j)<=0;)A=re(A),R=re(R);var O=ae(A,1),S=ae(R,1);for(R=ae(R,2),A=ae(A,2);!P(R);){var x=S.add(R);x.l(j)<=0&&(O=O.add(A),S=x),R=ae(R,1),A=ae(A,1)}return I=z(j,O.j(I)),new G(O,I)}for(O=b;j.l(I)>=0;){for(A=Math.max(1,Math.floor(j.m()/I.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),S=y(A),x=S.j(I);M(x)||x.l(j)>0;)A-=R,S=y(A),x=S.j(I);P(S)&&(S=T),O=O.add(S),j=z(j,x)}return new G(O,j)}n.B=function(j){return ie(this,j).h},n.and=function(j){const I=Math.max(this.g.length,j.g.length),A=[];for(let R=0;R<I;R++)A[R]=this.i(R)&j.i(R);return new u(A,this.h&j.h)},n.or=function(j){const I=Math.max(this.g.length,j.g.length),A=[];for(let R=0;R<I;R++)A[R]=this.i(R)|j.i(R);return new u(A,this.h|j.h)},n.xor=function(j){const I=Math.max(this.g.length,j.g.length),A=[];for(let R=0;R<I;R++)A[R]=this.i(R)^j.i(R);return new u(A,this.h^j.h)};function re(j){const I=j.g.length+1,A=[];for(let R=0;R<I;R++)A[R]=j.i(R)<<1|j.i(R-1)>>>31;return new u(A,j.h)}function ae(j,I){const A=I>>5;I%=32;const R=j.g.length-A,O=[];for(let S=0;S<R;S++)O[S]=I>0?j.i(S+A)>>>I|j.i(S+A+1)<<32-I:j.i(S+A);return new u(O,j.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,lE=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,ua=u}).apply(typeof MS<"u"?MS:typeof self<"u"?self:typeof window<"u"?window:{});var Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cE,Jc,uE,Vd,qg,hE,dE,fE;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ad=="object"&&Ad];for(var _=0;_<d.length;++_){var E=d[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(d,_){if(_)e:{var E=i;d=d.split(".");for(var D=0;D<d.length-1;D++){var X=d[D];if(!(X in E))break e;E=E[X]}d=d[d.length-1],D=E[d],_=_(D),_!=D&&_!=null&&e(E,d,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(_){var E=[],D;for(D in _)Object.prototype.hasOwnProperty.call(_,D)&&E.push([D,_[D]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function m(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function g(d,_,E){return d.call.apply(d.bind,arguments)}function y(d,_,E){return y=g,y.apply(null,arguments)}function v(d,_){var E=Array.prototype.slice.call(arguments,1);return function(){var D=E.slice();return D.push.apply(D,arguments),d.apply(this,D)}}function b(d,_){function E(){}E.prototype=_.prototype,d.Z=_.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(D,X,ne){for(var ye=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ye[Be-2]=arguments[Be];return _.prototype[X].apply(D,ye)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function N(d){const _=d.length;if(_>0){const E=Array(_);for(let D=0;D<_;D++)E[D]=d[D];return E}return[]}function P(d,_){for(let D=1;D<arguments.length;D++){const X=arguments[D];var E=typeof X;if(E=E!="object"?E:X?Array.isArray(X)?"array":E:"null",E=="array"||E=="object"&&typeof X.length=="number"){E=d.length||0;const ne=X.length||0;d.length=E+ne;for(let ye=0;ye<ne;ye++)d[E+ye]=X[ye]}else d.push(X)}}class M{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function L(d){u.setTimeout(()=>{throw d},0)}function z(){var d=j;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class H{constructor(){this.h=this.g=null}add(_,E){const D=G.get();D.set(_,E),this.h?this.h.next=D:this.g=D,this.h=D}}var G=new M(()=>new ie,d=>d.reset());class ie{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ae=!1,j=new H,I=()=>{const d=Promise.resolve(void 0);re=()=>{d.then(A)}};function A(){for(var d;d=z();){try{d.h.call(d.g)}catch(E){L(E)}var _=G;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}ae=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};u.addEventListener("test",E,_),u.removeEventListener("test",E,_)}catch{}return d})();function x(d){return/^[\s\xa0]*$/.test(d)}function Q(d,_){O.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}b(Q,O),Q.prototype.init=function(d,_){const E=this.type=d.type,D=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(E=="mouseover"?_=d.fromElement:E=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Q.Z.h.call(this)},Q.prototype.h=function(){Q.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var te="closure_listenable_"+(Math.random()*1e6|0),U=0;function ee(d,_,E,D,X){this.listener=d,this.proxy=null,this.src=_,this.type=E,this.capture=!!D,this.ha=X,this.key=++U,this.da=this.fa=!1}function ge(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function be(d,_,E){for(const D in d)_.call(E,d[D],D,d)}function Y(d,_){for(const E in d)_.call(void 0,d[E],E,d)}function V(d){const _={};for(const E in d)_[E]=d[E];return _}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(d,_){let E,D;for(let X=1;X<arguments.length;X++){D=arguments[X];for(E in D)d[E]=D[E];for(let ne=0;ne<K.length;ne++)E=K[ne],Object.prototype.hasOwnProperty.call(D,E)&&(d[E]=D[E])}}function q(d){this.src=d,this.g={},this.h=0}q.prototype.add=function(d,_,E,D,X){const ne=d.toString();d=this.g[ne],d||(d=this.g[ne]=[],this.h++);const ye=me(d,_,D,X);return ye>-1?(_=d[ye],E||(_.fa=!1)):(_=new ee(_,this.src,ne,!!D,X),_.fa=E,d.push(_)),_};function ce(d,_){const E=_.type;if(E in d.g){var D=d.g[E],X=Array.prototype.indexOf.call(D,_,void 0),ne;(ne=X>=0)&&Array.prototype.splice.call(D,X,1),ne&&(ge(_),d.g[E].length==0&&(delete d.g[E],d.h--))}}function me(d,_,E,D){for(let X=0;X<d.length;++X){const ne=d[X];if(!ne.da&&ne.listener==_&&ne.capture==!!E&&ne.ha==D)return X}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),Te={};function Ke(d,_,E,D,X){if(Array.isArray(_)){for(let ne=0;ne<_.length;ne++)Ke(d,_[ne],E,D,X);return null}return E=Nt(E),d&&d[te]?d.J(_,E,m(D)?!!D.capture:!1,X):Pt(d,_,E,!1,D,X)}function Pt(d,_,E,D,X,ne){if(!_)throw Error("Invalid event type");const ye=m(X)?!!X.capture:!!X;let Be=Me(d);if(Be||(d[Ee]=Be=new q(d)),E=Be.add(_,E,D,ye,ne),E.proxy)return E;if(D=gs(),E.proxy=D,D.src=d,D.listener=E,d.addEventListener)S||(X=ye),X===void 0&&(X=!1),d.addEventListener(_.toString(),D,X);else if(d.attachEvent)d.attachEvent(_e(_.toString()),D);else if(d.addListener&&d.removeListener)d.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return E}function gs(){function d(E){return _.call(d.src,d.listener,E)}const _=je;return d}function ys(d,_,E,D,X){if(Array.isArray(_))for(var ne=0;ne<_.length;ne++)ys(d,_[ne],E,D,X);else D=m(D)?!!D.capture:!!D,E=Nt(E),d&&d[te]?(d=d.i,ne=String(_).toString(),ne in d.g&&(_=d.g[ne],E=me(_,E,D,X),E>-1&&(ge(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete d.g[ne],d.h--)))):d&&(d=Me(d))&&(_=d.g[_.toString()],d=-1,_&&(d=me(_,E,D,X)),(E=d>-1?_[d]:null)&&Sr(E))}function Sr(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[te])ce(_.i,d);else{var E=d.type,D=d.proxy;_.removeEventListener?_.removeEventListener(E,D,d.capture):_.detachEvent?_.detachEvent(_e(E),D):_.addListener&&_.removeListener&&_.removeListener(D),(E=Me(_))?(ce(E,d),E.h==0&&(E.src=null,_[Ee]=null)):ge(d)}}}function _e(d){return d in Te?Te[d]:Te[d]="on"+d}function je(d,_){if(d.da)d=!0;else{_=new Q(_,this);const E=d.listener,D=d.ha||d.src;d.fa&&Sr(d),d=E.call(D,_)}return d}function Me(d){return d=d[Ee],d instanceof q?d:null}var Ge="__closure_events_fn_"+(Math.random()*1e9>>>0);function Nt(d){return typeof d=="function"?d:(d[Ge]||(d[Ge]=function(_){return d.handleEvent(_)}),d[Ge])}function st(){R.call(this),this.i=new q(this),this.M=this,this.G=null}b(st,R),st.prototype[te]=!0,st.prototype.removeEventListener=function(d,_,E,D){ys(this,d,_,E,D)};function Le(d,_){var E,D=d.G;if(D)for(E=[];D;D=D.G)E.push(D);if(d=d.M,D=_.type||_,typeof _=="string")_=new O(_,d);else if(_ instanceof O)_.target=_.target||d;else{var X=_;_=new O(D,d),fe(_,X)}X=!0;let ne,ye;if(E)for(ye=E.length-1;ye>=0;ye--)ne=_.g=E[ye],X=dt(ne,D,!0,_)&&X;if(ne=_.g=d,X=dt(ne,D,!0,_)&&X,X=dt(ne,D,!1,_)&&X,E)for(ye=0;ye<E.length;ye++)ne=_.g=E[ye],X=dt(ne,D,!1,_)&&X}st.prototype.N=function(){if(st.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const E=d.g[_];for(let D=0;D<E.length;D++)ge(E[D]);delete d.g[_],d.h--}}this.G=null},st.prototype.J=function(d,_,E,D){return this.i.add(String(d),_,!1,E,D)},st.prototype.K=function(d,_,E,D){return this.i.add(String(d),_,!0,E,D)};function dt(d,_,E,D){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let X=!0;for(let ne=0;ne<_.length;++ne){const ye=_[ne];if(ye&&!ye.da&&ye.capture==E){const Be=ye.listener,$t=ye.ha||ye.src;ye.fa&&ce(d.i,ye),X=Be.call($t,D)!==!1&&X}}return X&&!D.defaultPrevented}function Sn(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(d,_||0)}function br(d){d.g=Sn(()=>{d.g=null,d.i&&(d.i=!1,br(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class bn extends R{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:br(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(d){R.call(this),this.h=d,this.g={}}b(Aa,R);var $l=[];function Gl(d){be(d.g,function(_,E){this.g.hasOwnProperty(E)&&Sr(_)},d),d.g={}}Aa.prototype.N=function(){Aa.Z.N.call(this),Gl(this)},Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=u.JSON.stringify,um=u.JSON.parse,Xu=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function Wu(){}function Ju(){}var Ms={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wn(){O.call(this,"d")}b(wn,O);function vs(){O.call(this,"c")}b(vs,O);var Ht={},Zu=null;function So(){return Zu=Zu||new st}Ht.Ia="serverreachability";function eh(d){O.call(this,Ht.Ia,d)}b(eh,O);function Js(d){const _=So();Le(_,new eh(_))}Ht.STAT_EVENT="statevent";function xa(d,_){O.call(this,Ht.STAT_EVENT,d),this.stat=_}b(xa,O);function Jt(d){const _=So();Le(_,new xa(_,d))}Ht.Ja="timingevent";function Zs(d,_){O.call(this,Ht.Ja,d),this.size=_}b(Zs,O);function ei(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},_)}function Ps(){this.g=!0}Ps.prototype.ua=function(){this.g=!1};function hm(d,_,E,D,X,ne){d.info(function(){if(d.g)if(ne){var ye="",Be=ne.split("&");for(let ot=0;ot<Be.length;ot++){var $t=Be[ot].split("=");if($t.length>1){const Rt=$t[0];$t=$t[1];const ws=Rt.split("_");ye=ws.length>=2&&ws[1]=="type"?ye+(Rt+"="+$t+"&"):ye+(Rt+"=redacted&")}}}else ye=null;else ye=ne;return"XMLHTTP REQ ("+D+") [attempt "+X+"]: "+_+`
`+E+`
`+ye})}function th(d,_,E,D,X,ne,ye){d.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+X+"]: "+_+`
`+E+`
`+ne+" "+ye})}function ti(d,_,E,D){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+dm(d,E)+(D?" "+D:"")})}function Ca(d,_){d.info(function(){return"TIMEOUT: "+_})}Ps.prototype.info=function(){};function dm(d,_){if(!d.g)return _;if(!_)return null;try{const ne=JSON.parse(_);if(ne){for(d=0;d<ne.length;d++)if(Array.isArray(ne[d])){var E=ne[d];if(!(E.length<2)){var D=E[1];if(Array.isArray(D)&&!(D.length<1)){var X=D[0];if(X!="noop"&&X!="stop"&&X!="close")for(let ye=1;ye<D.length;ye++)D[ye]=""}}}}return wr(ne)}catch{return _}}var Na={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Kl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yl;function Ra(){}b(Ra,Wu),Ra.prototype.g=function(){return new XMLHttpRequest},Yl=new Ra;function Ui(d){return encodeURIComponent(String(d))}function nh(d){var _=1;d=d.split(":");const E=[];for(;_>0&&d.length;)E.push(d.shift()),_--;return d.length&&E.push(d.join(":")),E}function Vs(d,_,E,D){this.j=d,this.i=_,this.l=E,this.S=D||1,this.V=new Aa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ls}function Ls(){this.i=null,this.g="",this.h=!1}var Zt={},mn={};function ni(d,_,E){d.M=1,d.A=Ia(tn(_)),d.u=E,d.R=!0,bo(d,null)}function bo(d,_){d.F=Date.now(),si(d),d.B=tn(d.A);var E=d.B,D=d.S;Array.isArray(D)||(D=[String(D)]),Ao(E.i,"t",D),d.C=0,E=d.j.L,d.h=new Ls,d.g=yh(d.j,E?_:null,!d.u),d.P>0&&(d.O=new bn(y(d.Y,d,d.g),d.P)),_=d.V,E=d.g,D=d.ba;var X="readystatechange";Array.isArray(X)||(X&&($l[0]=X.toString()),X=$l);for(let ne=0;ne<X.length;ne++){const ye=Ke(E,X[ne],D||_.handleEvent,!1,_.h||_);if(!ye)break;_.g[ye.key]=ye}_=d.J?V(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),Js(),hm(d.i,d.v,d.B,d.l,d.S,d.u)}Vs.prototype.ba=function(d){d=d.target;const _=this.O;_&&Bs(d)==3?_.j():this.Y(d)},Vs.prototype.Y=function(d){try{if(d==this.g)e:{const Be=Bs(this.g),$t=this.g.ya(),ot=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||En(this.g)))){this.K||Be!=4||$t==7||($t==8||ot<=0?Js(3):Js(2)),ii(this);var _=this.g.ca();this.X=_;var E=fm(this);if(this.o=_==200,th(this.i,this.v,this.B,this.l,this.S,Be,_),this.o){if(this.U&&!this.L){t:{if(this.g){var D,X=this.g;if((D=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(D)){var ne=D;break t}}ne=null}if(d=ne)ti(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ri(this,d);else{this.o=!1,this.m=3,Jt(12),ts(this),_s(this);break e}}if(this.R){d=!0;let Rt;for(;!this.K&&this.C<E.length;)if(Rt=ih(this,E),Rt==mn){Be==4&&(this.m=4,Jt(14),d=!1),ti(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Zt){this.m=4,Jt(15),ti(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else ti(this.i,this.l,Rt,null),ri(this,Rt);if(sh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||E.length!=0||this.h.h||(this.m=1,Jt(16),d=!1),this.o=this.o&&d,!d)ti(this.i,this.l,E,"[Invalid Chunked Response]"),ts(this),_s(this);else if(E.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),cc(ye),ye.P=!0,Jt(11))}}else ti(this.i,this.l,E,null),ri(this,E);Be==4&&ts(this),this.o&&!this.K&&(Be==4?fh(this.j,this):(this.o=!1,si(this)))}else Bi(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),ts(this),_s(this)}}}catch{}finally{}};function fm(d){if(!sh(d))return d.g.la();const _=En(d.g);if(_==="")return"";let E="";const D=_.length,X=Bs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ts(d),_s(d),"";d.h.i=new u.TextDecoder}for(let ne=0;ne<D;ne++)d.h.h=!0,E+=d.h.i.decode(_[ne],{stream:!(X&&ne==D-1)});return _.length=0,d.h.g+=E,d.C=0,d.h.g}function sh(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function ih(d,_){var E=d.C,D=_.indexOf(`
`,E);return D==-1?mn:(E=Number(_.substring(E,D)),isNaN(E)?Zt:(D+=1,D+E>_.length?mn:(_=_.slice(D,D+E),d.C=D+E,_)))}Vs.prototype.cancel=function(){this.K=!0,ts(this)};function si(d){d.T=Date.now()+d.H,wo(d,d.H)}function wo(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ei(y(d.aa,d),_)}function ii(d){d.D&&(u.clearTimeout(d.D),d.D=null)}Vs.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ca(this.i,this.B),this.M!=2&&(Js(),Jt(17)),ts(this),this.m=2,_s(this)):wo(this,this.T-d)};function _s(d){d.j.I==0||d.K||fh(d.j,d)}function ts(d){ii(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,Gl(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function ri(d,_){try{var E=d.j;if(E.I!=0&&(E.g==d||oi(E.h,d))){if(!d.L&&oi(E.h,d)&&E.I==3){try{var D=E.Ba.g.parse(_)}catch{D=null}if(Array.isArray(D)&&D.length==3){var X=D;if(X[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)Io(E),Ir(E);else break e;Va(E),Jt(18)}}else E.xa=X[1],0<E.xa-E.K&&X[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=ei(y(E.Va,E),6e3));ai(E.h)<=1&&E.ta&&(E.ta=void 0)}else fi(E,11)}else if((d.L||E.g==d)&&Io(E),!x(_))for(X=E.Ba.g.parse(_),_=0;_<X.length;_++){let ot=X[_];const Rt=ot[0];if(!(Rt<=E.K))if(E.K=Rt,ot=ot[1],E.I==2)if(ot[0]=="c"){E.M=ot[1],E.ba=ot[2];const ws=ot[3];ws!=null&&(E.ka=ws,E.j.info("VER="+E.ka));const mi=ot[4];mi!=null&&(E.za=mi,E.j.info("SVER="+E.za));const Fs=ot[5];Fs!=null&&typeof Fs=="number"&&Fs>0&&(D=1.5*Fs,E.O=D,E.j.info("backChannelRequestTimeoutMs_="+D)),D=E;const qs=d.g;if(qs){const La=qs.g?qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(La){var ne=D.h;ne.g||La.indexOf("spdy")==-1&&La.indexOf("quic")==-1&&La.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Wl(ne,ne.h),ne.h=null))}if(D.G){const Do=qs.g?qs.g.getResponseHeader("X-HTTP-Session-Id"):null;Do&&(D.wa=Do,ft(D.J,D.G,Do))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),D=E;var ye=d;if(D.na=gh(D,D.L?D.ba:null,D.W),ye.L){Jl(D.h,ye);var Be=ye,$t=D.O;$t&&(Be.H=$t),Be.D&&(ii(Be),si(Be)),D.g=ye}else hh(D);E.i.length>0&&di(E)}else ot[0]!="stop"&&ot[0]!="close"||fi(E,7);else E.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?fi(E,7):oc(E):ot[0]!="noop"&&E.l&&E.l.qa(ot),E.A=0)}}Js(4)}catch{}}var en=class{constructor(d,_){this.g=d,this.map=_}};function Ql(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ai(d){return d.h?1:d.g?d.g.size:0}function oi(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function Wl(d,_){d.g?d.g.add(_):d.h=_}function Jl(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Ql.prototype.cancel=function(){if(this.i=Zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Zl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const E of d.g.values())_=_.concat(E.G);return _}return N(d.i)}var rh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eo(d,_){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const D=d[E].indexOf("=");let X,ne=null;D>=0?(X=d[E].substring(0,D),ne=d[E].substring(D+1)):X=d[E],_(X,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function ns(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof ns?(this.l=d.l,pn(this,d.j),this.o=d.o,this.g=d.g,Er(this,d.u),this.h=d.h,ec(this,ch(d.i)),this.m=d.m):d&&(_=String(d).match(rh))?(this.l=!1,pn(this,_[1]||"",!0),this.o=li(_[2]||""),this.g=li(_[3]||"",!0),Er(this,_[4]),this.h=li(_[5]||"",!0),ec(this,_[6]||"",!0),this.m=li(_[7]||"")):(this.l=!1,this.i=new Ar(null,this.l))}ns.prototype.toString=function(){const d=[];var _=this.j;_&&d.push(Da(_,To,!0),":");var E=this.g;return(E||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Da(_,To,!0),"@"),d.push(Ui(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Da(E,E.charAt(0)=="/"?tc:ah,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Da(E,oh)),d.join("")},ns.prototype.resolve=function(d){const _=tn(this);let E=!!d.j;E?pn(_,d.j):E=!!d.o,E?_.o=d.o:E=!!d.g,E?_.g=d.g:E=d.u!=null;var D=d.h;if(E)Er(_,d.u);else if(E=!!d.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var X=_.h.lastIndexOf("/");X!=-1&&(D=_.h.slice(0,X+1)+D)}if(X=D,X==".."||X==".")D="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){D=X.lastIndexOf("/",0)==0,X=X.split("/");const ne=[];for(let ye=0;ye<X.length;){const Be=X[ye++];Be=="."?D&&ye==X.length&&ne.push(""):Be==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),D&&ye==X.length&&ne.push("")):(ne.push(Be),D=!0)}D=ne.join("/")}else D=X}return E?_.h=D:E=d.i.toString()!=="",E?ec(_,ch(d.i)):E=!!d.m,E&&(_.m=d.m),_};function tn(d){return new ns(d)}function pn(d,_,E){d.j=E?li(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Er(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function ec(d,_,E){_ instanceof Ar?(d.i=_,xo(d.i,d.l)):(E||(_=Da(_,Tr)),d.i=new Ar(_,d.l))}function ft(d,_,E){d.i.set(_,E)}function Ia(d){return ft(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function li(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Da(d,_,E){return typeof d=="string"?(d=encodeURI(d).replace(_,qn),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function qn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var To=/[#\/\?@]/g,ah=/[#\?:]/g,tc=/[#\?]/g,Tr=/[#\?@]/g,oh=/#/g;function Ar(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Hn(d){d.g||(d.g=new Map,d.h=0,d.i&&Eo(d.i,function(_,E){d.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Ar.prototype,n.add=function(d,_){Hn(this),this.i=null,d=xr(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(_),this.h+=1,this};function lh(d,_){Hn(d),_=xr(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function nc(d,_){return Hn(d),_=xr(d,_),d.g.has(_)}n.forEach=function(d,_){Hn(this),this.g.forEach(function(E,D){E.forEach(function(X){d.call(_,X,D,this)},this)},this)};function sc(d,_){Hn(d);let E=[];if(typeof _=="string")nc(d,_)&&(E=E.concat(d.g.get(xr(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)E=E.concat(d[_]);return E}n.set=function(d,_){return Hn(this),this.i=null,d=xr(this,d),nc(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=sc(this,d),d.length>0?String(d[0]):_):_};function Ao(d,_,E){lh(d,_),E.length>0&&(d.i=null,d.g.set(xr(d,_),N(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let D=0;D<_.length;D++){var E=_[D];const X=Ui(E);E=sc(this,E);for(let ne=0;ne<E.length;ne++){let ye=X;E[ne]!==""&&(ye+="="+Ui(E[ne])),d.push(ye)}}return this.i=d.join("&")};function ch(d){const _=new Ar;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function xr(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function xo(d,_){_&&!d.j&&(Hn(d),d.i=null,d.g.forEach(function(E,D){const X=D.toLowerCase();D!=X&&(lh(this,D),Ao(this,X,E))},d)),d.j=_}function Us(d,_){const E=new Ps;if(u.Image){const D=new Image;D.onload=v(Ss,E,"TestLoadImage: loaded",!0,_,D),D.onerror=v(Ss,E,"TestLoadImage: error",!1,_,D),D.onabort=v(Ss,E,"TestLoadImage: abort",!1,_,D),D.ontimeout=v(Ss,E,"TestLoadImage: timeout",!1,_,D),u.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=d}else _(!1)}function ic(d,_){const E=new Ps,D=new AbortController,X=setTimeout(()=>{D.abort(),Ss(E,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:D.signal}).then(ne=>{clearTimeout(X),ne.ok?Ss(E,"TestPingServer: ok",!0,_):Ss(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(X),Ss(E,"TestPingServer: error",!1,_)})}function Ss(d,_,E,D,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),D(E)}catch{}}function Cr(){this.g=new Xu}function ci(d){this.i=d.Sb||null,this.h=d.ab||!1}b(ci,Wu),ci.prototype.g=function(){return new ja(this.i,this.h)};function ja(d,_){st.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(ja,st),n=ja.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,zs(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Co(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Co(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Nr(this):zs(this),this.readyState==3&&Co(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,Nr(this))},n.Na=function(d){this.g&&(this.response=d,Nr(this))},n.ga=function(){this.g&&Nr(this)};function Nr(d){d.readyState=4,d.l=null,d.j=null,d.B=null,zs(d)}n.setRequestHeader=function(d,_){this.A.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=_.next();return d.join(`\r
`)};function zs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ja.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function bs(d){let _="";return be(d,function(E,D){_+=D,_+=":",_+=E,_+=`\r
`}),_}function ka(d,_,E){e:{for(D in E){var D=!1;break e}D=!0}D||(E=bs(E),typeof d=="string"?E!=null&&Ui(E):ft(d,_,E))}function vt(d){st.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(vt,st);var ui=/^https?$/i,rc=["POST","PUT"];n=vt.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,_,E,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yl.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(ne){Oa(this,ne);return}if(d=E||"",E=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var X in D)E.set(X,D[X]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ne of D.keys())E.set(ne,D.get(ne));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(E.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(rc,_,void 0)>=0)||D||X||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ye]of E)this.g.setRequestHeader(ne,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(ne){Oa(this,ne)}};function Oa(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,ac(d),zi(d)}function ac(d){d.A||(d.A=!0,Le(d,"complete"),Le(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Le(this,"complete"),Le(this,"abort"),zi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),vt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ma(this):this.Xa())},n.Xa=function(){Ma(this)};function Ma(d){if(d.h&&typeof l<"u"){if(d.v&&Bs(d)==4)setTimeout(d.Ca.bind(d),0);else if(Le(d,"readystatechange"),Bs(d)==4){d.h=!1;try{const ne=d.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var D;if(D=ne===0){let ye=String(d.D).match(rh)[1]||null;!ye&&u.self&&u.self.location&&(ye=u.self.location.protocol.slice(0,-1)),D=!ui.test(ye?ye.toLowerCase():"")}E=D}if(E)Le(d,"complete"),Le(d,"success");else{d.o=6;try{var X=Bs(d)>2?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.ca()+"]",ac(d)}}finally{zi(d)}}}}function zi(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,_||Le(d,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Bs(d){return d.g?d.g.readyState:0}n.ca=function(){try{return Bs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),um(_)}};function En(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(d){const _={};d=(d.g&&Bs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<d.length;D++){if(x(d[D]))continue;var E=nh(d[D]);const X=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ne=_[X]||[];_[X]=ne,ne.push(E)}Y(_,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hi(d,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||_}function Rr(d){this.za=0,this.i=[],this.j=new Ps,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hi("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hi("baseRetryDelayMs",5e3,d),this.Za=hi("retryDelaySeedMs",1e4,d),this.Ta=hi("forwardChannelMaxRetries",2,d),this.va=hi("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Ql(d&&d.concurrentRequestLimit),this.Ba=new Cr,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Rr.prototype,n.ka=8,n.I=1,n.connect=function(d,_,E,D){Jt(0),this.W=d,this.H=_||{},E&&D!==void 0&&(this.H.OSID=E,this.H.OAID=D),this.F=this.X,this.J=gh(this,null,this.W),di(this)};function oc(d){if(No(d),d.I==3){var _=d.V++,E=tn(d.J);if(ft(E,"SID",d.M),ft(E,"RID",_),ft(E,"TYPE","terminate"),Pa(d,E),_=new Vs(d,d.j,_),_.M=2,_.A=Ia(tn(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=_.A,E=!0),E||(_.g=yh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),si(_)}ph(d)}function Ir(d){d.g&&(cc(d),d.g.cancel(),d.g=null)}function No(d){Ir(d),d.v&&(u.clearTimeout(d.v),d.v=null),Io(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function di(d){if(!Xl(d.h)&&!d.m){d.m=!0;var _=d.Ea;re||I(),ae||(re(),ae=!0),j.add(_,d),d.D=0}}function Ro(d,_){return ai(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ei(y(d.Ea,d,_),mh(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const X=new Vs(this,this.j,d);let ne=this.o;if(this.U&&(ne?(ne=V(ne),fe(ne,this.U)):ne=this.U),this.u!==null||this.R||(X.J=ne,ne=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var D=this.i[E];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(_+=D,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=uh(this,X,_),E=tn(this.J),ft(E,"RID",d),ft(E,"CVER",22),this.G&&ft(E,"X-HTTP-Session-Id",this.G),Pa(this,E),ne&&(this.R?_="headers="+Ui(bs(ne))+"&"+_:this.u&&ka(E,this.u,ne)),Wl(this.h,X),this.Ra&&ft(E,"TYPE","init"),this.S?(ft(E,"$req",_),ft(E,"SID","null"),X.U=!0,ni(X,E,null)):ni(X,E,_),this.I=2}}else this.I==3&&(d?lc(this,d):this.i.length==0||Xl(this.h)||lc(this))};function lc(d,_){var E;_?E=_.l:E=d.V++;const D=tn(d.J);ft(D,"SID",d.M),ft(D,"RID",E),ft(D,"AID",d.K),Pa(d,D),d.u&&d.o&&ka(D,d.u,d.o),E=new Vs(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),_&&(d.i=_.G.concat(d.i)),_=uh(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Wl(d.h,E),ni(E,D,_)}function Pa(d,_){d.H&&be(d.H,function(E,D){ft(_,D,E)}),d.l&&be({},function(E,D){ft(_,D,E)})}function uh(d,_,E){E=Math.min(d.i.length,E);const D=d.l?y(d.l.Ka,d.l,d):null;e:{var X=d.i;let Be=-1;for(;;){const $t=["count="+E];Be==-1?E>0?(Be=X[0].g,$t.push("ofs="+Be)):Be=0:$t.push("ofs="+Be);let ot=!0;for(let Rt=0;Rt<E;Rt++){var ne=X[Rt].g;const ws=X[Rt].map;if(ne-=Be,ne<0)Be=Math.max(0,X[Rt].g-100),ot=!1;else try{ne="req"+ne+"_"||"";try{var ye=ws instanceof Map?ws:Object.entries(ws);for(const[mi,Fs]of ye){let qs=Fs;m(Fs)&&(qs=wr(Fs)),$t.push(ne+mi+"="+encodeURIComponent(qs))}}catch(mi){throw $t.push(ne+"type="+encodeURIComponent("_badmap")),mi}}catch{D&&D(ws)}}if(ot){ye=$t.join("&");break e}}ye=void 0}return d=d.i.splice(0,E),_.G=d,ye}function hh(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;re||I(),ae||(re(),ae=!0),j.add(_,d),d.A=0}}function Va(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ei(y(d.Da,d),mh(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,dh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ei(y(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),Ir(this),dh(this))};function cc(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function dh(d){d.g=new Vs(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=tn(d.na);ft(_,"RID","rpc"),ft(_,"SID",d.M),ft(_,"AID",d.K),ft(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&ft(_,"TO",d.ia),ft(_,"TYPE","xmlhttp"),Pa(d,_),d.u&&d.o&&ka(_,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=Ia(tn(_)),E.u=null,E.R=!0,bo(E,d)}n.Va=function(){this.C!=null&&(this.C=null,Ir(this),Va(this),Jt(19))};function Io(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function fh(d,_){var E=null;if(d.g==_){Io(d),cc(d),d.g=null;var D=2}else if(oi(d.h,_))E=_.G,Jl(d.h,_),D=1;else return;if(d.I!=0){if(_.o)if(D==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var X=d.D;D=So(),Le(D,new Zs(D,E)),di(d)}else hh(d);else if(X=_.m,X==3||X==0&&_.X>0||!(D==1&&Ro(d,_)||D==2&&Va(d)))switch(E&&E.length>0&&(_=d.h,_.i=_.i.concat(E)),X){case 1:fi(d,5);break;case 4:fi(d,10);break;case 3:fi(d,6);break;default:fi(d,2)}}}function mh(d,_){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*_}function fi(d,_){if(d.j.info("Error code "+_),_==2){var E=y(d.bb,d),D=d.Ua;const X=!D;D=new ns(D||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||pn(D,"https"),Ia(D),X?Us(D.toString(),E):ic(D.toString(),E)}else Jt(2);d.I=0,d.l&&d.l.pa(_),ph(d),No(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function ph(d){if(d.I=0,d.ja=[],d.l){const _=Zl(d.h);(_.length!=0||d.i.length!=0)&&(P(d.ja,_),P(d.ja,d.i),d.h.i.length=0,N(d.i),d.i.length=0),d.l.oa()}}function gh(d,_,E){var D=E instanceof ns?tn(E):new ns(E);if(D.g!="")_&&(D.g=_+"."+D.g),Er(D,D.u);else{var X=u.location;D=X.protocol,_=_?_+"."+X.hostname:X.hostname,X=+X.port;const ne=new ns(null);D&&pn(ne,D),_&&(ne.g=_),X&&Er(ne,X),E&&(ne.h=E),D=ne}return E=d.G,_=d.wa,E&&_&&ft(D,E,_),ft(D,"VER",d.ka),Pa(d,D),D}function yh(d,_,E){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new vt(new ci({ab:E})):new vt(d.ma),_.Fa(d.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vh(){}n=vh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Dr(){}Dr.prototype.g=function(d,_){return new Un(d,_)};function Un(d,_){st.call(this),this.g=new Rr(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!x(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Fi(this)}b(Un,st),Un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){oc(this.g)},Un.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=wr(d),d=E);_.i.push(new en(_.Ya++,d)),_.I==3&&di(_)},Un.prototype.N=function(){this.g.l=null,delete this.j,oc(this.g),delete this.g,Un.Z.N.call(this)};function _h(d){wn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const E in _){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}b(_h,wn);function Sh(){vs.call(this),this.status=1}b(Sh,vs);function Fi(d){this.g=d}b(Fi,vh),Fi.prototype.ra=function(){Le(this.g,"a")},Fi.prototype.qa=function(d){Le(this.g,new _h(d))},Fi.prototype.pa=function(d){Le(this.g,new Sh)},Fi.prototype.oa=function(){Le(this.g,"b")},Dr.prototype.createWebChannel=Dr.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,fE=function(){return new Dr},dE=function(){return So()},hE=Ht,qg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Na.NO_ERROR=0,Na.TIMEOUT=8,Na.HTTP_ERROR=6,Vd=Na,Kl.COMPLETE="complete",uE=Kl,Ju.EventType=Ms,Ms.OPEN="a",Ms.CLOSE="b",Ms.ERROR="c",Ms.MESSAGE="d",st.prototype.listen=st.prototype.J,Jc=Ju,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,cE=vt}).apply(typeof Ad<"u"?Ad:typeof self<"u"?self:typeof window<"u"?window:{});const PS="@firebase/firestore",VS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new jy("@firebase/firestore");function dl(){return uo.logLevel}function we(n,...e){if(uo.logLevel<=Ze.DEBUG){const t=e.map(My);uo.debug(`Firestore (${Pl}): ${n}`,...t)}}function mr(n,...e){if(uo.logLevel<=Ze.ERROR){const t=e.map(My);uo.error(`Firestore (${Pl}): ${n}`,...t)}}function ho(n,...e){if(uo.logLevel<=Ze.WARN){const t=e.map(My);uo.warn(`Firestore (${Pl}): ${n}`,...t)}}function My(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,mE(n,i,t)}function mE(n,e,t){let i=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw mr(i),new Error(i)}function ht(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||mE(e,a,i)}function ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Vi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Pn.UNAUTHENTICATED)))}shutdown(){}}class fI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class mI{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ht(this.o===void 0,42304);let i=this.i;const a=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ur,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},m=g=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ur)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ht(typeof i.accessToken=="string",31837,{l:i}),new pE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new Pn(e)}}class pI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new pI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class LS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ks(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ht(this.o===void 0,3512);const i=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new LS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new LS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=vI(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function et(n,e){return n<e?-1:n>e?1:0}function Hg(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return Sg(a)===Sg(l)?et(a,l):Sg(a)?1:-1}return et(n.length,e.length)}const _I=55296,SI=57343;function Sg(n){const e=n.charCodeAt(0);return e>=_I&&e<=SI}function Tl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="__name__";class bi{constructor(e,t,i){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ke(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=bi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return et(e.length,t.length)}static compareSegments(e,t){const i=bi.isNumericId(e),a=bi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?bi.extractNumericId(e).compare(bi.extractNumericId(t)):Hg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ua.fromString(e.substring(4,e.length-2))}}class At extends bi{construct(e,t,i){return new At(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(he.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new At(t)}static emptyPath(){return new At([])}}const bI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends bi{construct(e,t,i){return new vn(e,t,i)}static isValidIdentifier(e){return bI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===US}static keyField(){return new vn([US])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new Se(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new Se(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Se(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,a+=2}else m==="`"?(u=!u,a++):m!=="."||u?(i+=m,a++):(l(),a++)}if(l(),u)throw new Se(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(t)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(At.fromString(e))}static fromName(e){return new Ne(At.fromString(e).popFirst(5))}static empty(){return new Ne(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return At.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new At(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(n,e,t){if(!t)throw new Se(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vE(n,e,t,i){if(e===!0&&i===!0)throw new Se(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zS(n){if(!Ne.isDocumentKey(n))throw new Se(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BS(n){if(Ne.isDocumentKey(n))throw new Se(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _E(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function xf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ke(12329,{type:typeof n})}function Fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xf(n);throw new Se(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wI(n,e){if(e<=0)throw new Se(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(n,e){const t={typeString:n};return e&&(t.value=e),t}function ku(n,e){if(!_E(n))throw new Se(he.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(a&&typeof u!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Se(he.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=-62135596800,qS=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*qS);return new Et(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<FS)throw new Se(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qS}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ku(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-FS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:un("string",Et._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Et(0,0))}static max(){return new Ve(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=-1;function EI(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ve.fromTimestamp(i===1e9?new Et(t+1,0):new Et(t,i));return new pa(a,Ne.empty(),e)}function TI(n){return new pa(n.readTime,n.key,mu)}class pa{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new pa(Ve.min(),Ne.empty(),mu)}static max(){return new pa(Ve.max(),Ne.empty(),mu)}}function AI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(n.documentKey,e.documentKey),t!==0?t:et(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==xI)throw n;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.reject(t)}static resolve(e){return new pe(((t,i)=>{t(e)}))}static reject(e){return new pe(((t,i)=>{i(e)}))}static waitFor(e){return new pe(((t,i)=>{let a=0,l=0,u=!1;e.forEach((m=>{++a,m.next((()=>{++l,u&&l===a&&t()}),(g=>i(g)))})),u=!0,l===a&&t()}))}static or(e){let t=pe.resolve(!1);for(const i of e)t=t.next((a=>a?pe.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new pe(((i,a)=>{const l=e.length,u=new Array(l);let m=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((v=>{u[y]=v,++m,m===l&&i(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new pe(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function NI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ll(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=-1;function Nf(n){return n==null}function Zd(n){return n===0&&1/n==-1/0}function RI(n){return typeof n=="number"&&Number.isInteger(n)&&!Zd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="";function II(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=HS(e)),e=DI(n.get(t),e);return HS(e)}function DI(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case SE:t+="";break;default:t+=l}}return t}function HS(n){return n+SE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ea(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xd(this.root,e,this.comparator,!1)}getReverseIterator(){return new xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xd(this.root,e,this.comparator,!0)}}class xd{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??In.RED,this.left=a??In.EMPTY,this.right=l??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new In(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return In.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new GS(this.data.getIterator())}getIteratorFrom(e){return new GS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new fn(this.comparator);return t.data=e,t}}class GS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new ds([])}unionWith(e){let t=new fn(vn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new wE("Invalid base64 string: "+l):l}})(e);return new _n(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new _n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const jI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(n){if(ht(!!n,39018),typeof n=="string"){let e=0;const t=jI.exec(n);if(ht(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Qt(n.seconds),nanos:Qt(n.nanos)}}function Qt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ya(n){return typeof n=="string"?_n.fromBase64String(n):_n.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="server_timestamp",TE="__type__",AE="__previous_value__",xE="__local_write_time__";function Vy(n){return(n?.mapValue?.fields||{})[TE]?.stringValue===EE}function Rf(n){const e=n.mapValue.fields[AE];return Vy(e)?Rf(e):e}function pu(n){const e=ga(n.mapValue.fields[xE].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,t,i,a,l,u,m,g,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const ef="(default)";class Al{constructor(e,t){this.projectId=e,this.database=t||ef}static empty(){return new Al("","")}get isDefaultDatabase(){return this.database===ef}isEqual(e){return e instanceof Al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="__type__",OI="__max__",Cd={mapValue:{}},NE="__vector__",tf="value";function va(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vy(n)?4:PI(n)?9007199254740991:MI(n)?10:11:ke(28295,{value:n})}function ki(n,e){if(n===e)return!0;const t=va(n);if(t!==va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pu(n).isEqual(pu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ga(a.timestampValue),m=ga(l.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return ya(a.bytesValue).isEqual(ya(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Qt(a.geoPointValue.latitude)===Qt(l.geoPointValue.latitude)&&Qt(a.geoPointValue.longitude)===Qt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Qt(a.integerValue)===Qt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Qt(a.doubleValue),m=Qt(l.doubleValue);return u===m?Zd(u)===Zd(m):isNaN(u)&&isNaN(m)}return!1})(n,e);case 9:return Tl(n.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},m=l.mapValue.fields||{};if($S(u)!==$S(m))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(m[g]===void 0||!ki(u[g],m[g])))return!1;return!0})(n,e);default:return ke(52216,{left:n})}}function gu(n,e){return(n.values||[]).find((t=>ki(t,e)))!==void 0}function xl(n,e){if(n===e)return 0;const t=va(n),i=va(e);if(t!==i)return et(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const m=Qt(l.integerValue||l.doubleValue),g=Qt(u.integerValue||u.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(n,e);case 3:return KS(n.timestampValue,e.timestampValue);case 4:return KS(pu(n),pu(e));case 5:return Hg(n.stringValue,e.stringValue);case 6:return(function(l,u){const m=ya(l),g=ya(u);return m.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const m=l.split("/"),g=u.split("/");for(let y=0;y<m.length&&y<g.length;y++){const v=et(m[y],g[y]);if(v!==0)return v}return et(m.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const m=et(Qt(l.latitude),Qt(u.latitude));return m!==0?m:et(Qt(l.longitude),Qt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return YS(n.arrayValue,e.arrayValue);case 10:return(function(l,u){const m=l.fields||{},g=u.fields||{},y=m[tf]?.arrayValue,v=g[tf]?.arrayValue,b=et(y?.values?.length||0,v?.values?.length||0);return b!==0?b:YS(y,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Cd.mapValue&&u===Cd.mapValue)return 0;if(l===Cd.mapValue)return 1;if(u===Cd.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),y=u.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let b=0;b<g.length&&b<v.length;++b){const T=Hg(g[b],v[b]);if(T!==0)return T;const N=xl(m[g[b]],y[v[b]]);if(N!==0)return N}return et(g.length,v.length)})(n.mapValue,e.mapValue);default:throw ke(23264,{he:t})}}function KS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return et(n,e);const t=ga(n),i=ga(e),a=et(t.seconds,i.seconds);return a!==0?a:et(t.nanos,i.nanos)}function YS(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=xl(t[a],i[a]);if(l)return l}return et(t.length,i.length)}function Cl(n){return $g(n)}function $g(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ga(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ya(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ne.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=$g(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${$g(t.fields[u])}`;return a+"}"})(n.mapValue):ke(61005,{value:n})}function Ld(n){switch(va(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rf(n);return e?16+Ld(e):16;case 5:return 2*n.stringValue.length;case 6:return ya(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Ld(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return Ea(i.fields,((l,u)=>{a+=l.length+Ld(u)})),a})(n.mapValue);default:throw ke(13486,{value:n})}}function QS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gg(n){return!!n&&"integerValue"in n}function Ly(n){return!!n&&"arrayValue"in n}function XS(n){return!!n&&"nullValue"in n}function WS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ud(n){return!!n&&"mapValue"in n}function MI(n){return(n?.mapValue?.fields||{})[CE]?.stringValue===NE}function iu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ea(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=iu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=iu(n.arrayValue.values[t]);return e}return{...n}}function PI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===OI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ud(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(t)}setAll(e){let t=vn.emptyPath(),i={},a=[];e.forEach(((u,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,a),i={},a=[],t=m.popLast()}u?i[m.lastSegment()]=iu(u):a.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Ud(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Ud(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ea(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new Wn(iu(this.value))}}function RE(n){const e=[];return Ea(n.fields,((t,i)=>{const a=new vn([t]);if(Ud(i)){const l=RE(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new ds(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t,i,a,l,u,m){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=m}static newInvalidDocument(e){return new Vn(e,0,Ve.min(),Ve.min(),Ve.min(),Wn.empty(),0)}static newFoundDocument(e,t,i,a){return new Vn(e,1,t,Ve.min(),i,a,0)}static newNoDocument(e,t){return new Vn(e,2,t,Ve.min(),Ve.min(),Wn.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,Ve.min(),Ve.min(),Wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t){this.position=e,this.inclusive=t}}function JS(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?i=Ne.comparator(Ne.fromName(u.referenceValue),t.key):i=xl(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function ZS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ki(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,t="asc"){this.field=e,this.dir=t}}function VI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{}class cn extends IE{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new UI(e,t,i):t==="array-contains"?new FI(e,i):t==="in"?new qI(e,i):t==="not-in"?new HI(e,i):t==="array-contains-any"?new $I(e,i):new cn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new zI(e,i):new BI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xl(t,this.value)):t!==null&&va(this.value)===va(t)&&this.matchesComparison(xl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ws extends IE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ws(e,t)}matches(e){return DE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DE(n){return n.op==="and"}function jE(n){return LI(n)&&DE(n)}function LI(n){for(const e of n.filters)if(e instanceof Ws)return!1;return!0}function Kg(n){if(n instanceof cn)return n.field.canonicalString()+n.op.toString()+Cl(n.value);if(jE(n))return n.filters.map((e=>Kg(e))).join(",");{const e=n.filters.map((t=>Kg(t))).join(",");return`${n.op}(${e})`}}function kE(n,e){return n instanceof cn?(function(i,a){return a instanceof cn&&i.op===a.op&&i.field.isEqual(a.field)&&ki(i.value,a.value)})(n,e):n instanceof Ws?(function(i,a){return a instanceof Ws&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,u,m)=>l&&kE(u,a.filters[m])),!0):!1})(n,e):void ke(19439)}function OE(n){return n instanceof cn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Cl(t.value)}`})(n):n instanceof Ws?(function(t){return t.op.toString()+" {"+t.getFilters().map(OE).join(" ,")+"}"})(n):"Filter"}class UI extends cn{constructor(e,t,i){super(e,t,i),this.key=Ne.fromName(i.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class zI extends cn{constructor(e,t){super(e,"in",t),this.keys=ME("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class BI extends cn{constructor(e,t){super(e,"not-in",t),this.keys=ME("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ME(n,e){return(e.arrayValue?.values||[]).map((t=>Ne.fromName(t.referenceValue)))}class FI extends cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ly(t)&&gu(t.arrayValue,this.value)}}class qI extends cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gu(this.value.arrayValue,t)}}class HI extends cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gu(this.value.arrayValue,t)}}class $I extends cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ly(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>gu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t=null,i=[],a=[],l=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=m,this.Te=null}}function eb(n,e=null,t=[],i=[],a=null,l=null,u=null){return new GI(n,e,t,i,a,l,u)}function Uy(n){const e=ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Kg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Cl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Cl(i))).join(",")),e.Te=t}return e.Te}function zy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ZS(n.startAt,e.startAt)&&ZS(n.endAt,e.endAt)}function Yg(n){return Ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,t=null,i=[],a=[],l=null,u="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KI(n,e,t,i,a,l,u,m){return new Ul(n,e,t,i,a,l,u,m)}function If(n){return new Ul(n)}function tb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function PE(n){return n.collectionGroup!==null}function ru(n){const e=ze(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new fn(vn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new yu(l,i))})),t.has(vn.keyField().canonicalString())||e.Ie.push(new yu(vn.keyField(),i))}return e.Ie}function Ci(n){const e=ze(n);return e.Ee||(e.Ee=YI(e,ru(n))),e.Ee}function YI(n,e){if(n.limitType==="F")return eb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new yu(a.field,l)}));const t=n.endAt?new nf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new nf(n.startAt.position,n.startAt.inclusive):null;return eb(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Qg(n,e){const t=n.filters.concat([e]);return new Ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sf(n,e,t){return new Ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Df(n,e){return zy(Ci(n),Ci(e))&&n.limitType===e.limitType}function VE(n){return`${Uy(Ci(n))}|lt:${n.limitType}`}function fl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>OE(a))).join(", ")}]`),Nf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Cl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Cl(a))).join(",")),`Target(${i})`})(Ci(n))}; limitType=${n.limitType})`}function jf(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ne.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of ru(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(u,m,g){const y=JS(u,m,g);return u.inclusive?y<=0:y<0})(i.startAt,ru(i),a)||i.endAt&&!(function(u,m,g){const y=JS(u,m,g);return u.inclusive?y>=0:y>0})(i.endAt,ru(i),a))})(n,e)}function QI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LE(n){return(e,t)=>{let i=!1;for(const a of ru(n)){const l=XI(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function XI(n,e,t){const i=n.field.isKeyField()?Ne.comparator(e.key,t.key):(function(l,u,m){const g=u.data.field(l),y=m.data.field(l);return g!==null&&y!==null?xl(g,y):ke(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ke(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ea(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return bE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=new Mt(Ne.comparator);function pr(){return WI}const UE=new Mt(Ne.comparator);function Zc(...n){let e=UE;for(const t of n)e=e.insert(t.key,t);return e}function zE(n){let e=UE;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function so(){return au()}function BE(){return au()}function au(){return new vo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const JI=new Mt(Ne.comparator),ZI=new fn(Ne.comparator);function tt(...n){let e=ZI;for(const t of n)e=e.add(t);return e}const eD=new fn(et);function tD(){return eD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zd(e)?"-0":e}}function FE(n){return{integerValue:""+n}}function qE(n,e){return RI(e)?FE(e):By(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this._=void 0}}function nD(n,e,t){return n instanceof vu?(function(a,l){const u={fields:{[TE]:{stringValue:EE},[xE]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Vy(l)&&(l=Rf(l)),l&&(u.fields[AE]=l),{mapValue:u}})(t,e):n instanceof _u?$E(n,e):n instanceof Su?GE(n,e):(function(a,l){const u=HE(a,l),m=nb(u)+nb(a.Ae);return Gg(u)&&Gg(a.Ae)?FE(m):By(a.serializer,m)})(n,e)}function sD(n,e,t){return n instanceof _u?$E(n,e):n instanceof Su?GE(n,e):t}function HE(n,e){return n instanceof bu?(function(i){return Gg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class vu extends kf{}class _u extends kf{constructor(e){super(),this.elements=e}}function $E(n,e){const t=KE(e);for(const i of n.elements)t.some((a=>ki(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Su extends kf{constructor(e){super(),this.elements=e}}function GE(n,e){let t=KE(e);for(const i of n.elements)t=t.filter((a=>!ki(a,i)));return{arrayValue:{values:t}}}class bu extends kf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function nb(n){return Qt(n.integerValue||n.doubleValue)}function KE(n){return Ly(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,t){this.field=e,this.transform=t}}function iD(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof _u&&a instanceof _u||i instanceof Su&&a instanceof Su?Tl(i.elements,a.elements,ki):i instanceof bu&&a instanceof bu?ki(i.Ae,a.Ae):i instanceof vu&&a instanceof vu})(n.transform,e.transform)}class rD{constructor(e,t){this.version=e,this.transformResults=t}}class ks{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ks}static exists(e){return new ks(void 0,e)}static updateTime(e){return new ks(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Of{}function QE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fy(n.key,ks.none()):new Ou(n.key,n.data,ks.none());{const t=n.data,i=Wn.empty();let a=new fn(vn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new Ta(n.key,i,new ds(a.toArray()),ks.none())}}function aD(n,e,t){n instanceof Ou?(function(a,l,u){const m=a.value.clone(),g=ib(a.fieldTransforms,l,u.transformResults);m.setAll(g),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):n instanceof Ta?(function(a,l,u){if(!zd(a.precondition,l))return void l.convertToUnknownDocument(u.version);const m=ib(a.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(XE(a)),g.setAll(m),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function ou(n,e,t,i){return n instanceof Ou?(function(l,u,m,g){if(!zd(l.precondition,u))return m;const y=l.value.clone(),v=rb(l.fieldTransforms,g,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ta?(function(l,u,m,g){if(!zd(l.precondition,u))return m;const y=rb(l.fieldTransforms,g,u),v=u.data;return v.setAll(XE(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(n,e,t,i):(function(l,u,m){return zd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m})(n,e,t)}function oD(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=HE(i.transform,a||null);l!=null&&(t===null&&(t=Wn.empty()),t.set(i.field,l))}return t||null}function sb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Tl(i,a,((l,u)=>iD(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ou extends Of{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ta extends Of{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function XE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function ib(n,e,t){const i=new Map;ht(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,m=e.data.field(l.field);i.set(l.field,sD(u,m,t[a]))}return i}function rb(n,e,t){const i=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);i.set(a.field,nD(l,u,e))}return i}class Fy extends Of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lD extends Of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&aD(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ou(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ou(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=BE();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let m=this.applyToLocalView(u,l.mutatedFields);m=t.has(a.key)?null:m;const g=QE(u,m);g!==null&&i.set(a.key,g),u.isValidDocument()||u.convertToNoDocument(Ve.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),tt())}isEqual(e){return this.batchId===e.batchId&&Tl(this.mutations,e.mutations,((t,i)=>sb(t,i)))&&Tl(this.baseMutations,e.baseMutations,((t,i)=>sb(t,i)))}}class qy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ht(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return JI})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new qy(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on,it;function dD(n){switch(n){case he.OK:return ke(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return ke(15467,{code:n})}}function WE(n){if(n===void 0)return mr("GRPC error has no .code"),he.UNKNOWN;switch(n){case on.OK:return he.OK;case on.CANCELLED:return he.CANCELLED;case on.UNKNOWN:return he.UNKNOWN;case on.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case on.INTERNAL:return he.INTERNAL;case on.UNAVAILABLE:return he.UNAVAILABLE;case on.UNAUTHENTICATED:return he.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case on.NOT_FOUND:return he.NOT_FOUND;case on.ALREADY_EXISTS:return he.ALREADY_EXISTS;case on.PERMISSION_DENIED:return he.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case on.ABORTED:return he.ABORTED;case on.OUT_OF_RANGE:return he.OUT_OF_RANGE;case on.UNIMPLEMENTED:return he.UNIMPLEMENTED;case on.DATA_LOSS:return he.DATA_LOSS;default:return ke(39323,{code:n})}}(it=on||(on={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=new ua([4294967295,4294967295],0);function ab(n){const e=fD().encode(n),t=new lE;return t.update(e),new Uint8Array(t.digest())}function ob(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ua([t,i],0),new ua([a,l],0)]}class Hy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new eu(`Invalid padding: ${t}`);if(i<0)throw new eu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new eu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ua.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(ua.fromNumber(i)));return a.compare(mD)===1&&(a=new ua([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ab(e),[i,a]=ob(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Hy(l,a,t);return i.forEach((m=>u.insert(m))),u}insert(e){if(this.ge===0)return;const t=ab(e),[i,a]=ob(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Mf(Ve.min(),a,new Mt(et),pr(),tt())}}class Mu{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Mu(i,t,tt(),tt(),tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class JE{constructor(e,t){this.targetId=e,this.Ce=t}}class ZE{constructor(e,t,i=_n.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class lb{constructor(){this.ve=0,this.Fe=cb(),this.Me=_n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tt(),t=tt(),i=tt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:ke(38017,{changeType:l})}})),new Mu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=cb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class pD{constructor(e){this.Ge=e,this.ze=new Map,this.je=pr(),this.Je=Nd(),this.He=Nd(),this.Ye=new Mt(et)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Yg(l))if(i===0){const u=new Ne(l.path);this.et(t,u,Vn.newNoDocument(u,Ve.min()))}else ht(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const m=this.ut(e),g=m?this.ct(m,e,u):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,m;try{u=ya(i).toUint8Array()}catch(g){if(g instanceof wE)return ho("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Hy(u,a,l)}catch(g){return ho(g instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const m=this.ot(u);if(m){if(l.current&&Yg(m.target)){const g=new Ne(m.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,Vn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=tt();this.He.forEach(((l,u)=>{let m=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Mf(e,t,this.Ye,this.je,i);return this.je=pr(),this.Je=Nd(),this.He=Nd(),this.Ye=new Mt(et),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new lb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new fn(et),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new fn(et),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Nd(){return new Mt(Ne.comparator)}function cb(){return new Mt(Ne.comparator)}const gD={asc:"ASCENDING",desc:"DESCENDING"},yD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vD={and:"AND",or:"OR"};class _D{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xg(n,e){return n.useProto3Json||Nf(e)?e:{value:e}}function rf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SD(n,e){return rf(n,e.toTimestamp())}function Ni(n){return ht(!!n,49232),Ve.fromTimestamp((function(t){const i=ga(t);return new Et(i.seconds,i.nanos)})(n))}function $y(n,e){return Wg(n,e).canonicalString()}function Wg(n,e){const t=(function(a){return new At(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function tT(n){const e=At.fromString(n);return ht(aT(e),10190,{key:e.toString()}),e}function Jg(n,e){return $y(n.databaseId,e.path)}function bg(n,e){const t=tT(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(sT(t))}function nT(n,e){return $y(n.databaseId,e)}function bD(n){const e=tT(n);return e.length===4?At.emptyPath():sT(e)}function Zg(n){return new At(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sT(n){return ht(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ub(n,e,t){return{name:Jg(n,e),fields:t.value.mapValue.fields}}function wD(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ke(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(ht(v===void 0||typeof v=="string",58123),_n.fromBase64String(v||"")):(ht(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),_n.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&(function(y){const v=y.code===void 0?he.UNKNOWN:WE(y.code);return new Se(v,y.message||"")})(u);t=new ZE(i,a,l,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=bg(n,i.document.name),l=Ni(i.document.updateTime),u=i.document.createTime?Ni(i.document.createTime):Ve.min(),m=new Wn({mapValue:{fields:i.document.fields}}),g=Vn.newFoundDocument(a,l,u,m),y=i.targetIds||[],v=i.removedTargetIds||[];t=new Bd(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=bg(n,i.document),l=i.readTime?Ni(i.readTime):Ve.min(),u=Vn.newNoDocument(a,l),m=i.removedTargetIds||[];t=new Bd([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=bg(n,i.document),l=i.removedTargetIds||[];t=new Bd([],l,a,null)}else{if(!("filter"in e))return ke(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new hD(a,l),m=i.targetId;t=new JE(m,u)}}return t}function ED(n,e){let t;if(e instanceof Ou)t={update:ub(n,e.key,e.value)};else if(e instanceof Fy)t={delete:Jg(n,e.key)};else if(e instanceof Ta)t={update:ub(n,e.key,e.data),updateMask:jD(e.fieldMask)};else{if(!(e instanceof lD))return ke(16599,{Vt:e.type});t={verify:Jg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const m=u.transform;if(m instanceof vu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof _u)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Su)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof bu)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw ke(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:SD(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ke(27497)})(n,e.precondition)),t}function TD(n,e){return n&&n.length>0?(ht(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?Ni(a.updateTime):Ni(l);return u.isEqual(Ve.min())&&(u=Ni(l)),new rD(u,a.transformResults||[])})(t,e)))):[]}function AD(n,e){return{documents:[nT(n,e.path)]}}function xD(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=nT(n,a);const l=(function(y){if(y.length!==0)return rT(Ws.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((v=>(function(T){return{field:ml(T.field),direction:RD(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=Xg(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function CD(n){let e=bD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ht(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(b){const T=iT(b);return T instanceof Ws&&jE(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(b){return b.map((T=>(function(P){return new yu(pl(P.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(T)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let T;return T=typeof b=="object"?b.value:b,Nf(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(b){const T=!!b.before,N=b.values||[];return new nf(N,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(b){const T=!b.before,N=b.values||[];return new nf(N,T)})(t.endAt)),KI(e,a,u,l,m,"F",g,y)}function ND(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=pl(t.unaryFilter.field);return cn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=pl(t.unaryFilter.field);return cn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=pl(t.unaryFilter.field);return cn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=pl(t.unaryFilter.field);return cn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(n):n.fieldFilter!==void 0?(function(t){return cn.create(pl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ws.create(t.compositeFilter.filters.map((i=>iT(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(n):ke(30097,{filter:n})}function RD(n){return gD[n]}function ID(n){return yD[n]}function DD(n){return vD[n]}function ml(n){return{fieldPath:n.canonicalString()}}function pl(n){return vn.fromServerFormat(n.fieldPath)}function rT(n){return n instanceof cn?(function(t){if(t.op==="=="){if(WS(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NAN"}};if(XS(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(WS(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NOT_NAN"}};if(XS(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ml(t.field),op:ID(t.op),value:t.value}}})(n):n instanceof Ws?(function(t){const i=t.getFilters().map((a=>rT(a)));return i.length===1?i[0]:{compositeFilter:{op:DD(t.op),filters:i}}})(n):ke(54877,{filter:n})}function jD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function aT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,t,i,a,l=Ve.min(),u=Ve.min(),m=_n.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new aa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.yt=e}}function OD(n){const e=CD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.Cn=new PD}addToCollectionParentIndex(e,t){return this.Cn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(pa.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(pa.min())}updateCollectionGroup(e,t,i){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class PD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new fn(At.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new fn(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oT=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(oT,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Nl(0)}static cr(){return new Nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="LruGarbageCollector",VD=1048576;function fb([n,e],[t,i]){const a=et(n,t);return a===0?et(e,i):a}class LD{constructor(e){this.Ir=e,this.buffer=new fn(fb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();fb(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UD{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(db,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ll(t)?we(db,"Ignoring IndexedDB error during garbage collection: ",t):await Vl(t)}await this.Vr(3e5)}))}}class zD{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return pe.resolve(Cf.ce);const i=new LD(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(hb)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,u,m,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,u=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(i=b,m=Date.now(),this.removeTargets(e,i,t)))).next((b=>(l=b,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(y=Date.now(),dl()<=Ze.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(m-u)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function BD(n,e){return new zD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this.changes=new vo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?pe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&ou(i.mutation,a,ds.empty(),Et.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,tt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=tt()){const a=so();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let u=Zc();return l.forEach(((m,g)=>{u=u.insert(m,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=so();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,tt())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,m)=>{t.set(u,m)}))}))}computeViews(e,t,i,a){let l=pr();const u=au(),m=(function(){return au()})();return t.forEach(((g,y)=>{const v=i.get(y.key);a.has(y.key)&&(v===void 0||v.mutation instanceof Ta)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),ou(v.mutation,y,v.mutation.getFieldMask(),Et.now())):u.set(y.key,ds.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,v)=>u.set(y,v))),t.forEach(((y,v)=>m.set(y,new qD(v,u.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=au();let a=new Mt(((u,m)=>u-m)),l=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const m of u)m.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let v=i.get(g)||ds.empty();v=m.applyToLocalView(y,v),i.set(g,v);const b=(a.get(m.batchId)||tt()).add(g);a=a.insert(m.batchId,b)}))})).next((()=>{const u=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,v=g.value,b=BE();v.forEach((T=>{if(!l.has(T)){const N=QE(t.get(T),i.get(T));N!==null&&b.set(T,N),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,b))}return pe.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(u){return Ne.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):PE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):pe.resolve(so());let m=mu,g=l;return u.next((y=>pe.forEach(y,((v,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),l.get(v)?pe.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{g=g.insert(v,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,tt()))).next((v=>({batchId:m,changes:zE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((i=>{let a=Zc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=Zc();return this.indexManager.getCollectionParents(e,l).next((m=>pe.forEach(m,(g=>{const y=(function(b,T){return new Ul(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,a).next((v=>{v.forEach(((b,T)=>{u=u.insert(b,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((u=>{l.forEach(((g,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,Vn.newInvalidDocument(v)))}));let m=Zc();return u.forEach(((g,y)=>{const v=l.get(g);v!==void 0&&ou(v.mutation,y,ds.empty(),Et.now()),jf(t,y)&&(m=m.insert(g,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return pe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ni(a.createTime)}})(t)),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:OD(a.bundledQuery),readTime:Ni(a.readTime)}})(t)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.overlays=new Mt(Ne.comparator),this.qr=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=so();return pe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),pe.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),pe.resolve()}getOverlaysForCollection(e,t,i){const a=so(),l=t.length+1,u=new Ne(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>i&&a.set(g.getKey(),g)}return pe.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Mt(((y,v)=>y-v));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=l.get(y.largestBatchId);v===null&&(v=so(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const m=so(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>m.set(y,v))),!(m.size()>=a)););return pe.resolve(m)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new uD(t,i));let l=this.qr.get(t);l===void 0&&(l=tt(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.Qr=new fn(yn.$r),this.Ur=new fn(yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new yn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new yn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ne(new At([])),i=new yn(t,e),a=new yn(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ne(new At([])),i=new yn(t,e),a=new yn(t,e+1);let l=tt();return this.Ur.forEachInRange([i,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new yn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class yn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ne.comparator(e.key,t.key)||et(e.Yr,t.Yr)}static Kr(e,t){return et(e.Yr,t.Yr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new fn(yn.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new cD(l,t,i,a);this.mutationQueue.push(u);for(const m of a)this.Zr=this.Zr.add(new yn(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return pe.resolve(u)}lookupMutationBatch(e,t){return pe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return pe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?Py:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new yn(t,0),a=new yn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(u=>{const m=this.Xr(u.Yr);l.push(m)})),pe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new fn(et);return t.forEach((a=>{const l=new yn(a,0),u=new yn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(m=>{i=i.add(m.Yr)}))})),pe.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Ne.isDocumentKey(l)||(l=l.child(""));const u=new yn(new Ne(l),0);let m=new fn(et);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===a&&(m=m.add(g.Yr)),!0)}),u),pe.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ht(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return pe.forEach(t.mutations,(a=>{const l=new yn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new yn(t,0),a=this.Zr.firstAfterOrEqual(i);return pe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.ri=e,this.docs=(function(){return new Mt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return pe.resolve(i?i.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let i=pr();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Vn.newInvalidDocument(a))})),pe.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=pr();const u=t.path,m=new Ne(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||AI(TI(v),i)<=0||(a.has(v.key)||jf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return pe.resolve(l)}getAllFromCollectionGroup(e,t,i,a){ke(9500)}ii(e,t){return pe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new XD(this)}getSize(e){return pe.resolve(this.size)}}class XD extends FD{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),pe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.persistence=e,this.si=new vo((t=>Uy(t)),zy),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Gy,this.targetCount=0,this.ai=Nl.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),pe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Nl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Pr(t),pe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((u,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),pe.waitFor(l).next((()=>a))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return pe.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),pe.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),pe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return pe.resolve(i)}containsKey(e,t){return pe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Cf(0),this.li=!1,this.li=!0,this.hi=new KD,this.referenceDelegate=e(this),this.Pi=new WD(this),this.indexManager=new MD,this.remoteDocumentCache=(function(a){return new QD(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new kD(t),this.Ii=new $D(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new YD(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){we("MemoryPersistence","Starting transaction:",e);const a=new JD(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return pe.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class JD extends CI{constructor(e){super(),this.currentSequenceNumber=e}}class Ky{constructor(e){this.persistence=e,this.Ri=new Gy,this.Vi=null}static mi(e){return new Ky(e)}get fi(){if(this.Vi)return this.Vi;throw ke(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),pe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,(i=>{const a=Ne.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ve.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return pe.or([()=>pe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class af{constructor(e,t){this.persistence=e,this.pi=new vo((i=>II(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=BD(this,t)}static mi(e,t){return new af(e,t)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return pe.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?pe.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((m=>{m||(i++,l.removeEntry(u,Ve.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),pe.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ld(e.data.value)),t}br(e,t,i){return pe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return pe.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=tt(),a=tt();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Yy(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return QN()?8:NI(Ln())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new ZD;return this.Ss(e,t,u).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,u,m.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(dl()<=Ze.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",fl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(dl()<=Ze.DEBUG&&we("QueryEngine","Query:",fl(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(dl()<=Ze.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",fl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ci(t))):pe.resolve())}ys(e,t){if(tb(t))return pe.resolve(null);let i=Ci(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=sf(t,null,"F"),i=Ci(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=tt(...l);return this.ps.getDocuments(e,u).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.Ds(t,m);return this.Cs(t,y,u,g.readTime)?this.ys(e,sf(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,i,a){return tb(t)||a.isEqual(Ve.min())?pe.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,a)?pe.resolve(null):(dl()<=Ze.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),fl(t)),this.vs(e,u,t,EI(a,mu)).next((m=>m)))}))}Ds(e,t){let i=new fn(LE(e));return t.forEach(((a,l)=>{jf(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return dl()<=Ze.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",fl(t)),this.ps.getDocumentsMatchingQuery(e,t,pa.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="LocalStore",tj=3e8;class nj{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Mt(et),this.xs=new vo((l=>Uy(l)),zy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function sj(n,e,t,i){return new nj(n,e,t,i)}async function cT(n,e){const t=ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],m=[];let g=tt();for(const y of a){u.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){m.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ls:y,removedBatchIds:u,addedBatchIds:m})))}))}))}function ij(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,v){const b=y.batch,T=b.keys();let N=pe.resolve();return T.forEach((P=>{N=N.next((()=>v.getEntry(g,P))).next((M=>{const L=y.docVersions.get(P);ht(L!==null,48541),M.version.compareTo(L)<0&&(b.applyToRemoteDocument(M,y),M.isValidDocument()&&(M.setReadTime(y.commitVersion),v.addEntry(M)))}))})),N.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=tt();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function uT(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function rj(n,e){const t=ze(n),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const m=[];e.targetChanges.forEach(((v,b)=>{const T=a.get(b);if(!T)return;m.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,b))));let N=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?N=N.withResumeToken(_n.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,i)),a=a.insert(b,N),(function(M,L,z){return M.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=tj?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(T,N,v)&&m.push(t.Pi.updateTargetData(l,N))}));let g=pr(),y=tt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),m.push(aj(l,u,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!i.isEqual(Ve.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((b=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));m.push(v)}return pe.waitFor(m).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=a,l)))}function aj(n,e,t){let i=tt(),a=tt();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=pr();return t.forEach(((m,g)=>{const y=l.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(Ve.min())?(e.removeEntry(m,g.readTime),u=u.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(m,g)):we(Qy,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{ks:u,qs:a}}))}function oj(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Py),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function lj(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,pe.resolve(a)):t.Pi.allocateTargetId(i).next((u=>(a=new aa(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function ey(n,e,t){const i=ze(n),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Ll(u))throw u;we(Qy,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function mb(n,e,t){const i=ze(n);let a=Ve.min(),l=tt();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,v){const b=ze(g),T=b.xs.get(v);return T!==void 0?pe.resolve(b.Ms.get(T)):b.Pi.getTargetData(y,v)})(i,u,Ci(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,m.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?a:Ve.min(),t?l:tt()))).next((m=>(cj(i,QI(e),m),{documents:m,Qs:l})))))}function cj(n,e,t){let i=n.Os.get(e)||Ve.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class pb{constructor(){this.activeTargetIds=tD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uj{constructor(){this.Mo=new pb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pb,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="ConnectivityMonitor";class yb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(gb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(gb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd=null;function ty(){return Rd===null?Rd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rd++,"0x"+Rd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="RestConnection",dj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===ef?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const u=ty(),m=this.zo(e,t.toUriEncodedString());we(wg,`Sending RPC '${e}' ${u}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,l);const{host:y}=new URL(m),v=wa(y);return this.Jo(e,m,g,i,v).then((b=>(we(wg,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw ho(wg,`RPC '${e}' ${u} failed with error: `,b,"url: ",m,"request:",i),b}))}Ho(e,t,i,a,l,u){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=dj[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="WebChannelConnection";class pj extends fj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const u=ty();return new Promise(((m,g)=>{const y=new cE;y.setWithCredentials(!0),y.listenOnce(uE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Vd.NO_ERROR:const b=y.getResponseJson();we(kn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),m(b);break;case Vd.TIMEOUT:we(kn,`RPC '${e}' ${u} timed out`),g(new Se(he.DEADLINE_EXCEEDED,"Request time out"));break;case Vd.HTTP_ERROR:const T=y.getStatus();if(we(kn,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let N=y.getResponseJson();Array.isArray(N)&&(N=N[0]);const P=N?.error;if(P&&P.status&&P.message){const M=(function(z){const H=z.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(H)>=0?H:he.UNKNOWN})(P.status);g(new Se(M,P.message))}else g(new Se(he.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Se(he.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{we(kn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);we(kn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",v,i,15)}))}T_(e,t,i){const a=ty(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=fE(),m=dE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const v=l.join("");we(kn,`Creating RPC '${e}' stream ${a}: ${v}`,g);const b=u.createWebChannel(v,g);this.I_(b);let T=!1,N=!1;const P=new mj({Yo:L=>{N?we(kn,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(T||(we(kn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),T=!0),we(kn,`RPC '${e}' stream ${a} sending:`,L),b.send(L))},Zo:()=>b.close()}),M=(L,z,H)=>{L.listen(z,(G=>{try{H(G)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return M(b,Jc.EventType.OPEN,(()=>{N||(we(kn,`RPC '${e}' stream ${a} transport opened.`),P.o_())})),M(b,Jc.EventType.CLOSE,(()=>{N||(N=!0,we(kn,`RPC '${e}' stream ${a} transport closed`),P.a_(),this.E_(b))})),M(b,Jc.EventType.ERROR,(L=>{N||(N=!0,ho(kn,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),P.a_(new Se(he.UNAVAILABLE,"The operation could not be completed")))})),M(b,Jc.EventType.MESSAGE,(L=>{if(!N){const z=L.data[0];ht(!!z,16349);const H=z,G=H?.error||H[0]?.error;if(G){we(kn,`RPC '${e}' stream ${a} received error:`,G);const ie=G.status;let re=(function(I){const A=on[I];if(A!==void 0)return WE(A)})(ie),ae=G.message;re===void 0&&(re=he.INTERNAL,ae="Unknown error status: "+ie+" with message "+G.message),N=!0,P.a_(new Se(re,ae)),b.close()}else we(kn,`RPC '${e}' stream ${a} received:`,z),P.u_(z)}})),M(m,hE.STAT_EVENT,(L=>{L.stat===qg.PROXY?we(kn,`RPC '${e}' stream ${a} detected buffering proxy`):L.stat===qg.NOPROXY&&we(kn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Eg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(n){return new _D(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&we("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="PersistentStream";class dT{constructor(e,t,i,a,l,u,m,g){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new Se(he.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(vb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(we(vb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gj extends dT{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=wD(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ve.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ve.min():u.readTime?Ni(u.readTime):Ve.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Zg(this.serializer),t.addTarget=(function(l,u){let m;const g=u.target;if(m=Yg(g)?{documents:AD(l,g)}:{query:xD(l,g).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=eT(l,u.resumeToken);const y=Xg(l,u.expectedCount);y!==null&&(m.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ve.min())>0){m.readTime=rf(l,u.snapshotVersion.toTimestamp());const y=Xg(l,u.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const i=ND(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Zg(this.serializer),t.removeTarget=e,this.q_(t)}}class yj extends dT{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=TD(e.writeResults,e.commitTime),i=Ni(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Zg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>ED(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{}class _j extends vj{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Se(he.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,Wg(t,i),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Se(he.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.Ho(e,Wg(t,i),a,u,m,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(he.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Sj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mr(t),this.aa=!1):we("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="RemoteStore";class bj{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{_o(this)&&(we(fo,"Restarting streams for network reachability change."),await(async function(g){const y=ze(g);y.Ea.add(4),await Pu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Vf(y)})(this))}))})),this.Ra=new Sj(i,a)}}async function Vf(n){if(_o(n))for(const e of n.da)await e(!0)}async function Pu(n){for(const e of n.da)await e(!1)}function fT(n,e){const t=ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Zy(t)?Jy(t):zl(t).O_()&&Wy(t,e))}function Xy(n,e){const t=ze(n),i=zl(t);t.Ia.delete(e),i.O_()&&mT(t,e),t.Ia.size===0&&(i.O_()?i.L_():_o(t)&&t.Ra.set("Unknown"))}function Wy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zl(n).Y_(e)}function mT(n,e){n.Va.Ue(e),zl(n).Z_(e)}function Jy(n){n.Va=new pD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),zl(n).start(),n.Ra.ua()}function Zy(n){return _o(n)&&!zl(n).x_()&&n.Ia.size>0}function _o(n){return ze(n).Ea.size===0}function pT(n){n.Va=void 0}async function wj(n){n.Ra.set("Online")}async function Ej(n){n.Ia.forEach(((e,t)=>{Wy(n,e)}))}async function Tj(n,e){pT(n),Zy(n)?(n.Ra.ha(e),Jy(n)):n.Ra.set("Unknown")}async function Aj(n,e,t){if(n.Ra.set("Online"),e instanceof ZE&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const m of l.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,u),a.Ia.delete(m),a.Va.removeTarget(m))})(n,e)}catch(i){we(fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await of(n,i)}else if(e instanceof Bd?n.Va.Ze(e):e instanceof JE?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ve.min()))try{const i=await uT(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const m=l.Va.Tt(u);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,u))}})),m.targetMismatches.forEach(((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(_n.EMPTY_BYTE_STRING,v.snapshotVersion)),mT(l,g);const b=new aa(v.target,g,y,v.sequenceNumber);Wy(l,b)})),l.remoteSyncer.applyRemoteEvent(m)})(n,t)}catch(i){we(fo,"Failed to raise snapshot:",i),await of(n,i)}}async function of(n,e,t){if(!Ll(e))throw e;n.Ea.add(1),await Pu(n),n.Ra.set("Offline"),t||(t=()=>uT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{we(fo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Vf(n)}))}function gT(n,e){return e().catch((t=>of(n,t,e)))}async function Lf(n){const e=ze(n),t=_a(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Py;for(;xj(e);)try{const a=await oj(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,Cj(e,a)}catch(a){await of(e,a)}yT(e)&&vT(e)}function xj(n){return _o(n)&&n.Ta.length<10}function Cj(n,e){n.Ta.push(e);const t=_a(n);t.O_()&&t.X_&&t.ea(e.mutations)}function yT(n){return _o(n)&&!_a(n).x_()&&n.Ta.length>0}function vT(n){_a(n).start()}async function Nj(n){_a(n).ra()}async function Rj(n){const e=_a(n);for(const t of n.Ta)e.ea(t.mutations)}async function Ij(n,e,t){const i=n.Ta.shift(),a=qy.from(i,e,t);await gT(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Lf(n)}async function Dj(n,e){e&&_a(n).X_&&await(async function(i,a){if((function(u){return dD(u)&&u!==he.ABORTED})(a.code)){const l=i.Ta.shift();_a(i).B_(),await gT(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Lf(i)}})(n,e),yT(n)&&vT(n)}async function _b(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),we(fo,"RemoteStore received new credentials");const i=_o(t);t.Ea.add(3),await Pu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Vf(t)}async function jj(n,e){const t=ze(n);e?(t.Ea.delete(2),await Vf(t)):e||(t.Ea.add(2),await Pu(t),t.Ra.set("Unknown"))}function zl(n){return n.ma||(n.ma=(function(t,i,a){const l=ze(t);return l.sa(),new gj(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:wj.bind(null,n),t_:Ej.bind(null,n),r_:Tj.bind(null,n),H_:Aj.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Zy(n)?Jy(n):n.Ra.set("Unknown")):(await n.ma.stop(),pT(n))}))),n.ma}function _a(n){return n.fa||(n.fa=(function(t,i,a){const l=ze(t);return l.sa(),new yj(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Nj.bind(null,n),r_:Dj.bind(null,n),ta:Rj.bind(null,n),na:Ij.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Lf(n)):(await n.fa.stop(),n.Ta.length>0&&(we(fo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,m=new ev(e,t,u,a,l);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tv(n,e){if(mr("AsyncQueue",`${e}: ${n}`),Ll(n))return new Se(he.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{static emptySet(e){return new vl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ne.comparator(t.key,i.key):(t,i)=>Ne.comparator(t.key,i.key),this.keyedMap=Zc(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new vl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.ga=new Mt(Ne.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ke(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Rl{constructor(e,t,i,a,l,u,m,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach((m=>{u.push({type:0,doc:m})})),new Rl(e,t,vl.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Oj{constructor(){this.queries=bb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=ze(t),l=a.queries;a.queries=bb(),l.forEach(((u,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new Se(he.ABORTED,"Firestore shutting down"))}}function bb(){return new vo((n=>VE(n)),Df)}async function nv(n,e){const t=ze(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new kj,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const m=tv(u,`Initialization of query '${fl(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&iv(t)}async function sv(n,e){const t=ze(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Mj(n,e){const t=ze(n);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const m of u.Sa)m.Fa(a)&&(i=!0);u.wa=a}}i&&iv(t)}function Pj(n,e,t){const i=ze(n),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function iv(n){n.Ca.forEach((e=>{e.next()}))}var ny,wb;(wb=ny||(ny={})).Ma="default",wb.Cache="cache";class rv{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Rl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ny.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.key=e}}class ST{constructor(e){this.key=e}}class Vj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=tt(),this.mutatedKeys=tt(),this.eu=LE(e),this.tu=new vl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Sb,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,b)=>{const T=a.get(v),N=jf(this.query,b)?b:null,P=!!T&&this.mutatedKeys.has(T.key),M=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let L=!1;T&&N?T.data.isEqual(N.data)?P!==M&&(i.track({type:3,doc:N}),L=!0):this.su(T,N)||(i.track({type:2,doc:N}),L=!0,(g&&this.eu(N,g)>0||y&&this.eu(N,y)<0)&&(m=!0)):!T&&N?(i.track({type:0,doc:N}),L=!0):T&&!N&&(i.track({type:1,doc:T}),L=!0,(g||y)&&(m=!0)),L&&(N?(u=u.add(N),l=M?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,b)=>(function(N,P){const M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Rt:L})}};return M(N)-M(P)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(i),a=a??!1;const m=t&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,y=g!==this.Za;return this.Za=g,u.length!==0||y?{snapshot:new Rl(this.query,e.tu,l,u,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Sb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=tt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new ST(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new _T(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=tt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const av="SyncEngine";class Lj{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Uj{constructor(e){this.key=e,this.hu=!1}}class zj{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new vo((m=>VE(m)),Df),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(Ne.comparator),this.Au=new Map,this.Ru=new Gy,this.Vu={},this.mu=new Map,this.fu=Nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Bj(n,e,t=!0){const i=xT(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await bT(i,e,t,!0),a}async function Fj(n,e){const t=xT(n);await bT(t,e,!0,!1)}async function bT(n,e,t,i){const a=await lj(n.localStore,Ci(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let m;return i&&(m=await qj(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&fT(n.remoteStore,a),m}async function qj(n,e,t,i,a){n.pu=(b,T,N)=>(async function(M,L,z,H){let G=L.view.ru(z);G.Cs&&(G=await mb(M.localStore,L.query,!1).then((({documents:j})=>L.view.ru(j,G))));const ie=H&&H.targetChanges.get(L.targetId),re=H&&H.targetMismatches.get(L.targetId)!=null,ae=L.view.applyChanges(G,M.isPrimaryClient,ie,re);return Tb(M,L.targetId,ae.au),ae.snapshot})(n,b,T,N);const l=await mb(n.localStore,e,!0),u=new Vj(e,l.Qs),m=u.ru(l.documents),g=Mu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),y=u.applyChanges(m,n.isPrimaryClient,g);Tb(n,t,y.au);const v=new Lj(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function Hj(n,e,t){const i=ze(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((u=>!Df(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await ey(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Xy(i.remoteStore,a.targetId),sy(i,a.targetId)})).catch(Vl)):(sy(i,a.targetId),await ey(i.localStore,a.targetId,!0))}async function $j(n,e){const t=ze(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Xy(t.remoteStore,i.targetId))}async function Gj(n,e,t){const i=Zj(n);try{const a=await(function(u,m){const g=ze(u),y=Et.now(),v=m.reduce(((N,P)=>N.add(P.key)),tt());let b,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let P=pr(),M=tt();return g.Ns.getEntries(N,v).next((L=>{P=L,P.forEach(((z,H)=>{H.isValidDocument()||(M=M.add(z))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,P))).next((L=>{b=L;const z=[];for(const H of m){const G=oD(H,b.get(H.key).overlayedDocument);G!=null&&z.push(new Ta(H.key,G,RE(G.value.mapValue),ks.exists(!0)))}return g.mutationQueue.addMutationBatch(N,y,z,m)})).next((L=>{T=L;const z=L.applyToLocalDocumentSet(b,M);return g.documentOverlayCache.saveOverlays(N,L.batchId,z)}))})).then((()=>({batchId:T.batchId,changes:zE(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,m,g){let y=u.Vu[u.currentUser.toKey()];y||(y=new Mt(et)),y=y.insert(m,g),u.Vu[u.currentUser.toKey()]=y})(i,a.batchId,t),await Vu(i,a.changes),await Lf(i.remoteStore)}catch(a){const l=tv(a,"Failed to persist write");t.reject(l)}}async function wT(n,e){const t=ze(n);try{const i=await rj(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(ht(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?ht(u.hu,14607):a.removedDocuments.size>0&&(ht(u.hu,42227),u.hu=!1))})),await Vu(t,i,e)}catch(i){await Vl(i)}}function Eb(n,e,t){const i=ze(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,u)=>{const m=u.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(u,m){const g=ze(u);g.onlineState=m;let y=!1;g.queries.forEach(((v,b)=>{for(const T of b.Sa)T.va(m)&&(y=!0)})),y&&iv(g)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Kj(n,e,t){const i=ze(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let u=new Mt(Ne.comparator);u=u.insert(l,Vn.newNoDocument(l,Ve.min()));const m=tt().add(l),g=new Mf(Ve.min(),new Map,new Mt(et),u,m);await wT(i,g),i.du=i.du.remove(l),i.Au.delete(e),ov(i)}else await ey(i.localStore,e,!1).then((()=>sy(i,e,t))).catch(Vl)}async function Yj(n,e){const t=ze(n),i=e.batch.batchId;try{const a=await ij(t.localStore,e);TT(t,i,null),ET(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Vu(t,a)}catch(a){await Vl(a)}}async function Qj(n,e,t){const i=ze(n);try{const a=await(function(u,m){const g=ze(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,m).next((b=>(ht(b!==null,37113),v=b.keys(),g.mutationQueue.removeMutationBatch(y,b)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(i.localStore,e);TT(i,e,t),ET(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Vu(i,a)}catch(a){await Vl(a)}}function ET(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function TT(n,e,t){const i=ze(n);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function sy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||AT(n,i)}))}function AT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Xy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ov(n))}function Tb(n,e,t){for(const i of t)i instanceof _T?(n.Ru.addReference(i.key,e),Xj(n,i)):i instanceof ST?(we(av,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||AT(n,i.key)):ke(19791,{wu:i})}function Xj(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(we(av,"New document in limbo: "+t),n.Eu.add(i),ov(n))}function ov(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ne(At.fromString(e)),i=n.fu.next();n.Au.set(i,new Uj(t)),n.du=n.du.insert(t,i),fT(n.remoteStore,new aa(Ci(If(t.path)),i,"TargetPurposeLimboResolution",Cf.ce))}}async function Vu(n,e,t){const i=ze(n),a=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{u.push(i.pu(g,e,t).then((y=>{if((y||t)&&i.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(y){a.push(y);const v=Yy.As(g.targetId,y);l.push(v)}})))})),await Promise.all(u),i.Pu.H_(a),await(async function(g,y){const v=ze(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>pe.forEach(y,(T=>pe.forEach(T.Es,(N=>v.persistence.referenceDelegate.addReference(b,T.targetId,N))).next((()=>pe.forEach(T.ds,(N=>v.persistence.referenceDelegate.removeReference(b,T.targetId,N)))))))))}catch(b){if(!Ll(b))throw b;we(Qy,"Failed to update sequence numbers: "+b)}for(const b of y){const T=b.targetId;if(!b.fromCache){const N=v.Ms.get(T),P=N.snapshotVersion,M=N.withLastLimboFreeSnapshotVersion(P);v.Ms=v.Ms.insert(T,M)}}})(i.localStore,l))}async function Wj(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){we(av,"User change. New user:",e.toKey());const i=await cT(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new Se(he.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vu(t,i.Ls)}}function Jj(n,e){const t=ze(n),i=t.Au.get(e);if(i&&i.hu)return tt().add(i.key);{let a=tt();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const m=t.Tu.get(u);a=a.unionWith(m.view.nu)}return a}}function xT(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kj.bind(null,e),e.Pu.H_=Mj.bind(null,e.eventManager),e.Pu.yu=Pj.bind(null,e.eventManager),e}function Zj(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qj.bind(null,e),e}class lf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return sj(this.persistence,new ej,e.initialUser,this.serializer)}Cu(e){return new lT(Ky.mi,this.serializer)}Du(e){return new uj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lf.provider={build:()=>new lf};class e4 extends lf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ht(this.persistence.referenceDelegate instanceof af,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new UD(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new lT((i=>af.mi(i,t)),this.serializer)}}class iy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Eb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wj.bind(null,this.syncEngine),await jj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Oj})()}createDatastore(e){const t=Pf(e.databaseInfo.databaseId),i=(function(l){return new pj(l)})(e.databaseInfo);return(function(l,u,m,g){return new _j(l,u,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,u,m){return new bj(i,a,l,u,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Eb(this.syncEngine,t,0)),(function(){return yb.v()?new yb:new hj})())}createSyncEngine(e,t){return(function(a,l,u,m,g,y,v){const b=new zj(a,l,u,m,g,y);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=ze(t);we(fo,"RemoteStore shutting down."),i.Ea.add(5),await Pu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}iy.provider={build:()=>new iy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="FirestoreClient";class t4{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Pn.UNAUTHENTICATED,this.clientId=Af.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{we(Sa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(we(Sa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=tv(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Tg(n,e){n.asyncQueue.verifyOperationInProgress(),we(Sa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await cT(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Ab(n,e){n.asyncQueue.verifyOperationInProgress();const t=await n4(n);we(Sa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>_b(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>_b(e.remoteStore,a))),n._onlineComponents=e}async function n4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(Sa,"Using user provided OfflineComponentProvider");try{await Tg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===he.FAILED_PRECONDITION||a.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;ho("Error using user provided cache. Falling back to memory cache: "+t),await Tg(n,new lf)}}else we(Sa,"Using default OfflineComponentProvider"),await Tg(n,new e4(void 0));return n._offlineComponents}async function CT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(Sa,"Using user provided OnlineComponentProvider"),await Ab(n,n._uninitializedComponentsProvider._online)):(we(Sa,"Using default OnlineComponentProvider"),await Ab(n,new iy))),n._onlineComponents}function s4(n){return CT(n).then((e=>e.syncEngine))}async function cf(n){const e=await CT(n),t=e.eventManager;return t.onListen=Bj.bind(null,e.syncEngine),t.onUnlisten=Hj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Fj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$j.bind(null,e.syncEngine),t}function i4(n,e,t={}){const i=new ur;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,m,g,y){const v=new lv({next:T=>{v.Nu(),u.enqueueAndForget((()=>sv(l,b)));const N=T.docs.has(m);!N&&T.fromCache?y.reject(new Se(he.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&T.fromCache&&g&&g.source==="server"?y.reject(new Se(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),b=new rv(If(m.path),v,{includeMetadataChanges:!0,qa:!0});return nv(l,b)})(await cf(n),n.asyncQueue,e,t,i))),i.promise}function r4(n,e,t={}){const i=new ur;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,m,g,y){const v=new lv({next:T=>{v.Nu(),u.enqueueAndForget((()=>sv(l,b))),T.fromCache&&g.source==="server"?y.reject(new Se(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),b=new rv(m,v,{includeMetadataChanges:!0,qa:!0});return nv(l,b)})(await cf(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="firestore.googleapis.com",Cb=!0;class Nb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RT,this.ssl=Cb}else this.host=e.host,this.ssl=e.ssl??Cb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VD)throw new Se(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Se(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Se(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Se(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uf{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new gE;switch(i.type){case"firstParty":return new gI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=xb.get(t);i&&(we("ComponentProvider","Removing Datastore"),xb.delete(t),i.terminate())})(this),Promise.resolve()}}function IT(n,e,t,i={}){n=Fn(n,Uf);const a=wa(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},m=`${e}:${t}`;a&&(Iy(`https://${m}`),Dy("Firestore",!0)),l.host!==RT&&l.host!==m&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:a,emulatorOptions:i};if(!lo(g,u)&&(n._setSettings(g),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=Pn.MOCK_USER;else{y=nE(i.mockUserToken,n._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new Se(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Pn(b)}n._authCredentials=new fI(new pE(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Li(this.firestore,e,this._query)}}class kt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ku(t,kt._jsonSchema))return new kt(e,i||null,new Ne(At.fromString(t.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:un("string",kt._jsonSchemaVersion),referencePath:un("string")};class hr extends Li{constructor(e,t,i){super(e,t,If(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Ne(e))}withConverter(e){return new hr(this.firestore,e,this._path)}}function Xe(n,e,...t){if(n=Xt(n),yE("collection","path",e),n instanceof Uf){const i=At.fromString(e,...t);return BS(i),new hr(n,null,i)}{if(!(n instanceof kt||n instanceof hr))throw new Se(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(At.fromString(e,...t));return BS(i),new hr(n.firestore,null,i)}}function De(n,e,...t){if(n=Xt(n),arguments.length===1&&(e=Af.newId()),yE("doc","path",e),n instanceof Uf){const i=At.fromString(e,...t);return zS(i),new kt(n,null,new Ne(i))}{if(!(n instanceof kt||n instanceof hr))throw new Se(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(At.fromString(e,...t));return zS(i),new kt(n.firestore,n instanceof hr?n.converter:null,new Ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="AsyncQueue";class Ib{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hT(this,"async_queue_retry"),this._c=()=>{const i=Eg();i&&we(Rb,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Eg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Eg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ur;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ll(e))throw e;we(Rb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,mr("INTERNAL UNHANDLED ERROR: ",Db(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=ev.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ke(47125,{Pc:Db(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Db(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Oi extends Uf{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Ib,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ib(e),this._firestoreClient=void 0,await e}}}function DT(n,e){const t=typeof n=="object"?n:Oy(),i=typeof n=="string"?n:ef,a=Tf(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=Zw("firestore");l&&IT(a,...l)}return a}function Lu(n){if(n._terminated)throw new Se(he.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||a4(n),n._firestoreClient}function a4(n){const e=n._freezeSettings(),t=(function(a,l,u,m){return new kI(a,l,u,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,NT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new t4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._byteString=e}static fromBase64String(e){try{return new us(_n.fromBase64String(e))}catch(t){throw new Se(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new us(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:us._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ku(e,us._jsonSchema))return us.fromBase64String(e.bytes)}}us._jsonSchemaVersion="firestore/bytes/1.0",us._jsonSchema={type:un("string",us._jsonSchemaVersion),bytes:un("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qs._jsonSchemaVersion}}static fromJSON(e){if(ku(e,Qs._jsonSchema))return new Qs(e.latitude,e.longitude)}}Qs._jsonSchemaVersion="firestore/geoPoint/1.0",Qs._jsonSchema={type:un("string",Qs._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ku(e,Xs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Xs(e.vectorValues);throw new Se(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xs._jsonSchemaVersion="firestore/vectorValue/1.0",Xs._jsonSchema={type:un("string",Xs._jsonSchemaVersion),vectorValues:un("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=/^__.*__$/;class l4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ta(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ou(e,this.data,t,this.fieldTransforms)}}class jT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ta(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ac:n})}}class cv{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return uf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kT(this.Ac)&&o4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class c4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Pf(e)}Cc(e,t,i,a=!1){return new cv({Ac:e,methodName:t,Dc:i,path:vn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zf(n){const e=n._freezeSettings(),t=Pf(n._databaseId);return new c4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function OT(n,e,t,i,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);dv("Data must be an object, but it was:",u,i);const m=MT(i,u);let g,y;if(l.merge)g=new ds(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const T=ry(e,b,t);if(!u.contains(T))throw new Se(he.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);VT(v,T)||v.push(T)}g=new ds(v),y=u.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,y=u.fieldTransforms;return new l4(new Wn(m),g,y)}class zu extends Bl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zu}}class uv extends Bl{_toFieldTransform(e){return new YE(e.path,new vu)}isEqual(e){return e instanceof uv}}class hv extends Bl{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new bu(e.serializer,qE(e.serializer,this.Fc));return new YE(e.path,t)}isEqual(e){return e instanceof hv&&this.Fc===e.Fc}}function u4(n,e,t,i){const a=n.Cc(1,e,t);dv("Data must be an object, but it was:",a,i);const l=[],u=Wn.empty();Ea(i,((g,y)=>{const v=fv(e,g,t);y=Xt(y);const b=a.yc(v);if(y instanceof zu)l.push(v);else{const T=Bu(y,b);T!=null&&(l.push(v),u.set(v,T))}}));const m=new ds(l);return new jT(u,m,a.fieldTransforms)}function h4(n,e,t,i,a,l){const u=n.Cc(1,e,t),m=[ry(e,i,t)],g=[a];if(l.length%2!=0)throw new Se(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)m.push(ry(e,l[T])),g.push(l[T+1]);const y=[],v=Wn.empty();for(let T=m.length-1;T>=0;--T)if(!VT(y,m[T])){const N=m[T];let P=g[T];P=Xt(P);const M=u.yc(N);if(P instanceof zu)y.push(N);else{const L=Bu(P,M);L!=null&&(y.push(N),v.set(N,L))}}const b=new ds(y);return new jT(v,b,u.fieldTransforms)}function d4(n,e,t,i=!1){return Bu(t,n.Cc(i?4:3,e))}function Bu(n,e){if(PT(n=Xt(n)))return dv("Unsupported field value:",e,n),MT(n,e);if(n instanceof Bl)return(function(i,a){if(!kT(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let u=0;for(const m of i){let g=Bu(m,a.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=Xt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qE(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Et.fromDate(i);return{timestampValue:rf(a.serializer,l)}}if(i instanceof Et){const l=new Et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:rf(a.serializer,l)}}if(i instanceof Qs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof us)return{bytesValue:eT(a.serializer,i._byteString)};if(i instanceof kt){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:$y(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Xs)return(function(u,m){return{mapValue:{fields:{[CE]:{stringValue:NE},[tf]:{arrayValue:{values:u.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return By(m.serializer,y)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${xf(i)}`)})(n,e)}function MT(n,e){const t={};return bE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ea(n,((i,a)=>{const l=Bu(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function PT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof Qs||n instanceof us||n instanceof kt||n instanceof Bl||n instanceof Xs)}function dv(n,e,t){if(!PT(t)||!_E(t)){const i=xf(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function ry(n,e,t){if((e=Xt(e))instanceof Uu)return e._internalPath;if(typeof e=="string")return fv(n,e);throw uf("Field path arguments must be of type string or ",n,!1,void 0,t)}const f4=new RegExp("[~\\*/\\[\\]]");function fv(n,e,t){if(e.search(f4)>=0)throw uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Uu(...e.split("."))._internalPath}catch{throw uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uf(n,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${i}`),u&&(g+=` in document ${a}`),g+=")"),new Se(he.INVALID_ARGUMENT,m+n+g)}function VT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new m4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Bf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class m4 extends LT{data(){return super.data()}}function Bf(n,e){return typeof e=="string"?fv(n,e):e instanceof Uu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Se(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mv{}class Ff extends mv{}function Rn(n,e,...t){let i=[];e instanceof mv&&i.push(e),i=i.concat(t),(function(l){const u=l.filter((g=>g instanceof qf)).length,m=l.filter((g=>g instanceof Fu)).length;if(u>1||u>0&&m>0)throw new Se(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class Fu extends Ff{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Fu(e,t,i)}_apply(e){const t=this._parse(e);return zT(e._query,t),new Li(e.firestore,e.converter,Qg(e._query,t))}_parse(e){const t=zf(e.firestore);return(function(l,u,m,g,y,v,b){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Se(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Ob(b,v);const P=[];for(const M of b)P.push(kb(g,l,M));T={arrayValue:{values:P}}}else T=kb(g,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Ob(b,v),T=d4(m,u,b,v==="in"||v==="not-in");return cn.create(y,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Mn(n,e,t){const i=e,a=Bf("where",n);return Fu._create(a,i,t)}class qf extends mv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qf(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ws.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const m=l.getFlattenedFilters();for(const g of m)zT(u,g),u=Qg(u,g)})(e._query,t),new Li(e.firestore,e.converter,Qg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hf extends Ff{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hf(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new Se(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Se(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yu(l,u)})(e._query,this._field,this._direction);return new Li(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new Ul(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function ha(n,e="asc"){const t=e,i=Bf("orderBy",n);return Hf._create(i,t)}class $f extends Ff{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new $f(e,t,i)}_apply(e){return new Li(e.firestore,e.converter,sf(e._query,this._limit,this._limitType))}}function hf(n){return wI("limit",n),$f._create("limit",n,"F")}function kb(n,e,t){if(typeof(t=Xt(t))=="string"){if(t==="")throw new Se(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PE(e)&&t.indexOf("/")!==-1)throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(At.fromString(t));if(!Ne.isDocumentKey(i))throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return QS(n,new Ne(i))}if(t instanceof kt)return QS(n,t._key);throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xf(t)}.`)}function Ob(n,e){if(!Array.isArray(n)||n.length===0)throw new Se(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zT(n,e){const t=(function(a,l){for(const u of a)for(const m of u.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Se(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class BT{convertValue(e,t="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ya(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ea(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[tf].arrayValue?.values?.map((i=>Qt(i.doubleValue)));return new Xs(t)}convertGeoPoint(e){return new Qs(Qt(e.latitude),Qt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Rf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const t=ga(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=At.fromString(e);ht(aT(i),9688,{name:e});const a=new Al(i.get(1),i.get(3)),l=new Ne(i.popFirst(5));return a.isEqual(t)||mr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class gl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends LT{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Bf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=da._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:un("string",da._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class lu extends da{data(e={}){return super.data(e)}}class fa{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new gl(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new lu(this._firestore,this._userDataWriter,i.key,i,new gl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((m=>{const g=new lu(a._firestore,a._userDataWriter,m.doc.key,m.doc,new gl(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new lu(a._firestore,a._userDataWriter,m.doc.key,m.doc,new gl(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,v=-1;return m.type!==0&&(y=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),v=u.indexOf(m.doc.key)),{type:p4(m.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Af.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function p4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n){n=Fn(n,kt);const e=Fn(n.firestore,Oi);return i4(Lu(e),n._key).then((t=>qT(e,n,t)))}fa._jsonSchemaVersion="firestore/querySnapshot/1.0",fa._jsonSchema={type:un("string",fa._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};class pv extends BT{constructor(e){super(),this.firestore=e}convertBytes(e){return new us(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}function Bt(n){n=Fn(n,Li);const e=Fn(n.firestore,Oi),t=Lu(e),i=new pv(e);return UT(n._query),r4(t,n._query).then((a=>new fa(e,i,n,a)))}function ar(n,e,t){n=Fn(n,kt);const i=Fn(n.firestore,Oi),a=FT(n.converter,e,t);return qu(i,[OT(zf(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ks.none())])}function jt(n,e,t,...i){n=Fn(n,kt);const a=Fn(n.firestore,Oi),l=zf(a);let u;return u=typeof(e=Xt(e))=="string"||e instanceof Uu?h4(l,"updateDoc",n._key,e,t,i):u4(l,"updateDoc",n._key,e),qu(a,[u.toMutation(n._key,ks.exists(!0))])}function Ds(n){return qu(Fn(n.firestore,Oi),[new Fy(n._key,ks.none())])}function Si(n,e){const t=Fn(n.firestore,Oi),i=De(n),a=FT(n.converter,e);return qu(t,[OT(zf(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,ks.exists(!1))]).then((()=>i))}function oa(n,...e){n=Xt(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||jb(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(jb(e[i])){const g=e[i];e[i]=g.next?.bind(g),e[i+1]=g.error?.bind(g),e[i+2]=g.complete?.bind(g)}let l,u,m;if(n instanceof kt)u=Fn(n.firestore,Oi),m=If(n._key.path),l={next:g=>{e[i]&&e[i](qT(u,n,g))},error:e[i+1],complete:e[i+2]};else{const g=Fn(n,Li);u=Fn(g.firestore,Oi),m=g._query;const y=new pv(u);l={next:v=>{e[i]&&e[i](new fa(u,y,g,v))},error:e[i+1],complete:e[i+2]},UT(n._query)}return(function(y,v,b,T){const N=new lv(T),P=new rv(v,N,b);return y.asyncQueue.enqueueAndForget((async()=>nv(await cf(y),P))),()=>{N.Nu(),y.asyncQueue.enqueueAndForget((async()=>sv(await cf(y),P)))}})(Lu(u),m,a,l)}function qu(n,e){return(function(i,a){const l=new ur;return i.asyncQueue.enqueueAndForget((async()=>Gj(await s4(i),a,l))),l.promise})(Lu(n),e)}function qT(n,e,t){const i=t.docs.get(e._key),a=new pv(n);return new da(n,a,e._key,i,new gl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(){return new zu("deleteField")}function Oe(){return new uv("serverTimestamp")}function $T(n){return new hv("increment",n)}(function(e,t=!0){(function(a){Pl=a})(yo),co(new ma("firestore",((i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),m=new Oi(new mI(i.getProvider("auth-internal")),new yI(u,i.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Se(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(y.options.projectId,v)})(u,a),u);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),xi(PS,VS,e),xi(PS,VS,"esm2020")})();const g4=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:BT,Bytes:us,CollectionReference:hr,DocumentReference:kt,DocumentSnapshot:da,FieldPath:Uu,FieldValue:Bl,Firestore:Oi,FirestoreError:Se,GeoPoint:Qs,Query:Li,QueryCompositeFilterConstraint:qf,QueryConstraint:Ff,QueryDocumentSnapshot:lu,QueryFieldFilterConstraint:Fu,QueryLimitConstraint:$f,QueryOrderByConstraint:Hf,QuerySnapshot:fa,SnapshotMetadata:gl,Timestamp:Et,VectorValue:Xs,_AutoId:Af,_ByteString:_n,_DatabaseId:Al,_DocumentKey:Ne,_EmptyAuthCredentialsProvider:gE,_FieldPath:vn,_cast:Fn,_logWarn:ho,_validateIsNotUsedTogether:vE,addDoc:Si,collection:Xe,connectFirestoreEmulator:IT,deleteDoc:Ds,deleteField:HT,doc:De,ensureFirestoreConfigured:Lu,executeWrite:qu,getDoc:Yt,getDocs:Bt,getFirestore:DT,increment:$T,limit:hf,onSnapshot:oa,orderBy:ha,query:Rn,serverTimestamp:Oe,setDoc:ar,updateDoc:jt,where:Mn},Symbol.toStringTag,{value:"Module"}));var y4="firebase",v4="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi(y4,v4,"app");function GT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _4=GT,KT=new Du("auth","Firebase",GT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new jy("@firebase/auth");function S4(n,...e){df.logLevel<=Ze.WARN&&df.warn(`Auth (${yo}): ${n}`,...e)}function Fd(n,...e){df.logLevel<=Ze.ERROR&&df.error(`Auth (${yo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(n,...e){throw gv(n,...e)}function Ri(n,...e){return gv(n,...e)}function YT(n,e,t){const i={..._4(),[e]:t};return new Du("auth","Firebase",i).create(e,{appName:n.name})}function ro(n){return YT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return KT.create(n,...e)}function Pe(n,e,...t){if(!n)throw gv(e,...t)}function or(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Fd(e),new Error(e)}function yr(n,e){n||or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(){return typeof self<"u"&&self.location?.href||""}function b4(){return Mb()==="http:"||Mb()==="https:"}function Mb(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(b4()||GN()||"connection"in navigator)?navigator.onLine:!0}function E4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t){this.shortDelay=e,this.longDelay=t,yr(t>e,"Short delay should be less than long delay!"),this.isMobile=qN()||KN()}get(){return w4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(n,e){yr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],x4=new Hu(3e4,6e4);function vv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Fl(n,e,t,i,a={}){return XT(n,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const m=ju({key:n.config.apiKey,...u}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:g,...l};return $N()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&wa(n.emulatorConfig.host)&&(y.credentials="include"),QT.fetch()(await WT(n,n.config.apiHost,t,m),y)})}async function XT(n,e,t){n._canInitEmulator=!1;const i={...T4,...e};try{const a=new N4(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Id(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const m=l.ok?u.errorMessage:u.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Id(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Id(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw Id(n,"user-disabled",u);const v=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw YT(n,v,y);gr(n,v)}}catch(a){if(a instanceof Vi)throw a;gr(n,"network-request-failed",{message:String(a)})}}async function C4(n,e,t,i,a={}){const l=await Fl(n,e,t,i,a);return"mfaPendingCredential"in l&&gr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function WT(n,e,t,i){const a=`${e}${t}?${i}`,l=n,u=l.config.emulator?yv(n.config,a):`${n.config.apiScheme}://${a}`;return A4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class N4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ri(this.auth,"network-request-failed")),x4.get())})}}function Id(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ri(n,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(n,e){return Fl(n,"POST","/v1/accounts:delete",e)}async function ff(n,e){return Fl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function I4(n,e=!1){const t=Xt(n),i=await t.getIdToken(e),a=_v(i);Pe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:i,authTime:cu(Ag(a.auth_time)),issuedAtTime:cu(Ag(a.iat)),expirationTime:cu(Ag(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ag(n){return Number(n)*1e3}function _v(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Fd("JWT malformed, contained fewer than 3 sections"),null;try{const a=Ww(t);return a?JSON.parse(a):(Fd("Failed to decode base64 JWT payload"),null)}catch(a){return Fd("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Pb(n){const e=_v(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Vi&&D4(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function D4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mf(n){const e=n.auth,t=await n.getIdToken(),i=await wu(n,ff(e,{idToken:t}));Pe(i?.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?JT(a.providerUserInfo):[],u=O4(n.providerData,l),m=n.isAnonymous,g=!(n.email&&a.passwordHash)&&!u?.length,y=m?g:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new oy(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function k4(n){const e=Xt(n);await mf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O4(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function JT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M4(n,e){const t=await XT(n,{},async()=>{const i=ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await WT(n,a,"/v1/token",`key=${l}`),m=await n._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return n.emulatorConfig&&wa(n.emulatorConfig.host)&&(g.credentials="include"),QT.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function P4(n,e){return Fl(n,"POST","/v2/accounts:revokeToken",vv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=Pb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await M4(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new _l;return i&&(Pe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Pe(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Pe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ys{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new j4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new oy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await wu(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return I4(this,e)}reload(){return k4(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ys({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await mf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ks(this.auth.app))return Promise.reject(ro(this.auth));const e=await this.getIdToken();return await wu(this,R4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:T,isAnonymous:N,providerData:P,stsTokenManager:M}=t;Pe(b&&M,e,"internal-error");const L=_l.fromJSON(this.name,M);Pe(typeof b=="string",e,"internal-error"),ea(i,e.name),ea(a,e.name),Pe(typeof T=="boolean",e,"internal-error"),Pe(typeof N=="boolean",e,"internal-error"),ea(l,e.name),ea(u,e.name),ea(m,e.name),ea(g,e.name),ea(y,e.name),ea(v,e.name);const z=new Ys({uid:b,auth:e,email:a,emailVerified:T,displayName:i,isAnonymous:N,photoURL:u,phoneNumber:l,tenantId:m,stsTokenManager:L,createdAt:y,lastLoginAt:v});return P&&Array.isArray(P)&&(z.providerData=P.map(H=>({...H}))),g&&(z._redirectEventId=g),z}static async _fromIdTokenResponse(e,t,i=!1){const a=new _l;a.updateFromServerResponse(t);const l=new Ys({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await mf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Pe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?JT(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,m=new _l;m.updateFromIdToken(i);const g=new Ys({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new oy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=new Map;function lr(n){yr(n instanceof Function,"Expected a class definition");let e=Vb.get(n);return e?(yr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Vb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ZT.type="NONE";const Lb=ZT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(n,e,t){return`firebase:${n}:${e}:${t}`}class Sl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=qd(this.userKey,a.apiKey,l),this.fullPersistenceKey=qd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ff(this.auth,{idToken:e}).catch(()=>{});return t?Ys._fromGetAccountInfoResponse(this.auth,t,e):null}return Ys._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Sl(lr(Lb),e,i);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||lr(Lb);const u=qd(i,e.config.apiKey,e.name);let m=null;for(const y of t)try{const v=await y._get(u);if(v){let b;if(typeof v=="string"){const T=await ff(e,{idToken:v}).catch(()=>{});if(!T)break;b=await Ys._fromGetAccountInfoResponse(e,T,v)}else b=Ys._fromJSON(e,v);y!==l&&(m=b),l=y;break}}catch{}const g=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Sl(l,e,i):(l=g[0],m&&await l._set(u,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Sl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rA(e))return"Blackberry";if(aA(e))return"Webos";if(tA(e))return"Safari";if((e.includes("chrome/")||nA(e))&&!e.includes("edge/"))return"Chrome";if(iA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function eA(n=Ln()){return/firefox\//i.test(n)}function tA(n=Ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nA(n=Ln()){return/crios\//i.test(n)}function sA(n=Ln()){return/iemobile/i.test(n)}function iA(n=Ln()){return/android/i.test(n)}function rA(n=Ln()){return/blackberry/i.test(n)}function aA(n=Ln()){return/webos/i.test(n)}function Sv(n=Ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function V4(n=Ln()){return Sv(n)&&!!window.navigator?.standalone}function L4(){return YN()&&document.documentMode===10}function oA(n=Ln()){return Sv(n)||iA(n)||aA(n)||rA(n)||/windows phone/i.test(n)||sA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(n,e=[]){let t;switch(n){case"Browser":t=Ub(Ln());break;case"Worker":t=`${Ub(Ln())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${yo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,m)=>{try{const g=e(l);u(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4(n,e={}){return Fl(n,"GET","/v2/passwordPolicy",vv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=6;class F4{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??B4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zb(this),this.idTokenSubscription=new zb(this),this.beforeStateQueue=new U4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=lr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Sl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ff(this,{idToken:e}),i=await Ys._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ks(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=i?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===u)&&m?.user&&(i=m.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=E4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ks(this.app))return Promise.reject(ro(this));const t=e?Xt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ks(this.app)?Promise.reject(ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ks(this.app)?Promise.reject(ro(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z4(this),t=new F4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Du("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await P4(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&lr(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await Sl.create(this,[lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(m,this,"internal-error"),m.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,a);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Ks(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&S4(`Error while retrieving App Check token: ${e.error}`),e?.token}}function bv(n){return Xt(n)}class zb{constructor(e){this.auth=e,this.observer=null,this.addObserver=nR(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H4(n){wv=n}function $4(n){return wv.loadJS(n)}function G4(){return wv.gapiScript}function K4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(n,e){const t=Tf(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(lo(l,e??{}))return a;gr(a,"already-initialized")}return t.initialize({options:e})}function Q4(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(lr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function X4(n,e,t){const i=bv(n);Pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=cA(e),{host:u,port:m}=W4(e),g=m===null?"":`:${m}`,y={url:`${l}//${u}${g}/`},v=Object.freeze({host:u,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Pe(lo(y,i.config.emulator)&&lo(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,wa(u)?(Iy(`${l}//${u}${g}`),Dy("Auth",!0)):J4()}function cA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function W4(n){const e=cA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:Bb(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:Bb(u)}}}function Bb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function J4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,t){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(n,e){return C4(n,"POST","/v1/accounts:signInWithIdp",vv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="http://localhost";class mo extends uA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const u=new mo(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return bl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,bl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bl(e,t)}buildRequest(){const e={requestUri:Z4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ju(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends hA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends $u{constructor(){super("facebook.com")}static credential(e){return mo._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.FACEBOOK_SIGN_IN_METHOD="facebook.com";ta.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends $u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mo._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return na.credential(t,i)}catch{return null}}}na.GOOGLE_SIGN_IN_METHOD="google.com";na.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends $u{constructor(){super("github.com")}static credential(e){return mo._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sa.credential(e.oauthAccessToken)}catch{return null}}}sa.GITHUB_SIGN_IN_METHOD="github.com";sa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends $u{constructor(){super("twitter.com")}static credential(e,t){return mo._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ia.credential(t,i)}catch{return null}}}ia.TWITTER_SIGN_IN_METHOD="twitter.com";ia.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Ys._fromIdTokenResponse(e,i,a),u=Fb(i);return new Il({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=Fb(i);return new Il({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function Fb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends Vi{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,pf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new pf(e,t,i,a)}}function dA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?pf._fromErrorAndOperation(n,l,e,i):l})}async function ek(n,e,t=!1){const i=await wu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Il._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(n,e,t=!1){const{auth:i}=n;if(Ks(i.app))return Promise.reject(ro(i));const a="reauthenticate";try{const l=await wu(n,dA(i,a,e,n),t);Pe(l.idToken,i,"internal-error");const u=_v(l.idToken);Pe(u,i,"internal-error");const{sub:m}=u;return Pe(n.uid===m,i,"user-mismatch"),Il._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&gr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(n,e,t=!1){if(Ks(n.app))return Promise.reject(ro(n));const i="signIn",a=await dA(n,i,e),l=await Il._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}function sk(n,e,t,i){return Xt(n).onIdTokenChanged(e,t,i)}function ik(n,e,t){return Xt(n).beforeAuthStateChanged(e,t)}const gf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gf,"1"),this.storage.removeItem(gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=1e3,ak=10;class mA extends fA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,g)=>{this.notifyListeners(u,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);L4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,ak):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},rk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mA.type="LOCAL";const ok=mA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA extends fA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pA.type="SESSION";const gA=pA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Gf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const m=Array.from(u).map(async y=>y(t.origin,l)),g=await lk(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((m,g)=>{const y=Ev("",20);a.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(b){const T=b;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(T.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function uk(n){Ii().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function hk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dk(){return navigator?.serviceWorker?.controller||null}function fk(){return yA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="firebaseLocalStorageDb",mk=1,yf="firebaseLocalStorage",_A="fbase_key";class Gu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kf(n,e){return n.transaction([yf],e?"readwrite":"readonly").objectStore(yf)}function pk(){const n=indexedDB.deleteDatabase(vA);return new Gu(n).toPromise()}function ly(){const n=indexedDB.open(vA,mk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(yf,{keyPath:_A})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(yf)?e(i):(i.close(),await pk(),e(await ly()))})})}async function qb(n,e,t){const i=Kf(n,!0).put({[_A]:e,value:t});return new Gu(i).toPromise()}async function gk(n,e){const t=Kf(n,!1).get(e),i=await new Gu(t).toPromise();return i===void 0?null:i.value}function Hb(n,e){const t=Kf(n,!0).delete(e);return new Gu(t).toPromise()}const yk=800,vk=3;class SA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>vk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gf._getInstance(fk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hk(),!this.activeServiceWorker)return;this.sender=new ck(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ly();return await qb(e,gf,"1"),await Hb(e,gf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>qb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>gk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Hb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Kf(a,!1).getAll();return new Gu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SA.type="LOCAL";const _k=SA;new Hu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(n,e){return e?lr(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv extends uA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bk(n){return nk(n.auth,new Tv(n),n.bypassAuthState)}function wk(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),tk(t,new Tv(n),n.bypassAuthState)}async function Ek(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),ek(t,new Tv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:m}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bk;case"linkViaPopup":case"linkViaRedirect":return Ek;case"reauthViaPopup":case"reauthViaRedirect":return wk;default:gr(this.auth,"internal-error")}}resolve(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=new Hu(2e3,1e4);class yl extends bA{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,yl.currentPopupAction&&yl.currentPopupAction.cancel(),yl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){yr(this.filter.length===1,"Popup operations only handle one event");const e=Ev();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Tk.get())};e()}}yl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="pendingRedirect",Hd=new Map;class xk extends bA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Hd.get(this.auth._key());if(!e){try{const i=await Ck(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Hd.set(this.auth._key(),e)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ck(n,e){const t=Ik(e),i=Rk(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function Nk(n,e){Hd.set(n._key(),e)}function Rk(n){return lr(n._redirectPersistence)}function Ik(n){return qd(Ak,n.config.apiKey,n.name)}async function Dk(n,e,t=!1){if(Ks(n.app))return Promise.reject(ro(n));const i=bv(n),a=Sk(i,e),u=await new xk(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=600*1e3;class kk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ok(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!wA(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ri(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jk&&this.cachedEventUids.clear(),this.cachedEventUids.has($b(e))}saveEventToCache(e){this.cachedEventUids.add($b(e)),this.lastProcessedEventTime=Date.now()}}function $b(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Ok(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(n,e={}){return Fl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vk=/^https?/;async function Lk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Mk(n);for(const t of e)try{if(Uk(t))return}catch{}gr(n,"unauthorized-domain")}function Uk(n){const e=ay(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!Vk.test(t))return!1;if(Pk.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=new Hu(3e4,6e4);function Gb(){const n=Ii().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Bk(n){return new Promise((e,t)=>{function i(){Gb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gb(),t(Ri(n,"network-request-failed"))},timeout:zk.get()})}if(Ii().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ii().gapi?.load)i();else{const a=K4("iframefcb");return Ii()[a]=()=>{gapi.load?i():t(Ri(n,"network-request-failed"))},$4(`${G4()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw $d=null,e})}let $d=null;function Fk(n){return $d=$d||Bk(n),$d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=new Hu(5e3,15e3),Hk="__/auth/iframe",$k="emulator/auth/iframe",Gk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yk(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?yv(e,$k):`https://${n.config.authDomain}/${Hk}`,i={apiKey:e.apiKey,appName:n.name,v:yo},a=Kk.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ju(i).slice(1)}`}async function Qk(n){const e=await Fk(n),t=Ii().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:Yk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gk,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=Ri(n,"network-request-failed"),m=Ii().setTimeout(()=>{l(u)},qk.get());function g(){Ii().clearTimeout(m),a(i)}i.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wk=500,Jk=600,Zk="_blank",e5="http://localhost";class Kb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t5(n,e,t,i=Wk,a=Jk){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...Xk,width:i.toString(),height:a.toString(),top:l,left:u},y=Ln().toLowerCase();t&&(m=nA(y)?Zk:t),eA(y)&&(e=e||e5,g.scrollbars="yes");const v=Object.entries(g).reduce((T,[N,P])=>`${T}${N}=${P},`,"");if(V4(y)&&m!=="_self")return n5(e||"",m),new Kb(null);const b=window.open(e||"",m,v);Pe(b,n,"popup-blocked");try{b.focus()}catch{}return new Kb(b)}function n5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="__/auth/handler",i5="emulator/auth/handler",r5=encodeURIComponent("fac");async function Yb(n,e,t,i,a,l){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:yo,eventId:a};if(e instanceof hA){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",tR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))u[v]=b}if(e instanceof $u){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const m=u;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await n._getAppCheckToken(),y=g?`#${r5}=${encodeURIComponent(g)}`:"";return`${a5(n)}?${ju(m).slice(1)}${y}`}function a5({config:n}){return n.emulator?yv(n,i5):`https://${n.authDomain}/${s5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="webStorageSupport";class o5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gA,this._completeRedirectFn=Dk,this._overrideRedirectResult=Nk}async _openPopup(e,t,i,a){yr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Yb(e,t,i,ay(),a);return t5(e,l,Ev())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await Yb(e,t,i,ay(),a);return uk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(yr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Qk(e),i=new kk(e);return t.register("authEvent",a=>(Pe(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xg,{type:xg},a=>{const l=a?.[0]?.[xg];l!==void 0&&t(!!l),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Lk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oA()||tA()||Sv()}}const l5=o5;var Qb="@firebase/auth",Xb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h5(n){co(new ma("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=i.options;Pe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:m,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lA(n)},y=new q4(i,a,l,g);return Q4(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),co(new ma("auth-internal",e=>{const t=bv(e.getProvider("auth").getImmediate());return(i=>new c5(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xi(Qb,Xb,u5(n)),xi(Qb,Xb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=300,f5=tE("authIdTokenMaxAge")||d5;let Wb=null;const m5=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>f5)return;const a=t?.token;Wb!==a&&(Wb=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function p5(n=Oy()){const e=Tf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Y4(n,{popupRedirectResolver:l5,persistence:[_k,ok,gA]}),i=tE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=m5(l.toString());ik(t,u,()=>u(t.currentUser)),sk(t,m=>u(m))}}const a=Jw("auth");return a&&X4(t,`http://${a}`),t}function g5(){return document.getElementsByTagName("head")?.[0]??document}H4({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=Ri("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",g5().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h5("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="firebasestorage.googleapis.com",TA="storageBucket",y5=120*1e3,v5=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt extends Vi{constructor(e,t,i=0){super(Cg(e),`Firebase Storage: ${t} (${Cg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ft;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ft||(Ft={}));function Cg(n){return"storage/"+n}function Av(){const n="An unknown error occurred, please check the error payload for server response.";return new qt(Ft.UNKNOWN,n)}function _5(n){return new qt(Ft.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function S5(n){return new qt(Ft.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function b5(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qt(Ft.UNAUTHENTICATED,n)}function w5(){return new qt(Ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function E5(n){return new qt(Ft.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function T5(){return new qt(Ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function A5(){return new qt(Ft.CANCELED,"User canceled the upload/download.")}function x5(n){return new qt(Ft.INVALID_URL,"Invalid URL '"+n+"'.")}function C5(n){return new qt(Ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function N5(){return new qt(Ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TA+"' property when initializing the app?")}function R5(){return new qt(Ft.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function I5(){return new qt(Ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function D5(n){return new qt(Ft.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function cy(n){return new qt(Ft.INVALID_ARGUMENT,n)}function AA(){return new qt(Ft.APP_DELETED,"The Firebase app was deleted.")}function j5(n){return new qt(Ft.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uu(n,e){return new qt(Ft.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Qc(n){throw new qt(Ft.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=fs.makeFromUrl(e,t)}catch{return new fs(e,"")}if(i.path==="")return i;throw C5(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const u="(/(.*))?$",m=new RegExp("^gs://"+a+u,"i"),g={bucket:1,path:3};function y(ie){ie.path_=decodeURIComponent(ie.path)}const v="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",N=new RegExp(`^https?://${b}/${v}/b/${a}/o${T}`,"i"),P={bucket:1,path:3},M=t===EA?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",z=new RegExp(`^https?://${M}/${a}/${L}`,"i"),G=[{regex:m,indices:g,postModify:l},{regex:N,indices:P,postModify:y},{regex:z,indices:{bucket:1,path:2},postModify:y}];for(let ie=0;ie<G.length;ie++){const re=G[ie],ae=re.regex.exec(e);if(ae){const j=ae[re.indices.bucket];let I=ae[re.indices.path];I||(I=""),i=new fs(j,I),re.postModify(i);break}}if(i==null)throw x5(e);return i}}class k5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(n,e,t){let i=1,a=null,l=null,u=!1,m=0;function g(){return m===2}let y=!1;function v(...L){y||(y=!0,e.apply(null,L))}function b(L){a=setTimeout(()=>{a=null,n(N,g())},L)}function T(){l&&clearTimeout(l)}function N(L,...z){if(y){T();return}if(L){T(),v.call(null,L,...z);return}if(g()||u){T(),v.call(null,L,...z);return}i<64&&(i*=2);let G;m===1?(m=2,G=0):G=(i+Math.random())*1e3,b(G)}let P=!1;function M(L){P||(P=!0,T(),!y&&(a!==null?(L||(m=2),clearTimeout(a),b(0)):L||(m=1)))}return b(0),l=setTimeout(()=>{u=!0,M(!0)},t),M}function M5(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(n){return n!==void 0}function V5(n){return typeof n=="object"&&!Array.isArray(n)}function xv(n){return typeof n=="string"||n instanceof String}function Jb(n){return Cv()&&n instanceof Blob}function Cv(){return typeof Blob<"u"}function Zb(n,e,t,i){if(i<e)throw cy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw cy(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function xA(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var ao;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ao||(ao={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,t,i,a,l,u,m,g,y,v,b,T=!0,N=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=b,this.retry=T,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,M)=>{this.resolve_=P,this.reject_=M,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new Dd(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const m=l.getErrorCode()===ao.NO_ERROR,g=l.getStatus();if(!m||L5(g,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===ao.ABORT;i(!1,new Dd(!1,null,v));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new Dd(y,l))})},t=(i,a)=>{const l=this.resolve_,u=this.reject_,m=a.connection;if(a.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());P5(g)?l(g):l()}catch(g){u(g)}else if(m!==null){const g=Av();g.serverResponse=m.getErrorText(),this.errorCallback_?u(this.errorCallback_(m,g)):u(g)}else if(a.canceled){const g=this.appDelete_?AA():A5();u(g)}else{const g=T5();u(g)}};this.canceled_?t(!1,new Dd(!1,null,!0)):this.backoffId_=O5(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&M5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Dd{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function z5(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function B5(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function F5(n,e){e&&(n["X-Firebase-GMPID"]=e)}function q5(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function H5(n,e,t,i,a,l,u=!0,m=!1){const g=xA(n.urlParams),y=n.url+g,v=Object.assign({},n.headers);return F5(v,e),z5(v,t),B5(v,l),q5(v,i),new U5(y,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,u,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function G5(...n){const e=$5();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(Cv())return new Blob(n);throw new qt(Ft.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function K5(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(n){if(typeof atob>"u")throw D5("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ng{constructor(e,t){this.data=e,this.contentType=t||null}}function Q5(n,e){switch(n){case Ai.RAW:return new Ng(CA(e));case Ai.BASE64:case Ai.BASE64URL:return new Ng(NA(n,e));case Ai.DATA_URL:return new Ng(W5(e),J5(e))}throw Av()}function CA(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,u=n.charCodeAt(++t);i=65536|(l&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function X5(n){let e;try{e=decodeURIComponent(n)}catch{throw uu(Ai.DATA_URL,"Malformed data URL.")}return CA(e)}function NA(n,e){switch(n){case Ai.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw uu(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Ai.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw uu(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Y5(e)}catch(a){throw a.message.includes("polyfill")?a:uu(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}class RA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw uu(Ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=Z5(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function W5(n){const e=new RA(n);return e.base64?NA(Ai.BASE64,e.rest):X5(e.rest)}function J5(n){return new RA(n).contentType}function Z5(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t){let i=0,a="";Jb(e)?(this.data_=e,i=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(Jb(this.data_)){const i=this.data_,a=K5(i,e,t);return a===null?null:new ra(a)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new ra(i,!0)}}static getBlob(...e){if(Cv()){const t=e.map(i=>i instanceof ra?i.data_:i);return new ra(G5.apply(null,t))}else{const t=e.map(u=>xv(u)?Q5(Ai.RAW,u).data:u.data_);let i=0;t.forEach(u=>{i+=u.byteLength});const a=new Uint8Array(i);let l=0;return t.forEach(u=>{for(let m=0;m<u.length;m++)a[l++]=u[m]}),new ra(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(n){let e;try{e=JSON.parse(n)}catch{return null}return V5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function t3(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function DA(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(n,e){return e}class Bn{constructor(e,t,i,a){this.server=e,this.local=t||e,this.writable=!!i,this.xform=a||n3}}let jd=null;function s3(n){return!xv(n)||n.length<2?n:DA(n)}function jA(){if(jd)return jd;const n=[];n.push(new Bn("bucket")),n.push(new Bn("generation")),n.push(new Bn("metageneration")),n.push(new Bn("name","fullPath",!0));function e(l,u){return s3(u)}const t=new Bn("name");t.xform=e,n.push(t);function i(l,u){return u!==void 0?Number(u):u}const a=new Bn("size");return a.xform=i,n.push(a),n.push(new Bn("timeCreated")),n.push(new Bn("updated")),n.push(new Bn("md5Hash",null,!0)),n.push(new Bn("cacheControl",null,!0)),n.push(new Bn("contentDisposition",null,!0)),n.push(new Bn("contentEncoding",null,!0)),n.push(new Bn("contentLanguage",null,!0)),n.push(new Bn("contentType",null,!0)),n.push(new Bn("metadata","customMetadata",!0)),jd=n,jd}function i3(n,e){function t(){const i=n.bucket,a=n.fullPath,l=new fs(i,a);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function r3(n,e,t){const i={};i.type="file";const a=t.length;for(let l=0;l<a;l++){const u=t[l];i[u.local]=u.xform(i,e[u.server])}return i3(i,n),i}function kA(n,e,t){const i=IA(e);return i===null?null:r3(n,i,t)}function a3(n,e,t,i){const a=IA(e);if(a===null||!xv(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(y=>{const v=n.bucket,b=n.fullPath,T="/b/"+u(v)+"/o/"+u(b),N=Yf(T,t,i),P=xA({alt:"media",token:y});return N+P})[0]}function o3(n,e){const t={},i=e.length;for(let a=0;a<i;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class Nv{constructor(e,t,i,a){this.url=e,this.method=t,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(n){if(!n)throw Av()}function l3(n,e){function t(i,a){const l=kA(n,a,e);return OA(l!==null),l}return t}function c3(n,e){function t(i,a){const l=kA(n,a,e);return OA(l!==null),a3(l,a,n.host,n._protocol)}return t}function MA(n){function e(t,i){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=w5():a=b5():t.getStatus()===402?a=S5(n.bucket):t.getStatus()===403?a=E5(n.path):a=i,a.status=t.getStatus(),a.serverResponse=i.serverResponse,a}return e}function PA(n){const e=MA(n);function t(i,a){let l=e(i,a);return i.getStatus()===404&&(l=_5(n.path)),l.serverResponse=a.serverResponse,l}return t}function u3(n,e,t){const i=e.fullServerUrl(),a=Yf(i,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,m=new Nv(a,l,c3(n,t),u);return m.errorHandler=PA(e),m}function h3(n,e){const t=e.fullServerUrl(),i=Yf(t,n.host,n._protocol),a="DELETE",l=n.maxOperationRetryTime;function u(g,y){}const m=new Nv(i,a,u,l);return m.successCodes=[200,204],m.errorHandler=PA(e),m}function d3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function f3(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=d3(null,e)),i}function m3(n,e,t,i,a){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function m(){let G="";for(let ie=0;ie<2;ie++)G=G+Math.random().toString().slice(2);return G}const g=m();u["Content-Type"]="multipart/related; boundary="+g;const y=f3(e,i,a),v=o3(y,t),b="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+g+"--",N=ra.getBlob(b,i,T);if(N===null)throw R5();const P={name:y.fullPath},M=Yf(l,n.host,n._protocol),L="POST",z=n.maxUploadRetryTime,H=new Nv(M,L,l3(n,t),z);return H.urlParams=P,H.headers=u,H.body=N.uploadData(),H.errorHandler=MA(e),H}class p3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ao.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ao.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ao.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,a,l){if(this.sent_)throw Qc("cannot .send() more than once");if(wa(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const u in l)l.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,l[u].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class g3 extends p3{initXhr(){this.xhr_.responseType="text"}}function Rv(){return new g3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t){this._service=e,t instanceof fs?this._location=t:this._location=fs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new po(e,t)}get root(){const e=new fs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DA(this._location.path)}get storage(){return this._service}get parent(){const e=e3(this._location.path);if(e===null)return null;const t=new fs(this._location.bucket,e);return new po(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw j5(e)}}function y3(n,e,t){n._throwIfRoot("uploadBytes");const i=m3(n.storage,n._location,jA(),new ra(e,!0),t);return n.storage.makeRequestWithTokens(i,Rv).then(a=>({metadata:a,ref:n}))}function v3(n){n._throwIfRoot("getDownloadURL");const e=u3(n.storage,n._location,jA());return n.storage.makeRequestWithTokens(e,Rv).then(t=>{if(t===null)throw I5();return t})}function _3(n){n._throwIfRoot("deleteObject");const e=h3(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Rv)}function S3(n,e){const t=t3(n._location.path,e),i=new fs(n._location.bucket,t);return new po(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(n){return/^[A-Za-z]+:\/\//.test(n)}function w3(n,e){return new po(n,e)}function VA(n,e){if(n instanceof Iv){const t=n;if(t._bucket==null)throw N5();const i=new po(t,t._bucket);return e!=null?VA(i,e):i}else return e!==void 0?S3(n,e):n}function E3(n,e){if(e&&b3(e)){if(n instanceof Iv)return w3(n,e);throw cy("To use ref(service, url), the first argument must be a Storage instance.")}else return VA(n,e)}function ew(n,e){const t=e?.[TA];return t==null?null:fs.makeFromBucketSpec(t,n)}function T3(n,e,t,i={}){n.host=`${e}:${t}`;const a=wa(e);a&&(Iy(`https://${n.host}/b`),Dy("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:nE(l,n.app.options.projectId))}class Iv{constructor(e,t,i,a,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=EA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=y5,this._maxUploadRetryTime=v5,this._requests=new Set,a!=null?this._bucket=fs.makeFromBucketSpec(a,this._host):this._bucket=ew(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fs.makeFromBucketSpec(this._url,e):this._bucket=ew(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Zb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Zb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ks(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new po(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new k5(AA());{const u=H5(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const tw="@firebase/storage",nw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="storage";function A3(n,e,t){return n=Xt(n),y3(n,e,t)}function x3(n){return n=Xt(n),v3(n)}function C3(n){return n=Xt(n),_3(n)}function sw(n,e){return n=Xt(n),E3(n,e)}function N3(n=Oy(),e){n=Xt(n);const i=Tf(n,LA).getImmediate({identifier:e}),a=Zw("storage");return a&&R3(i,...a),i}function R3(n,e,t,i={}){T3(n,e,t,i)}function I3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new Iv(t,i,a,e,yo)}function D3(){co(new ma(LA,I3,"PUBLIC").setMultipleInstances(!0)),xi(tw,nw,""),xi(tw,nw,"esm2020")}D3();const j3={apiKey:"AIzaSyAjKRridqLFy8i-of3wQCe28dvgNYFR010",authDomain:"simpleinfo-a02b0.firebaseapp.com",projectId:"simpleinfo-a02b0",storageBucket:"simpleinfo-a02b0.firebasestorage.app",messagingSenderId:"955726620263",appId:"1:955726620263:web:70143a50d08bc19696d6c2",measurementId:"G-GZBSSL4298"},Dv=rE(j3),ve=DT(Dv);p5(Dv);const uy=N3(Dv),k3=Object.freeze(Object.defineProperty({__proto__:null,db:ve,storage:uy},Symbol.toStringTag,{value:"Module"}));class O3{constructor(){this.subscribers=new Set}async logActivity(e,t,i,a=null,l=null){try{let u=l;u||(u=await this.getClientIP());const m={timestamp:new Date,adminId:a?.adminCode||"system",adminName:a?.name||"시스템",action:e,level:t,details:i,ip:u,userAgent:navigator.userAgent,sessionId:this.getSessionId()};await Si(Xe(ve,"activityLogs"),m),this.notifySubscribers()}catch(u){console.error("활동 로그 작성 실패:",u)}}async logAdminLogin(e,t=null){await this.logActivity("관리자 로그인","major",`관리자 ${e.name} (${e.adminCode}) 로그인`,e,t)}async logAdminLogout(e,t=null){await this.logActivity("관리자 로그아웃","medium",`관리자 ${e.name} (${e.adminCode}) 로그아웃`,e,t)}async logPinCreation(e,t,i=null){await this.logActivity("PIN 생성","major",`새로운 PIN ${e} 생성됨`,t,i)}async logDeviceConnection(e,t,i,a=null){await this.logActivity("디바이스 연결","medium",`${e} 디바이스가 PIN ${t}으로 연결됨`,i,a)}async logDeviceDisconnection(e,t,i,a=null){await this.logActivity("디바이스 연결 해제","medium",`${e} 디바이스가 PIN ${t}으로 연결 해제됨`,i,a)}async logConnectionSuccess(e,t,i,a,l=null){await this.logActivity("기기 연결 성공","major",`제어용 기기(${e})와 출력용 기기(${t})가 PIN ${i}으로 연결됨`,a,l)}async logConnectionFailure(e,t,i,a=null){await this.logActivity("기기 연결 실패","medium",`PIN ${e} 연결 실패: ${t}`,i,a)}async logAdminDisconnection(e,t,i=null){await this.logActivity("관리자 연결 해제","major",`관리자가 세션 ${e} 연결을 해제함`,t,i)}async logAnnouncementAction(e,t,i,a,l=null){await this.logActivity(`공지사항 ${e}`,"medium",`공지사항 "${i}" (ID: ${t}) ${e}`,a,l)}async logMainNoticeToggle(e,t,i,a=null){const l=e?"활성화":"비활성화";await this.logActivity(`메인 공지사항 ${l}`,"major",`메인 공지사항 "${t}" ${l}`,i,a)}async logSchoolBlockingToggle(e,t,i=null){const a=e?"차단 시작":"차단 해제";await this.logActivity(`학교 차단 ${a}`,"major",`학교 생활 도우미 ${a}`,t,i)}async logPinCodeChange(e,t,i,a=null){await this.logActivity("PIN 코드 변경","major",`PIN 코드를 ${e}에서 ${t}으로 변경`,i,a)}async logSystemSettingChange(e,t,i,a,l=null){await this.logActivity("시스템 설정 변경","medium",`${e} 설정을 "${t}"에서 "${i}"으로 변경`,a,l)}async logPageAccess(e,t,i=null){await this.logActivity("페이지 접근","minor",`${e} 페이지 접근`,t,i)}async logDataAccess(e,t,i=null){await this.logActivity("데이터 조회","minor",`${e} 데이터 조회`,t,i)}async logScheduleAction(e,t,i,a=null){await this.logActivity(`학사일정 ${e}`,"medium",t,i,a)}async logMealAction(e,t,i,a=null){await this.logActivity(`급식 ${e}`,"medium",t,i,a)}async logAdminAccountAction(e,t,i,a,l=null){await this.logActivity(`관리자 계정 ${e}`,"major",`관리자 ${t} (${i}) ${e}`,a,l)}async logSystemSettingChange(e,t,i,a,l=null){await this.logActivity("시스템 설정 변경","major",`${e}: ${t} → ${i}`,a,l)}async getActivityLogs(e=100){try{const t=Xe(ve,"activityLogs"),i=Rn(t,ha("timestamp","desc"),hf(e)),a=await Bt(i),l=[];return a.forEach(u=>{l.push({id:u.id,...u.data()})}),l}catch(t){return console.error("활동 로그 조회 실패:",t),[]}}subscribeToActivityLogs(e,t=100){try{const i=Xe(ve,"activityLogs"),a=Rn(i,ha("timestamp","desc"),hf(t));return oa(a,u=>{const m=[];u.forEach(g=>{m.push({id:g.id,...g.data()})}),e(m)})}catch(i){return console.error("활동 로그 구독 실패:",i),()=>{}}}notifySubscribers(){this.subscribers.forEach(e=>{try{e()}catch(t){console.error("구독자 알림 실패:",t)}})}async getClientIP(){try{const t=sessionStorage.getItem("clientIP"),i=sessionStorage.getItem("clientIPTime");if(t&&i&&Date.now()-parseInt(i)<36e5)return t;const a=await fetch("https://api.ipify.org?format=json");if(a.ok){const u=(await a.json()).ip;return sessionStorage.setItem("clientIP",u),sessionStorage.setItem("clientIPTime",Date.now().toString()),u}}catch(t){console.warn("IP 주소 가져오기 실패:",t)}return sessionStorage.getItem("clientIP")||"N/A"}getSessionId(){let e=sessionStorage.getItem("sessionId");return e||(e="session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),sessionStorage.setItem("sessionId",e)),e}}const Jn=new O3;class M3{constructor(){this.listeners=new Map}async createOutputSession(){try{console.log("ConnectionDB: 출력용 세션 생성 시작");const e=await this.getActiveConnections();if(console.log("ConnectionDB: 현재 활성화된 연결 개수:",e.length),e.length>=10)throw new Error("최대 연결 개수(10개)에 도달했습니다. 기존 연결을 제거한 후 다시 시도해주세요.");const t=`output_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,i=Math.floor(1e5+Math.random()*9e5).toString();return await ar(De(ve,"connections",t),{sessionId:t,pin:i,deviceType:"output",status:"waiting",createdAt:Oe(),controlData:null,connectedControlSession:null,pairingId:null}),console.log("ConnectionDB: 출력용 세션 생성 완료:",t,"PIN:",i),setTimeout(()=>{this.cleanupSession(t)},300*1e3),{sessionId:t,pin:i}}catch(e){throw console.error("출력용 세션 생성 실패:",e),e}}async connectControlDevice(e){try{if(!e||e.length!==6||!/^\d{6}$/.test(e))return{success:!1,error:"PIN은 6자리 숫자여야 합니다."};console.log("ConnectionDB: 제어용 디바이스 연결 시도, PIN:",e);const t=await this.findOutputSessionByPin(e);if(t.length===0){try{await Jn.logConnectionFailure(e,"유효하지 않은 PIN")}catch(u){console.error("연결 실패 로그 기록 실패:",u)}return{success:!1,error:"유효하지 않은 PIN입니다."}}const i=t[0];if(i.status==="connected"||i.connectedControlSession){try{await Jn.logConnectionFailure(e,"이미 다른 제어용 디바이스에 연결됨")}catch(u){console.error("연결 실패 로그 기록 실패:",u)}return{success:!1,error:"이 PIN은 이미 다른 제어용 디바이스에 연결되어 있습니다."}}const a=`control_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,l=`pair_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log("ConnectionDB: 출력용 세션 업데이트 시작:",i.sessionId),await jt(De(ve,"connections",i.sessionId),{status:"connected",connectedControlSession:a,pairingId:l,connectedAt:Oe()}),console.log("ConnectionDB: 출력용 세션 업데이트 완료:",i.sessionId),console.log("ConnectionDB: 제어용 세션 생성 시작:",a),await ar(De(ve,"connections",a),{sessionId:a,pin:e,deviceType:"control",status:"connected",connectedOutputSession:i.sessionId,pairingId:l,createdAt:Oe(),connectedAt:Oe(),controlData:null}),console.log("ConnectionDB: 제어용 세션 생성 완료:",a),console.log("ConnectionDB: 연결 완료:",{outputSessionId:i.sessionId,controlSessionId:a,pairingId:l});try{await Jn.logConnectionSuccess(a,i.sessionId,e)}catch(u){console.error("연결 로그 기록 실패:",u)}return{success:!0,outputSessionId:i.sessionId,controlSessionId:a,pairingId:l,pin:e}}catch(t){throw console.error("제어용 디바이스 연결 실패:",t),t}}async findOutputSessionByPin(e){try{console.log("ConnectionDB: PIN으로 출력용 세션 찾기 시작, PIN:",e);const t=Xe(ve,"connections"),i=Rn(t,Mn("pin","==",e),Mn("deviceType","==","output")),a=await Bt(i);return console.log("ConnectionDB: 쿼리 결과 개수:",a.size),a.docs.map(u=>{const m={sessionId:u.id,...u.data()};return console.log("ConnectionDB: 찾은 세션:",m),m})}catch(t){return console.error("PIN으로 출력용 세션 찾기 실패:",t),[]}}async getActiveConnections(){try{const e=Xe(ve,"connections"),t=await Bt(e),i=[];return t.forEach(a=>{const l={sessionId:a.id,...a.data()};l.deviceType==="output"&&l.pin&&l.pin.length===6&&(l.status==="connected"||l.status==="control_connected"||l.status==="expired"||l.connectedControlSession)&&i.push(l)}),i}catch(e){return console.error("활성화된 연결 목록 가져오기 실패:",e),[]}}subscribeToActiveConnections(e){try{const t=Xe(ve,"connections");return oa(t,a=>{const l=[];a.forEach(u=>{const m={sessionId:u.id,...u.data()};m.deviceType==="output"&&m.pin&&m.pin.length===6&&(m.status==="connected"||m.status==="control_connected"||m.status==="expired"||m.connectedControlSession)&&l.push(m)}),e(l)},a=>{console.error("ConnectionDB.subscribeToActiveConnections: 실시간 모니터링 실패:",a),e([])})}catch(t){return console.error("ConnectionDB.subscribeToActiveConnections: 설정 실패:",t),()=>{}}}subscribeToOutputData(e,t){const i=De(ve,"connections",e),a=oa(i,l=>{if(l.exists()){const u=l.data();console.log("ConnectionDB: 출력용 데이터 변경 감지:",e,u),(u.connectedControlSession||u.controlData)&&t(u)}else console.log("ConnectionDB: 출력용 세션이 존재하지 않음:",e)});return this.listeners.set(e,a),a}async sendControlData(e,t){try{console.log("ConnectionDB: 제어 데이터 전송 시도:",{controlSessionId:e,data:t,timestamp:new Date().toISOString(),userAgent:navigator.userAgent});const i=De(ve,"connections",e),a=await Yt(i);if(console.log("ConnectionDB: 제어용 세션 문서 존재 여부:",a.exists()),!a.exists())throw new Error("제어용 세션이 존재하지 않습니다.");const l=a.data(),u=l.connectedOutputSession;if(console.log("ConnectionDB: 제어용 세션 데이터:",{...l,timestamp:new Date().toISOString()}),console.log("ConnectionDB: 연결된 출력용 세션 ID:",u),!u)throw new Error("연결된 출력용 세션이 없습니다.");const m=De(ve,"connections",u);console.log("ConnectionDB: 출력용 세션에 데이터 전송 시작:",{outputSessionId:u,data:t,timestamp:new Date().toISOString()}),await jt(m,{controlData:t,lastUpdated:Oe(),heartbeat:Oe()}),console.log("ConnectionDB: 제어 데이터 전송 완료:",{outputSessionId:u,data:t,timestamp:new Date().toISOString(),success:!0})}catch(i){throw console.error("제어 데이터 전송 실패:",{controlSessionId:e,data:t,error:i.message,timestamp:new Date().toISOString()}),i}}async disconnectSession(e){try{console.log("ConnectionDB: 연결 해제 시작:",e);const t=De(ve,"connections",e),i=await Yt(t);if(i.exists()){const l=i.data();l.deviceType==="output"&&l.connectedControlSession?(await Ds(De(ve,"connections",l.connectedControlSession)),console.log("제어용 세션 삭제 완료:",l.connectedControlSession)):l.deviceType==="control"&&l.connectedOutputSession&&(await Ds(De(ve,"connections",l.connectedOutputSession)),console.log("출력용 세션 삭제 완료:",l.connectedOutputSession)),await Ds(t),console.log("세션 삭제 완료:",e)}const a=this.listeners.get(e);a&&(a(),this.listeners.delete(e)),console.log("ConnectionDB: 연결 해제 완료:",e)}catch(t){throw console.error("연결 해제 실패:",t),t}}async heartbeatSession(e){try{const t=De(ve,"connections",e),i=await Yt(t);if(i.exists()){const a=i.data();if(a.status==="connected"||a.status==="control_connected")return await jt(t,{lastHeartbeat:Oe(),status:a.status}),!0}return!1}catch(t){return console.error("세션 heartbeat 실패:",t),!1}}async cleanupSession(e){try{const t=De(ve,"connections",e);await jt(t,{status:"expired"});const i=this.listeners.get(e);i&&(i(),this.listeners.delete(e))}catch(t){console.error("세션 정리 실패:",t)}}async getAllActiveConnections(){try{const e=Xe(ve,"connections"),t=Rn(e,Mn("status","==","connected"));return(await Bt(t)).docs.map(a=>({sessionId:a.id,...a.data()}))}catch(e){return console.error("모든 활성 연결 목록 가져오기 실패:",e),[]}}async forceDisconnect(e){try{console.log("ConnectionDB: 관리자 강제 연결 해제:",e);const t=De(ve,"connections",e),i=await Yt(t);if(i.exists()){const a=i.data();a.deviceType==="output"&&a.connectedControlSession?await jt(De(ve,"connections",a.connectedControlSession),{controlData:{adminRemoved:!0,message:"관리자에 의해 연결이 해제되었습니다.",timestamp:Oe()}}):a.deviceType==="control"&&a.connectedOutputSession&&await jt(De(ve,"connections",a.connectedOutputSession),{controlData:{adminRemoved:!0,message:"관리자에 의해 연결이 해제되었습니다.",timestamp:Oe()}}),await this.disconnectSession(e)}}catch(t){throw console.error("관리자 강제 연결 해제 실패:",t),t}}async sendMainNotice(e,t){try{console.log("ConnectionDB: 메인 공지사항 전송 시작:",e,t);const i=De(ve,"connections",e),a=await Yt(i);if(!a.exists())throw new Error("출력용 세션을 찾을 수 없습니다.");const l=a.data();if(l.status!=="connected"&&l.status!=="expired")throw new Error("출력용 세션이 연결되지 않았습니다.");const u=l.connectedControlSession;if(u){const m=De(ve,"connections",u),g=await Yt(m);if(!g.exists())throw new Error("연결된 제어용 세션을 찾을 수 없습니다.");if(g.data().status!=="connected")throw new Error("제어용 세션이 연결되지 않았습니다.")}await jt(i,{mainNotice:{...t,timestamp:Oe(),isActive:!0},updatedAt:Oe()}),console.log("ConnectionDB: 메인 공지사항 전송 완료:",e)}catch(i){throw console.error("메인 공지사항 전송 실패:",i),i}}async deleteMainNotice(e){try{console.log("ConnectionDB: 메인 공지사항 완전 제거 시작:",e);const t=De(ve,"connections",e),i=await Yt(t);if(!i.exists())throw new Error("출력용 세션을 찾을 수 없습니다.");const a=i.data();if(a.status!=="connected"&&a.status!=="expired")throw new Error("출력용 세션이 연결되지 않았습니다.");return await jt(t,{mainNotice:HT(),updatedAt:Oe()}),console.log("ConnectionDB: 메인 공지사항 완전 제거 완료:",e),!0}catch(t){throw console.error("메인 공지사항 삭제 실패:",t),t}}async deactivateMainNotice(e){try{console.log("ConnectionDB: 메인 공지사항 비활성화 시작:",e);const t=De(ve,"connections",e),i=await Yt(t);if(!i.exists())throw new Error("출력용 세션을 찾을 수 없습니다.");const a=i.data();if(a.status!=="connected"&&a.status!=="expired")throw new Error("출력용 세션이 연결되지 않았습니다.");await jt(t,{mainNotice:{isActive:!1,deactivatedAt:Oe()},updatedAt:Oe()}),console.log("ConnectionDB: 메인 공지사항 비활성화 완료:",e)}catch(t){throw console.error("메인 공지사항 비활성화 실패:",t),t}}async notifyMainNoticeActive(e){try{const t=Xe(ve,"connections"),a=(await Bt(t)).docs.map(async l=>{const u=De(ve,"connections",l.id);await jt(u,{mainNoticeAlert:{isActive:e,timestamp:new Date().toISOString()}})});await Promise.all(a)}catch(t){throw t}}async getMainNoticeStatus(){try{const e=Xe(ve,"settings"),t=De(e,"mainNotice"),i=await Yt(t);return i.exists()&&i.data().isActive||!1}catch(e){return console.error("메인 공지사항 상태 조회 실패:",e),!1}}async getSchoolBlockingStatus(){try{const e=Xe(ve,"settings"),t=De(e,"schoolBlocking"),i=De(e,"mainNotice"),[a,l]=await Promise.all([Yt(t),Yt(i)]),u=a.exists()&&a.data().isActive||!1,m=l.exists()&&l.data().isActive||!1;return u&&!m}catch(e){return console.error("차단 상태 조회 실패:",e),!1}}async setSchoolBlockingStatus(e){try{const t=Xe(ve,"settings"),i=De(t,"schoolBlocking");await ar(i,{isActive:e,updatedAt:new Date().toISOString()})}catch(t){throw console.error("차단 상태 설정 실패:",t),t}}subscribeToSchoolBlockingStatus(e){const t=Xe(ve,"settings"),i=De(t,"schoolBlocking"),a=De(t,"mainNotice");let l=!1,u=!1;const m=()=>{const v=l&&!u;try{e(v)}catch(b){console.error("subscribeToSchoolBlockingStatus 콜백 오류:",b)}},g=oa(i,v=>{l=v.exists()&&v.data().isActive||!1,m()}),y=oa(a,v=>{u=v.exists()&&v.data().isActive||!1,m()});return()=>{try{g&&g()}catch{}try{y&&y()}catch{}}}async notifyBlockingStatus(e){const t=Xe(ve,"connections"),i=await Bt(t),a=[];i.forEach(l=>{a.push(jt(l.ref,{blockingAlert:e,blockingTimestamp:new Date().toISOString()}))}),await Promise.all(a)}async setPinNickname(e,t){try{const i=De(ve,"connections",`pin_${e}`),a={nickname:t.trim(),updatedAt:Oe(),pin:e};return(await Yt(i)).exists()?await jt(i,{nickname:t.trim(),updatedAt:Oe()}):await ar(i,a),console.log(`PIN ${e} 별명 설정:`,t),!0}catch(i){return console.error("PIN 별명 설정 실패:",i),!1}}async getPinNickname(e){try{const t=De(ve,"connections",`pin_${e}`),i=await Yt(t);return i.exists()&&i.data().nickname||""}catch(t){return console.error("PIN 별명 조회 실패:",t),""}}async getActiveConnectionsWithNicknames(){try{const e=await this.getActiveConnections();return await Promise.all(e.map(async i=>{const a=await this.getPinNickname(i.pin);return{...i,nickname:a||""}}))}catch(e){return console.error("별명 포함 활성 연결 조회 실패:",e),[]}}}const Ce=new M3;class P3{async getScheduleData(e,t){try{const i=Xe(ve,"schedules"),a=new Date(e,t-1,1),l=new Date(e,t,0),u=Rn(i,Mn("eventDate",">=",a),Mn("eventDate","<=",l),ha("eventDate")),m=await Bt(u),g={};return m.forEach(y=>{const v=y.data(),T=v.eventDate.toDate().getDate();g[T]||(g[T]=[]),g[T].push({id:y.id,title:v.title,target:v.target||[],createdAt:v.createdAt})}),g}catch(i){return console.error("학사일정 데이터 가져오기 실패:",i),{}}}async getWeeklyScheduleData(e,t){try{console.log("DataService: 주간 학사일정 데이터 가져오기 시작",{startDate:e,endDate:t});const i=Et.fromDate(e),a=Et.fromDate(t);console.log("DataService: 변환된 타임스탬프",{startTimestamp:i,endTimestamp:a});const l=Xe(ve,"schedules"),u=Rn(l,Mn("eventDate",">=",i),Mn("eventDate","<=",a),ha("eventDate")),m=await Bt(u),g={};return m.forEach(y=>{const v=y.data(),T=v.eventDate.toDate().getDate();g[T]||(g[T]=[]),g[T].push({id:y.id,title:v.title,target:v.target||[],createdAt:v.createdAt})}),console.log("DataService: 주간 학사일정 데이터 가져오기 완료",g),g}catch(i){return console.error("주간 학사일정 데이터 가져오기 실패:",i),{}}}async addScheduleEvent(e,t,i,a,l=[]){try{const u=Xe(ve,"schedules"),m=new Date(e,t-1,i);await Si(u,{title:a,target:l,eventDate:m,createdAt:Oe(),updatedAt:Oe()}),console.log("학사일정이 추가되었습니다:",{year:e,month:t,day:i,title:a,target:l})}catch(u){throw console.error("학사일정 추가 실패:",u),u}}async updateScheduleEventById(e,t){try{const i=De(ve,"schedules",e),a={...t};a.eventDate&&typeof a.eventDate=="string"&&(a.eventDate=new Date(a.eventDate)),await jt(i,{...a,updatedAt:Oe()}),console.log("학사일정이 수정되었습니다.")}catch(i){throw console.error("학사일정 수정 실패:",i),i}}async deleteScheduleEvent(e){try{const t=De(ve,"schedules",e);await Ds(t),console.log("학사일정이 삭제되었습니다.")}catch(t){throw console.error("학사일정 삭제 실패:",t),t}}async updateScheduleEvent(e,t,i,a){try{const l=Xe(ve,"schedules"),u=Rn(l,Mn("year","==",e),Mn("month","==",t),Mn("day","==",i)),m=await Bt(u);if(m.empty)await Si(l,{year:e,month:t,day:i,events:a,createdAt:Oe(),updatedAt:Oe()});else{const g=m.docs[0].ref;await jt(g,{events:a,updatedAt:Oe()})}}catch(l){console.error("학사일정 업데이트 실패:",l)}}async getMealData(e){try{const t=Xe(ve,"meals"),i=Rn(t,Mn("date","==",e)),a=await Bt(i);if(!a.empty){const l=a.docs[0].data();return{lunch:l.lunch||[],dinner:l.dinner||[]}}return{lunch:[],dinner:[]}}catch(t){return console.error("급식 데이터 가져오기 실패:",t),{lunch:[],dinner:[]}}}async addMealData(e,t,i){try{const a=Xe(ve,"meals");await Si(a,{date:e,lunch:t,dinner:i,createdAt:Oe(),updatedAt:Oe()}),console.log("급식 데이터가 추가되었습니다:",{date:e,lunch:t,dinner:i})}catch(a){console.error("급식 데이터 추가 실패:",a)}}async updateMealData(e,t,i){try{const a=Xe(ve,"meals"),l=Rn(a,Mn("date","==",e)),u=await Bt(l);if(u.empty)await Si(a,{date:e,lunch:t,dinner:i,createdAt:Oe(),updatedAt:Oe()}),console.log("급식 데이터가 생성되었습니다:",{date:e,lunchItems:t,dinnerItems:i});else{const m=u.docs[0].ref;await jt(m,{lunch:t,dinner:i,updatedAt:Oe()})}console.log("급식 정보가 업데이트되었습니다.")}catch(a){throw console.error("급식 정보 업데이트 실패:",a),a}}async deleteMealData(e){try{const t=Xe(ve,"meals"),i=Rn(t,Mn("date","==",e));(await Bt(i)).forEach(async l=>{await Ds(l.ref)}),console.log("급식 정보가 삭제되었습니다.")}catch(t){throw console.error("급식 정보 삭제 실패:",t),t}}async getAnnouncements(){try{const e=Xe(ve,"announcements"),t=Rn(e),i=await Bt(t),a=[];return i.forEach(l=>{a.push({id:l.id,...l.data()})}),a}catch{return[]}}async incrementAnnouncementViews(e){try{const t=De(ve,"announcements",e);await jt(t,{views:$T(1),updatedAt:Oe()})}catch{}}async addAnnouncement(e,t){try{const i=Xe(ve,"announcements");await Si(i,{title:e,content:t,views:0,createdAt:Oe(),updatedAt:Oe()})}catch(i){throw i}}async updateAnnouncement(e,t,i){try{const a=De(ve,"announcements",e);await jt(a,{title:t,content:i,updatedAt:Oe()})}catch(a){throw a}}async deleteAnnouncement(e){try{const t=De(ve,"announcements",e);await Ds(t)}catch(t){throw t}}async incrementAnnouncementViews(e){try{const t=De(ve,"announcements",e),i=await Yt(t);if(i.exists()){const a=i.data().views||0;await jt(t,{views:a+1,updatedAt:Oe()})}}catch{}}async getAllergyInfo(){try{const e=De(ve,"settings","allergy"),t=await Yt(e);return t.exists()?t.data().items||[]:[]}catch(e){return console.error("알레르기 정보 가져오기 실패:",e),[]}}async getSchoolInfo(){try{const e=De(ve,"settings","school"),t=await Yt(e);return t.exists()?t.data():{}}catch(e){return console.error("학교 정보 가져오기 실패:",e),{}}}async updateSchoolInfo(e,t){try{const i=De(ve,"settings","school");await jt(i,{name:e,teamName:t,updatedAt:Oe()})}catch(i){console.error("학교 정보 업데이트 실패:",i)}}async updateAllergyInfo(e){try{if(console.log("DataService: 알레르기 정보 업데이트 시작:",e),!Array.isArray(e)||e.length===0)throw new Error("알레르기 정보가 올바르지 않습니다.");const t=De(ve,"settings","allergy"),i={items:e,updatedAt:Oe(),createdAt:Oe()};console.log("Firestore에 저장할 데이터:",i),await ar(t,i,{merge:!0}),console.log("알레르기 정보 업데이트 완료")}catch(t){throw console.error("알레르기 정보 업데이트 실패:",t),t}}async initializeData(){}async uploadCampusLayoutImage(e){try{if(console.log("이미지 업로드 시작:",e.name,e.size,e.type),!e.type.startsWith("image/"))throw new Error("이미지 파일만 업로드 가능합니다.");if(e.size>5*1024*1024)throw new Error("파일 크기는 5MB를 초과할 수 없습니다.");const t=Date.now(),i=`campus-layout-${t}.${e.name.split(".").pop()}`,a=sw(uy,`campus-layout/${i}`);console.log("Storage 참조 생성:",a.fullPath);const l={contentType:e.type,customMetadata:{uploadedBy:"admin",uploadTime:t.toString()}},u=await A3(a,e,l);console.log("업로드 완료:",u);const m=await x3(u.ref);console.log("다운로드 URL:",m);const g=De(ve,"settings","campusLayout");return await ar(g,{imageURL:m,fileName:i,uploadedAt:Oe(),updatedAt:Oe()},{merge:!0}),console.log("Firestore 저장 완료"),m}catch(t){throw console.error("교실 배치 이미지 업로드 실패:",t),t.code==="storage/unauthorized"?new Error("Firebase Storage 권한이 없습니다. 관리자에게 문의하세요."):t.code==="storage/canceled"?new Error("업로드가 취소되었습니다."):t.code==="storage/unknown"?new Error("알 수 없는 오류가 발생했습니다."):t}}async getCampusLayoutImage(){try{const e=De(ve,"settings","campusLayout"),t=await Yt(e);return t.exists()?t.data().imageURL:null}catch(e){return console.error("교실 배치 이미지 가져오기 실패:",e),null}}async deleteCampusLayoutImage(){try{console.log("이미지 삭제 시작");const e=De(ve,"settings","campusLayout"),t=await Yt(e);if(t.exists()){const a=t.data().fileName;if(a){const l=sw(uy,`campus-layout/${a}`);await C3(l),console.log("Storage에서 이미지 삭제 완료:",a)}}await ar(e,{imageURL:null,fileName:null,updatedAt:Oe()},{merge:!0}),console.log("Firestore에서 이미지 정보 삭제 완료")}catch(e){throw console.error("교실 배치 이미지 삭제 실패:",e),e}}async getPatchnotes(){try{const e=Xe(ve,"patchnotes");return(await Bt(e)).docs.map(i=>({id:i.id,...i.data()}))}catch{throw new Error("패치 노트 목록을 가져오는데 실패했습니다.")}}async createPatchnote(e){try{const t=Xe(ve,"patchnotes");await Si(t,{version:e.version,date:e.date,title:e.title,content:e.content,type:e.type,createdAt:Oe(),updatedAt:Oe()})}catch{throw new Error("패치 노트 등록에 실패했습니다.")}}async updatePatchnote(e,t){try{const i=De(ve,"patchnotes",e);await jt(i,{version:t.version,date:t.date,title:t.title,content:t.content,type:t.type,updatedAt:Oe()})}catch{throw new Error("패치 노트 수정에 실패했습니다.")}}async deletePatchnote(e){try{const t=De(ve,"patchnotes",e);await Ds(t)}catch{throw new Error("패치 노트 삭제에 실패했습니다.")}}async getAllergyItems(){try{const e=Xe(ve,"allergyItems");return(await Bt(e)).docs.map(i=>({id:i.id,...i.data()}))}catch{throw new Error("알레르기 항목 목록을 가져오는데 실패했습니다.")}}async addAllergyItem(e){try{const t=Xe(ve,"allergyItems");await Si(t,{name:e.trim(),createdAt:Oe(),updatedAt:Oe()})}catch{throw new Error("알레르기 항목 추가에 실패했습니다.")}}async updateAllergyItem(e,t){try{const i=De(ve,"allergyItems",e);await jt(i,{name:t.trim(),updatedAt:Oe()})}catch{throw new Error("알레르기 항목 수정에 실패했습니다.")}}async deleteAllergyItem(e){try{const t=De(ve,"allergyItems",e);await Ds(t)}catch{throw new Error("알레르기 항목 삭제에 실패했습니다.")}}async deleteAllAllergyItems(){try{const e=Xe(ve,"allergyItems"),i=(await Bt(e)).docs.map(a=>Ds(a.ref));await Promise.all(i)}catch{throw new Error("모든 알레르기 항목 삭제에 실패했습니다.")}}async getAdmins(){try{const e=Xe(ve,"admins"),t=Rn(e,ha("createdAt","desc"));return(await Bt(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){throw console.error("관리자 목록 가져오기 실패:",e),e}}async getAdminByCode(e){try{const t=Xe(ve,"admins"),i=Rn(t,Mn("adminCode","==",e)),a=await Bt(i);if(a.empty)return null;const l=a.docs[0];return{id:l.id,...l.data()}}catch(t){throw console.error("관리자 조회 실패:",t),t}}async createAdmin(e){try{if(await this.getAdminByCode(e.adminCode))throw new Error("이미 존재하는 관리자 코드입니다.");const i=Xe(ve,"admins");return(await Si(i,{name:e.name,adminCode:e.adminCode,permissions:e.permissions||[],level:e.level||"일반 관리자",createdAt:Oe(),updatedAt:Oe(),isActive:!0})).id}catch(t){throw console.error("관리자 생성 실패:",t),t}}async updateAdmin(e,t){try{const i=De(ve,"admins",e),a={name:t.name,permissions:t.permissions||[],level:t.level||"일반 관리자",updatedAt:Oe()};await jt(i,a)}catch(i){throw console.error("관리자 수정 실패:",i),i}}async deleteAdmin(e){try{const t=De(ve,"admins",e);await Ds(t)}catch(t){throw console.error("관리자 삭제 실패:",t),t}}async checkAdminCodeExists(e,t=null){try{const i=Xe(ve,"admins"),a=Rn(i,Mn("adminCode","==",e)),l=await Bt(a);return t?l.docs.some(u=>u.id!==t):!l.empty}catch(i){throw console.error("관리자 코드 중복 확인 실패:",i),i}}async disconnectAdminSessions(e){try{const t=Xe(ve,"connections"),i=await Bt(t),a=[];i.forEach(l=>{const u=l.data();(u.adminCode===e||u.connectedAdminCode===e)&&a.push(Ds(l.ref))}),await Promise.all(a)}catch(t){throw t}}}const qe=new P3;class V3{constructor(){this.isSupported="Notification"in window,this.permission=this.isSupported?Notification.permission:"denied"}async requestPermission(){if(!this.isSupported)throw new Error("이 브라우저는 알림을 지원하지 않습니다.");if(this.permission==="granted")return!0;if(this.permission==="denied")throw new Error("알림 권한이 거부되었습니다.");const e=await Notification.requestPermission();return this.permission=e,e==="granted"}async showNotification(e,t={}){if(!this.isSupported||this.permission!=="granted")return console.warn("알림을 표시할 수 없습니다:",this.permission),!1;try{const i=new Notification(e,{icon:"/simpleInfo/logo.png",badge:"/simpleInfo/logo.png",...t});return i.onclick=()=>{window.focus(),i.close()},setTimeout(()=>{i.close()},5e3),!0}catch(i){return console.error("알림 발송 실패:",i),!1}}async showPatchnoteNotification(e){const t=`새로운 패치노트: ${e.version}`,i=e.title;return await this.showNotification(t,{body:i,tag:"patchnote",requireInteraction:!1,actions:[{action:"view",title:"확인하기"}]})}async showMainNoticeNotification(e){return!1}async showAnnouncementNotification(e){const t="새로운 공지사항",i=e.title;return await this.showNotification(t,{body:i,tag:"announcement",requireInteraction:!1})}async showBlockingNotification(e){const t=e?"학교 생활 도우미 서비스 차단됨":"학교 생활 도우미 서비스 정상화",i=e?"시스템 점검으로 인해 일시적으로 서비스가 차단되었습니다.":"시스템 점검이 완료되어 정상적으로 서비스를 이용할 수 있습니다.";return await this.showNotification(t,{body:i,tag:"school-blocking",requireInteraction:!0,urgent:!0})}getPermissionStatus(){return{isSupported:this.isSupported,permission:this.permission,canShow:this.isSupported&&this.permission==="granted"}}saveNotificationSettings(e){localStorage.setItem("notificationSettings",JSON.stringify(e))}getNotificationSettings(){const e=localStorage.getItem("notificationSettings");return e?JSON.parse(e):{patchnotes:!0,announcements:!0,mainNotice:!0}}updateNotificationSetting(e,t){const i=this.getNotificationSettings();i[e]=t,this.saveNotificationSettings(i)}}const Eu=new V3,iw=n=>n,L3=()=>{let n=iw;return{configure(e){n=e},generate(e){return n(e)},reset(){n=iw}}},U3=L3();function go(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(i=>t.searchParams.append("args[]",i)),`Minified MUI error #${n}; visit ${t} for the full message.`}function Dl(n){if(typeof n!="string")throw new Error(go(7));return n.charAt(0).toUpperCase()+n.slice(1)}function UA(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=UA(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function zA(){for(var n,e,t=0,i="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=UA(n))&&(i&&(i+=" "),i+=e);return i}function z3(n,e,t=void 0){const i={};for(const a in n){const l=n[a];let u="",m=!0;for(let g=0;g<l.length;g+=1){const y=l[g];y&&(u+=(m===!0?"":" ")+e(y),m=!1,t&&t[y]&&(u+=" "+t[y]))}i[a]=u}return i}var Rg={exports:{}},wt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function B3(){if(rw)return wt;rw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),T=Symbol.for("react.view_transition"),N=Symbol.for("react.client.reference");function P(M){if(typeof M=="object"&&M!==null){var L=M.$$typeof;switch(L){case n:switch(M=M.type,M){case t:case a:case i:case g:case y:case T:return M;default:switch(M=M&&M.$$typeof,M){case u:case m:case b:case v:return M;case l:return M;default:return L}}case e:return L}}}return wt.ContextConsumer=l,wt.ContextProvider=u,wt.Element=n,wt.ForwardRef=m,wt.Fragment=t,wt.Lazy=b,wt.Memo=v,wt.Portal=e,wt.Profiler=a,wt.StrictMode=i,wt.Suspense=g,wt.SuspenseList=y,wt.isContextConsumer=function(M){return P(M)===l},wt.isContextProvider=function(M){return P(M)===u},wt.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===n},wt.isForwardRef=function(M){return P(M)===m},wt.isFragment=function(M){return P(M)===t},wt.isLazy=function(M){return P(M)===b},wt.isMemo=function(M){return P(M)===v},wt.isPortal=function(M){return P(M)===e},wt.isProfiler=function(M){return P(M)===a},wt.isStrictMode=function(M){return P(M)===i},wt.isSuspense=function(M){return P(M)===g},wt.isSuspenseList=function(M){return P(M)===y},wt.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===t||M===a||M===i||M===g||M===y||typeof M=="object"&&M!==null&&(M.$$typeof===b||M.$$typeof===v||M.$$typeof===u||M.$$typeof===l||M.$$typeof===m||M.$$typeof===N||M.getModuleId!==void 0)},wt.typeOf=P,wt}var aw;function F3(){return aw||(aw=1,Rg.exports=B3()),Rg.exports}var BA=F3();function rr(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function FA(n){if(k.isValidElement(n)||BA.isValidElementType(n)||!rr(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=FA(n[t])}),e}function ms(n,e,t={clone:!0}){const i=t.clone?{...n}:n;return rr(n)&&rr(e)&&Object.keys(e).forEach(a=>{k.isValidElement(e[a])||BA.isValidElementType(e[a])?i[a]=e[a]:rr(e[a])&&Object.prototype.hasOwnProperty.call(n,a)&&rr(n[a])?i[a]=ms(n[a],e[a],t):t.clone?i[a]=rr(e[a])?FA(e[a]):e[a]:i[a]=e[a]}),i}function hu(n,e){return e?ms(n,e,{clone:!1}):n}function ow(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(i=>i.startsWith("@container")).sort((i,a)=>{const l=/min-width:\s*([0-9.]+)/;return+(i.match(l)?.[1]||0)-+(a.match(l)?.[1]||0)});return t.length?t.reduce((i,a)=>{const l=e[a];return delete i[a],i[a]=l,i},{...e}):e}function q3(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function H3(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,i,a]=t,l=Number.isNaN(+i)?i||0:+i;return n.containerQueries(a).up(l)}function $3(n){const e=(l,u)=>l.replace("@media",u?`@container ${u}`:"@container");function t(l,u){l.up=(...m)=>e(n.breakpoints.up(...m),u),l.down=(...m)=>e(n.breakpoints.down(...m),u),l.between=(...m)=>e(n.breakpoints.between(...m),u),l.only=(...m)=>e(n.breakpoints.only(...m),u),l.not=(...m)=>{const g=e(n.breakpoints.not(...m),u);return g.includes("not all and")?g.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):g}}const i={},a=l=>(t(i,l),i);return t(a),{...n,containerQueries:a}}const Qf={xs:0,sm:600,md:900,lg:1200,xl:1536},lw={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${Qf[n]}px)`},G3={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:Qf[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function vr(n,e,t){const i=n.theme||{};if(Array.isArray(e)){const l=i.breakpoints||lw;return e.reduce((u,m,g)=>(u[l.up(l.keys[g])]=t(e[g]),u),{})}if(typeof e=="object"){const l=i.breakpoints||lw;return Object.keys(e).reduce((u,m)=>{if(q3(l.keys,m)){const g=H3(i.containerQueries?i:G3,m);g&&(u[g]=t(e[m],m))}else if(Object.keys(l.values||Qf).includes(m)){const g=l.up(m);u[g]=t(e[m],m)}else{const g=m;u[g]=e[g]}return u},{})}return t(e)}function K3(n={}){return n.keys?.reduce((t,i)=>{const a=n.up(i);return t[a]={},t},{})||{}}function cw(n,e){return n.reduce((t,i)=>{const a=t[i];return(!a||Object.keys(a).length===0)&&delete t[i],t},e)}function Xf(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const i=`vars.${e}`.split(".").reduce((a,l)=>a&&a[l]?a[l]:null,n);if(i!=null)return i}return e.split(".").reduce((i,a)=>i&&i[a]!=null?i[a]:null,n)}function vf(n,e,t,i=t){let a;return typeof n=="function"?a=n(t):Array.isArray(n)?a=n[t]||i:a=Xf(n,t)||i,e&&(a=e(a,i,n)),a}function Wt(n){const{prop:e,cssProperty:t=n.prop,themeKey:i,transform:a}=n,l=u=>{if(u[e]==null)return null;const m=u[e],g=u.theme,y=Xf(g,i)||{};return vr(u,m,b=>{let T=vf(y,a,b);return b===T&&typeof b=="string"&&(T=vf(y,a,`${e}${b==="default"?"":Dl(b)}`,b)),t===!1?T:{[t]:T}})};return l.propTypes={},l.filterProps=[e],l}function Y3(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const Q3={m:"margin",p:"padding"},X3={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},uw={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},W3=Y3(n=>{if(n.length>2)if(uw[n])n=uw[n];else return[n];const[e,t]=n.split(""),i=Q3[e],a=X3[t]||"";return Array.isArray(a)?a.map(l=>i+l):[i+a]}),jv=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],kv=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...jv,...kv];function Ku(n,e,t,i){const a=Xf(n,e,!0)??t;return typeof a=="number"||typeof a=="string"?l=>typeof l=="string"?l:typeof a=="string"?a.startsWith("var(")&&l===0?0:a.startsWith("var(")&&l===1?a:`calc(${l} * ${a})`:a*l:Array.isArray(a)?l=>{if(typeof l=="string")return l;const u=Math.abs(l),m=a[u];return l>=0?m:typeof m=="number"?-m:typeof m=="string"&&m.startsWith("var(")?`calc(-1 * ${m})`:`-${m}`}:typeof a=="function"?a:()=>{}}function Ov(n){return Ku(n,"spacing",8)}function Yu(n,e){return typeof e=="string"||e==null?e:n(e)}function J3(n,e){return t=>n.reduce((i,a)=>(i[a]=Yu(e,t),i),{})}function Z3(n,e,t,i){if(!e.includes(t))return null;const a=W3(t),l=J3(a,i),u=n[t];return vr(n,u,l)}function qA(n,e){const t=Ov(n.theme);return Object.keys(n).map(i=>Z3(n,e,i,t)).reduce(hu,{})}function Ut(n){return qA(n,jv)}Ut.propTypes={};Ut.filterProps=jv;function zt(n){return qA(n,kv)}zt.propTypes={};zt.filterProps=kv;function Wf(...n){const e=n.reduce((i,a)=>(a.filterProps.forEach(l=>{i[l]=a}),i),{}),t=i=>Object.keys(i).reduce((a,l)=>e[l]?hu(a,e[l](i)):a,{});return t.propTypes={},t.filterProps=n.reduce((i,a)=>i.concat(a.filterProps),[]),t}function js(n){return typeof n!="number"?n:`${n}px solid`}function Os(n,e){return Wt({prop:n,themeKey:"borders",transform:e})}const eO=Os("border",js),tO=Os("borderTop",js),nO=Os("borderRight",js),sO=Os("borderBottom",js),iO=Os("borderLeft",js),rO=Os("borderColor"),aO=Os("borderTopColor"),oO=Os("borderRightColor"),lO=Os("borderBottomColor"),cO=Os("borderLeftColor"),uO=Os("outline",js),hO=Os("outlineColor"),Jf=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=Ku(n.theme,"shape.borderRadius",4),t=i=>({borderRadius:Yu(e,i)});return vr(n,n.borderRadius,t)}return null};Jf.propTypes={};Jf.filterProps=["borderRadius"];Wf(eO,tO,nO,sO,iO,rO,aO,oO,lO,cO,Jf,uO,hO);const Zf=n=>{if(n.gap!==void 0&&n.gap!==null){const e=Ku(n.theme,"spacing",8),t=i=>({gap:Yu(e,i)});return vr(n,n.gap,t)}return null};Zf.propTypes={};Zf.filterProps=["gap"];const em=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=Ku(n.theme,"spacing",8),t=i=>({columnGap:Yu(e,i)});return vr(n,n.columnGap,t)}return null};em.propTypes={};em.filterProps=["columnGap"];const tm=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=Ku(n.theme,"spacing",8),t=i=>({rowGap:Yu(e,i)});return vr(n,n.rowGap,t)}return null};tm.propTypes={};tm.filterProps=["rowGap"];const dO=Wt({prop:"gridColumn"}),fO=Wt({prop:"gridRow"}),mO=Wt({prop:"gridAutoFlow"}),pO=Wt({prop:"gridAutoColumns"}),gO=Wt({prop:"gridAutoRows"}),yO=Wt({prop:"gridTemplateColumns"}),vO=Wt({prop:"gridTemplateRows"}),_O=Wt({prop:"gridTemplateAreas"}),SO=Wt({prop:"gridArea"});Wf(Zf,em,tm,dO,fO,mO,pO,gO,yO,vO,_O,SO);function wl(n,e){return e==="grey"?e:n}const bO=Wt({prop:"color",themeKey:"palette",transform:wl}),wO=Wt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:wl}),EO=Wt({prop:"backgroundColor",themeKey:"palette",transform:wl});Wf(bO,wO,EO);function hs(n){return n<=1&&n!==0?`${n*100}%`:n}const TO=Wt({prop:"width",transform:hs}),Mv=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{const i=n.theme?.breakpoints?.values?.[t]||Qf[t];return i?n.theme?.breakpoints?.unit!=="px"?{maxWidth:`${i}${n.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:hs(t)}};return vr(n,n.maxWidth,e)}return null};Mv.filterProps=["maxWidth"];const AO=Wt({prop:"minWidth",transform:hs}),xO=Wt({prop:"height",transform:hs}),CO=Wt({prop:"maxHeight",transform:hs}),NO=Wt({prop:"minHeight",transform:hs});Wt({prop:"size",cssProperty:"width",transform:hs});Wt({prop:"size",cssProperty:"height",transform:hs});const RO=Wt({prop:"boxSizing"});Wf(TO,Mv,AO,xO,CO,NO,RO);const nm={border:{themeKey:"borders",transform:js},borderTop:{themeKey:"borders",transform:js},borderRight:{themeKey:"borders",transform:js},borderBottom:{themeKey:"borders",transform:js},borderLeft:{themeKey:"borders",transform:js},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:js},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Jf},color:{themeKey:"palette",transform:wl},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:wl},backgroundColor:{themeKey:"palette",transform:wl},p:{style:zt},pt:{style:zt},pr:{style:zt},pb:{style:zt},pl:{style:zt},px:{style:zt},py:{style:zt},padding:{style:zt},paddingTop:{style:zt},paddingRight:{style:zt},paddingBottom:{style:zt},paddingLeft:{style:zt},paddingX:{style:zt},paddingY:{style:zt},paddingInline:{style:zt},paddingInlineStart:{style:zt},paddingInlineEnd:{style:zt},paddingBlock:{style:zt},paddingBlockStart:{style:zt},paddingBlockEnd:{style:zt},m:{style:Ut},mt:{style:Ut},mr:{style:Ut},mb:{style:Ut},ml:{style:Ut},mx:{style:Ut},my:{style:Ut},margin:{style:Ut},marginTop:{style:Ut},marginRight:{style:Ut},marginBottom:{style:Ut},marginLeft:{style:Ut},marginX:{style:Ut},marginY:{style:Ut},marginInline:{style:Ut},marginInlineStart:{style:Ut},marginInlineEnd:{style:Ut},marginBlock:{style:Ut},marginBlockStart:{style:Ut},marginBlockEnd:{style:Ut},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Zf},rowGap:{style:tm},columnGap:{style:em},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:hs},maxWidth:{style:Mv},minWidth:{transform:hs},height:{transform:hs},maxHeight:{transform:hs},minHeight:{transform:hs},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function IO(...n){const e=n.reduce((i,a)=>i.concat(Object.keys(a)),[]),t=new Set(e);return n.every(i=>t.size===Object.keys(i).length)}function DO(n,e){return typeof n=="function"?n(e):n}function jO(){function n(t,i,a,l){const u={[t]:i,theme:a},m=l[t];if(!m)return{[t]:i};const{cssProperty:g=t,themeKey:y,transform:v,style:b}=m;if(i==null)return null;if(y==="typography"&&i==="inherit")return{[t]:i};const T=Xf(a,y)||{};return b?b(u):vr(u,i,P=>{let M=vf(T,v,P);return P===M&&typeof P=="string"&&(M=vf(T,v,`${t}${P==="default"?"":Dl(P)}`,P)),g===!1?M:{[g]:M}})}function e(t){const{sx:i,theme:a={},nested:l}=t||{};if(!i)return null;const u=a.unstable_sxConfig??nm;function m(g){let y=g;if(typeof g=="function")y=g(a);else if(typeof g!="object")return g;if(!y)return null;const v=K3(a.breakpoints),b=Object.keys(v);let T=v;return Object.keys(y).forEach(N=>{const P=DO(y[N],a);if(P!=null)if(typeof P=="object")if(u[N])T=hu(T,n(N,P,a,u));else{const M=vr({theme:a},P,L=>({[N]:L}));IO(M,P)?T[N]=e({sx:P,theme:a,nested:!0}):T=hu(T,M)}else T=hu(T,n(N,P,a,u))}),!l&&a.modularCssLayers?{"@layer sx":ow(a,cw(b,T))}:ow(a,cw(b,T))}return Array.isArray(i)?i.map(m):m(i)}return e}const jl=jO();jl.filterProps=["sx"];function hy(){return hy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hy.apply(null,arguments)}function kO(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function OO(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var MO=(function(){function n(t){var i=this;this._insertTag=function(a){var l;i.tags.length===0?i.insertionPoint?l=i.insertionPoint.nextSibling:i.prepend?l=i.container.firstChild:l=i.before:l=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(a,l),i.tags.push(a)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(OO(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var l=kO(a);try{l.insertRule(i,l.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var a;return(a=i.parentNode)==null?void 0:a.removeChild(i)}),this.tags=[],this.ctr=0},n})(),On="-ms-",_f="-moz-",ct="-webkit-",HA="comm",Pv="rule",Vv="decl",PO="@import",$A="@keyframes",VO="@layer",LO=Math.abs,sm=String.fromCharCode,UO=Object.assign;function zO(n,e){return Dn(n,0)^45?(((e<<2^Dn(n,0))<<2^Dn(n,1))<<2^Dn(n,2))<<2^Dn(n,3):0}function GA(n){return n.trim()}function BO(n,e){return(n=e.exec(n))?n[0]:n}function ut(n,e,t){return n.replace(e,t)}function dy(n,e){return n.indexOf(e)}function Dn(n,e){return n.charCodeAt(e)|0}function Tu(n,e,t){return n.slice(e,t)}function wi(n){return n.length}function Lv(n){return n.length}function kd(n,e){return e.push(n),n}function FO(n,e){return n.map(e).join("")}var im=1,kl=1,KA=0,Zn=0,ln=0,ql="";function rm(n,e,t,i,a,l,u){return{value:n,root:e,parent:t,type:i,props:a,children:l,line:im,column:kl,length:u,return:""}}function Xc(n,e){return UO(rm("",null,null,"",null,null,0),n,{length:-n.length},e)}function qO(){return ln}function HO(){return ln=Zn>0?Dn(ql,--Zn):0,kl--,ln===10&&(kl=1,im--),ln}function ps(){return ln=Zn<KA?Dn(ql,Zn++):0,kl++,ln===10&&(kl=1,im++),ln}function Di(){return Dn(ql,Zn)}function Gd(){return Zn}function Qu(n,e){return Tu(ql,n,e)}function Au(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function YA(n){return im=kl=1,KA=wi(ql=n),Zn=0,[]}function QA(n){return ql="",n}function Kd(n){return GA(Qu(Zn-1,fy(n===91?n+2:n===40?n+1:n)))}function $O(n){for(;(ln=Di())&&ln<33;)ps();return Au(n)>2||Au(ln)>3?"":" "}function GO(n,e){for(;--e&&ps()&&!(ln<48||ln>102||ln>57&&ln<65||ln>70&&ln<97););return Qu(n,Gd()+(e<6&&Di()==32&&ps()==32))}function fy(n){for(;ps();)switch(ln){case n:return Zn;case 34:case 39:n!==34&&n!==39&&fy(ln);break;case 40:n===41&&fy(n);break;case 92:ps();break}return Zn}function KO(n,e){for(;ps()&&n+ln!==57;)if(n+ln===84&&Di()===47)break;return"/*"+Qu(e,Zn-1)+"*"+sm(n===47?n:ps())}function YO(n){for(;!Au(Di());)ps();return Qu(n,Zn)}function QO(n){return QA(Yd("",null,null,null,[""],n=YA(n),0,[0],n))}function Yd(n,e,t,i,a,l,u,m,g){for(var y=0,v=0,b=u,T=0,N=0,P=0,M=1,L=1,z=1,H=0,G="",ie=a,re=l,ae=i,j=G;L;)switch(P=H,H=ps()){case 40:if(P!=108&&Dn(j,b-1)==58){dy(j+=ut(Kd(H),"&","&\f"),"&\f")!=-1&&(z=-1);break}case 34:case 39:case 91:j+=Kd(H);break;case 9:case 10:case 13:case 32:j+=$O(P);break;case 92:j+=GO(Gd()-1,7);continue;case 47:switch(Di()){case 42:case 47:kd(XO(KO(ps(),Gd()),e,t),g);break;default:j+="/"}break;case 123*M:m[y++]=wi(j)*z;case 125*M:case 59:case 0:switch(H){case 0:case 125:L=0;case 59+v:z==-1&&(j=ut(j,/\f/g,"")),N>0&&wi(j)-b&&kd(N>32?dw(j+";",i,t,b-1):dw(ut(j," ","")+";",i,t,b-2),g);break;case 59:j+=";";default:if(kd(ae=hw(j,e,t,y,v,a,m,G,ie=[],re=[],b),l),H===123)if(v===0)Yd(j,e,ae,ae,ie,l,b,m,re);else switch(T===99&&Dn(j,3)===110?100:T){case 100:case 108:case 109:case 115:Yd(n,ae,ae,i&&kd(hw(n,ae,ae,0,0,a,m,G,a,ie=[],b),re),a,re,b,m,i?ie:re);break;default:Yd(j,ae,ae,ae,[""],re,0,m,re)}}y=v=N=0,M=z=1,G=j="",b=u;break;case 58:b=1+wi(j),N=P;default:if(M<1){if(H==123)--M;else if(H==125&&M++==0&&HO()==125)continue}switch(j+=sm(H),H*M){case 38:z=v>0?1:(j+="\f",-1);break;case 44:m[y++]=(wi(j)-1)*z,z=1;break;case 64:Di()===45&&(j+=Kd(ps())),T=Di(),v=b=wi(G=j+=YO(Gd())),H++;break;case 45:P===45&&wi(j)==2&&(M=0)}}return l}function hw(n,e,t,i,a,l,u,m,g,y,v){for(var b=a-1,T=a===0?l:[""],N=Lv(T),P=0,M=0,L=0;P<i;++P)for(var z=0,H=Tu(n,b+1,b=LO(M=u[P])),G=n;z<N;++z)(G=GA(M>0?T[z]+" "+H:ut(H,/&\f/g,T[z])))&&(g[L++]=G);return rm(n,e,t,a===0?Pv:m,g,y,v)}function XO(n,e,t){return rm(n,e,t,HA,sm(qO()),Tu(n,2,-2),0)}function dw(n,e,t,i){return rm(n,e,t,Vv,Tu(n,0,i),Tu(n,i+1,-1),i)}function El(n,e){for(var t="",i=Lv(n),a=0;a<i;a++)t+=e(n[a],a,n,e)||"";return t}function WO(n,e,t,i){switch(n.type){case VO:if(n.children.length)break;case PO:case Vv:return n.return=n.return||n.value;case HA:return"";case $A:return n.return=n.value+"{"+El(n.children,i)+"}";case Pv:n.value=n.props.join(",")}return wi(t=El(n.children,i))?n.return=n.value+"{"+t+"}":""}function JO(n){var e=Lv(n);return function(t,i,a,l){for(var u="",m=0;m<e;m++)u+=n[m](t,i,a,l)||"";return u}}function ZO(n){return function(e){e.root||(e=e.return)&&n(e)}}function XA(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var eM=function(e,t,i){for(var a=0,l=0;a=l,l=Di(),a===38&&l===12&&(t[i]=1),!Au(l);)ps();return Qu(e,Zn)},tM=function(e,t){var i=-1,a=44;do switch(Au(a)){case 0:a===38&&Di()===12&&(t[i]=1),e[i]+=eM(Zn-1,t,i);break;case 2:e[i]+=Kd(a);break;case 4:if(a===44){e[++i]=Di()===58?"&\f":"",t[i]=e[i].length;break}default:e[i]+=sm(a)}while(a=ps());return e},nM=function(e,t){return QA(tM(YA(e),t))},fw=new WeakMap,sM=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,i=e.parent,a=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!fw.get(i))&&!a){fw.set(e,!0);for(var l=[],u=nM(t,l),m=i.props,g=0,y=0;g<u.length;g++)for(var v=0;v<m.length;v++,y++)e.props[y]=l[g]?u[g].replace(/&\f/g,m[v]):m[v]+" "+u[g]}}},iM=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function WA(n,e){switch(zO(n,e)){case 5103:return ct+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ct+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return ct+n+_f+n+On+n+n;case 6828:case 4268:return ct+n+On+n+n;case 6165:return ct+n+On+"flex-"+n+n;case 5187:return ct+n+ut(n,/(\w+).+(:[^]+)/,ct+"box-$1$2"+On+"flex-$1$2")+n;case 5443:return ct+n+On+"flex-item-"+ut(n,/flex-|-self/,"")+n;case 4675:return ct+n+On+"flex-line-pack"+ut(n,/align-content|flex-|-self/,"")+n;case 5548:return ct+n+On+ut(n,"shrink","negative")+n;case 5292:return ct+n+On+ut(n,"basis","preferred-size")+n;case 6060:return ct+"box-"+ut(n,"-grow","")+ct+n+On+ut(n,"grow","positive")+n;case 4554:return ct+ut(n,/([^-])(transform)/g,"$1"+ct+"$2")+n;case 6187:return ut(ut(ut(n,/(zoom-|grab)/,ct+"$1"),/(image-set)/,ct+"$1"),n,"")+n;case 5495:case 3959:return ut(n,/(image-set\([^]*)/,ct+"$1$`$1");case 4968:return ut(ut(n,/(.+:)(flex-)?(.*)/,ct+"box-pack:$3"+On+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ct+n+n;case 4095:case 3583:case 4068:case 2532:return ut(n,/(.+)-inline(.+)/,ct+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(wi(n)-1-e>6)switch(Dn(n,e+1)){case 109:if(Dn(n,e+4)!==45)break;case 102:return ut(n,/(.+:)(.+)-([^]+)/,"$1"+ct+"$2-$3$1"+_f+(Dn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~dy(n,"stretch")?WA(ut(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Dn(n,e+1)!==115)break;case 6444:switch(Dn(n,wi(n)-3-(~dy(n,"!important")&&10))){case 107:return ut(n,":",":"+ct)+n;case 101:return ut(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ct+(Dn(n,14)===45?"inline-":"")+"box$3$1"+ct+"$2$3$1"+On+"$2box$3")+n}break;case 5936:switch(Dn(n,e+11)){case 114:return ct+n+On+ut(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return ct+n+On+ut(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return ct+n+On+ut(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return ct+n+On+n+n}return n}var rM=function(e,t,i,a){if(e.length>-1&&!e.return)switch(e.type){case Vv:e.return=WA(e.value,e.length);break;case $A:return El([Xc(e,{value:ut(e.value,"@","@"+ct)})],a);case Pv:if(e.length)return FO(e.props,function(l){switch(BO(l,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return El([Xc(e,{props:[ut(l,/:(read-\w+)/,":"+_f+"$1")]})],a);case"::placeholder":return El([Xc(e,{props:[ut(l,/:(plac\w+)/,":"+ct+"input-$1")]}),Xc(e,{props:[ut(l,/:(plac\w+)/,":"+_f+"$1")]}),Xc(e,{props:[ut(l,/:(plac\w+)/,On+"input-$1")]})],a)}return""})}},aM=[rM],oM=function(e){var t=e.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(M){var L=M.getAttribute("data-emotion");L.indexOf(" ")!==-1&&(document.head.appendChild(M),M.setAttribute("data-s",""))})}var a=e.stylisPlugins||aM,l={},u,m=[];u=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(M){for(var L=M.getAttribute("data-emotion").split(" "),z=1;z<L.length;z++)l[L[z]]=!0;m.push(M)});var g,y=[sM,iM];{var v,b=[WO,ZO(function(M){v.insert(M)})],T=JO(y.concat(a,b)),N=function(L){return El(QO(L),T)};g=function(L,z,H,G){v=H,N(L?L+"{"+z.styles+"}":z.styles),G&&(P.inserted[z.name]=!0)}}var P={key:t,sheet:new MO({key:t,container:u,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:l,registered:{},insert:g};return P.sheet.hydrate(m),P},lM=!0;function cM(n,e,t){var i="";return t.split(" ").forEach(function(a){n[a]!==void 0?e.push(n[a]+";"):a&&(i+=a+" ")}),i}var JA=function(e,t,i){var a=e.key+"-"+t.name;(i===!1||lM===!1)&&e.registered[a]===void 0&&(e.registered[a]=t.styles)},uM=function(e,t,i){JA(e,t,i);var a=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var l=t;do e.insert(t===l?"."+a:"",l,e.sheet,!0),l=l.next;while(l!==void 0)}};function hM(n){for(var e=0,t,i=0,a=n.length;a>=4;++i,a-=4)t=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var dM={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},fM=/[A-Z]|^ms/g,mM=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ZA=function(e){return e.charCodeAt(1)===45},mw=function(e){return e!=null&&typeof e!="boolean"},Ig=XA(function(n){return ZA(n)?n:n.replace(fM,"-$&").toLowerCase()}),pw=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(mM,function(i,a,l){return Ei={name:a,styles:l,next:Ei},a})}return dM[e]!==1&&!ZA(e)&&typeof t=="number"&&t!==0?t+"px":t};function xu(n,e,t){if(t==null)return"";var i=t;if(i.__emotion_styles!==void 0)return i;switch(typeof t){case"boolean":return"";case"object":{var a=t;if(a.anim===1)return Ei={name:a.name,styles:a.styles,next:Ei},a.name;var l=t;if(l.styles!==void 0){var u=l.next;if(u!==void 0)for(;u!==void 0;)Ei={name:u.name,styles:u.styles,next:Ei},u=u.next;var m=l.styles+";";return m}return pM(n,e,t)}case"function":{if(n!==void 0){var g=Ei,y=t(n);return Ei=g,xu(n,e,y)}break}}var v=t;if(e==null)return v;var b=e[v];return b!==void 0?b:v}function pM(n,e,t){var i="";if(Array.isArray(t))for(var a=0;a<t.length;a++)i+=xu(n,e,t[a])+";";else for(var l in t){var u=t[l];if(typeof u!="object"){var m=u;e!=null&&e[m]!==void 0?i+=l+"{"+e[m]+"}":mw(m)&&(i+=Ig(l)+":"+pw(l,m)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&(e==null||e[u[0]]===void 0))for(var g=0;g<u.length;g++)mw(u[g])&&(i+=Ig(l)+":"+pw(l,u[g])+";");else{var y=xu(n,e,u);switch(l){case"animation":case"animationName":{i+=Ig(l)+":"+y+";";break}default:i+=l+"{"+y+"}"}}}return i}var gw=/label:\s*([^\s;{]+)\s*(;|$)/g,Ei;function ex(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var i=!0,a="";Ei=void 0;var l=n[0];if(l==null||l.raw===void 0)i=!1,a+=xu(t,e,l);else{var u=l;a+=u[0]}for(var m=1;m<n.length;m++)if(a+=xu(t,e,n[m]),i){var g=l;a+=g[m]}gw.lastIndex=0;for(var y="",v;(v=gw.exec(a))!==null;)y+="-"+v[1];var b=hM(a)+y;return{name:b,styles:a,next:Ei}}var gM=function(e){return e()},yM=dS.useInsertionEffect?dS.useInsertionEffect:!1,vM=yM||gM,tx=k.createContext(typeof HTMLElement<"u"?oM({key:"css"}):null);tx.Provider;var _M=function(e){return k.forwardRef(function(t,i){var a=k.useContext(tx);return e(t,a,i)})},SM=k.createContext({}),bM=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,wM=XA(function(n){return bM.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),EM=wM,TM=function(e){return e!=="theme"},yw=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?EM:TM},vw=function(e,t,i){var a;if(t){var l=t.shouldForwardProp;a=e.__emotion_forwardProp&&l?function(u){return e.__emotion_forwardProp(u)&&l(u)}:l}return typeof a!="function"&&i&&(a=e.__emotion_forwardProp),a},AM=function(e){var t=e.cache,i=e.serialized,a=e.isStringTag;return JA(t,i,a),vM(function(){return uM(t,i,a)}),null},xM=function n(e,t){var i=e.__emotion_real===e,a=i&&e.__emotion_base||e,l,u;t!==void 0&&(l=t.label,u=t.target);var m=vw(e,t,i),g=m||yw(a),y=!g("as");return function(){var v=arguments,b=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(l!==void 0&&b.push("label:"+l+";"),v[0]==null||v[0].raw===void 0)b.push.apply(b,v);else{var T=v[0];b.push(T[0]);for(var N=v.length,P=1;P<N;P++)b.push(v[P],T[P])}var M=_M(function(L,z,H){var G=y&&L.as||a,ie="",re=[],ae=L;if(L.theme==null){ae={};for(var j in L)ae[j]=L[j];ae.theme=k.useContext(SM)}typeof L.className=="string"?ie=cM(z.registered,re,L.className):L.className!=null&&(ie=L.className+" ");var I=ex(b.concat(re),z.registered,ae);ie+=z.key+"-"+I.name,u!==void 0&&(ie+=" "+u);var A=y&&m===void 0?yw(G):g,R={};for(var O in L)y&&O==="as"||A(O)&&(R[O]=L[O]);return R.className=ie,H&&(R.ref=H),k.createElement(k.Fragment,null,k.createElement(AM,{cache:z,serialized:I,isStringTag:typeof G=="string"}),k.createElement(G,R))});return M.displayName=l!==void 0?l:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",M.defaultProps=e.defaultProps,M.__emotion_real=M,M.__emotion_base=a,M.__emotion_styles=b,M.__emotion_forwardProp=m,Object.defineProperty(M,"toString",{value:function(){return"."+u}}),M.withComponent=function(L,z){var H=n(L,hy({},t,z,{shouldForwardProp:vw(M,z,!0)}));return H.apply(void 0,b)},M}},CM=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],my=xM.bind(null);CM.forEach(function(n){my[n]=my(n)});function NM(n,e){return my(n,e)}function RM(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const _w=[];function oo(n){return _w[0]=n,ex(_w)}const IM=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,i)=>t.val-i.val),e.reduce((t,i)=>({...t,[i.key]:i.val}),{})};function DM(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:i=5,...a}=n,l=IM(e),u=Object.keys(l);function m(T){return`@media (min-width:${typeof e[T]=="number"?e[T]:T}${t})`}function g(T){return`@media (max-width:${(typeof e[T]=="number"?e[T]:T)-i/100}${t})`}function y(T,N){const P=u.indexOf(N);return`@media (min-width:${typeof e[T]=="number"?e[T]:T}${t}) and (max-width:${(P!==-1&&typeof e[u[P]]=="number"?e[u[P]]:N)-i/100}${t})`}function v(T){return u.indexOf(T)+1<u.length?y(T,u[u.indexOf(T)+1]):m(T)}function b(T){const N=u.indexOf(T);return N===0?m(u[1]):N===u.length-1?g(u[N]):y(T,u[u.indexOf(T)+1]).replace("@media","@media not all and")}return{keys:u,values:l,up:m,down:g,between:y,only:v,not:b,unit:t,...a}}const jM={borderRadius:4};function nx(n=8,e=Ov({spacing:n})){if(n.mui)return n;const t=(...i)=>(i.length===0?[1]:i).map(l=>{const u=e(l);return typeof u=="number"?`${u}px`:u}).join(" ");return t.mui=!0,t}function kM(n,e){const t=this;if(t.vars){if(!t.colorSchemes?.[n]||typeof t.getColorSchemeSelector!="function")return{};let i=t.getColorSchemeSelector(n);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return t.palette.mode===n?e:{}}function sx(n={},...e){const{breakpoints:t={},palette:i={},spacing:a,shape:l={},...u}=n,m=DM(t),g=nx(a);let y=ms({breakpoints:m,direction:"ltr",components:{},palette:{mode:"light",...i},spacing:g,shape:{...jM,...l}},u);return y=$3(y),y.applyStyles=kM,y=e.reduce((v,b)=>ms(v,b),y),y.unstable_sxConfig={...nm,...u?.unstable_sxConfig},y.unstable_sx=function(b){return jl({sx:b,theme:this})},y}const OM={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ix(n,e,t="Mui"){const i=OM[e];return i?`${t}-${i}`:`${U3.generate(n)}-${e}`}function MM(n,e,t="Mui"){const i={};return e.forEach(a=>{i[a]=ix(n,a,t)}),i}function rx(n){const{variants:e,...t}=n,i={variants:e,style:oo(t),isProcessed:!0};return i.style===t||e&&e.forEach(a=>{typeof a.style!="function"&&(a.style=oo(a.style))}),i}const PM=sx();function Dg(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function io(n,e){return e&&n&&typeof n=="object"&&n.styles&&!n.styles.startsWith("@layer")&&(n.styles=`@layer ${e}{${String(n.styles)}}`),n}function VM(n){return n?(e,t)=>t[n]:null}function LM(n,e,t){n.theme=BM(n.theme)?t:n.theme[e]||n.theme}function Qd(n,e,t){const i=typeof e=="function"?e(n):e;if(Array.isArray(i))return i.flatMap(a=>Qd(n,a,t));if(Array.isArray(i?.variants)){let a;if(i.isProcessed)a=t?io(i.style,t):i.style;else{const{variants:l,...u}=i;a=t?io(oo(u),t):u}return ax(n,i.variants,[a],t)}return i?.isProcessed?t?io(oo(i.style),t):i.style:t?io(oo(i),t):i}function ax(n,e,t=[],i=void 0){let a;e:for(let l=0;l<e.length;l+=1){const u=e[l];if(typeof u.props=="function"){if(a??={...n,...n.ownerState,ownerState:n.ownerState},!u.props(a))continue}else for(const m in u.props)if(n[m]!==u.props[m]&&n.ownerState?.[m]!==u.props[m])continue e;typeof u.style=="function"?(a??={...n,...n.ownerState,ownerState:n.ownerState},t.push(i?io(oo(u.style(a)),i):u.style(a))):t.push(i?io(oo(u.style),i):u.style)}return t}function UM(n={}){const{themeId:e,defaultTheme:t=PM,rootShouldForwardProp:i=Dg,slotShouldForwardProp:a=Dg}=n;function l(m){LM(m,e,t)}return(m,g={})=>{RM(m,ae=>ae.filter(j=>j!==jl));const{name:y,slot:v,skipVariantsResolver:b,skipSx:T,overridesResolver:N=VM(qM(v)),...P}=g,M=y&&y.startsWith("Mui")||v?"components":"custom",L=b!==void 0?b:v&&v!=="Root"&&v!=="root"||!1,z=T||!1;let H=Dg;v==="Root"||v==="root"?H=i:v?H=a:FM(m)&&(H=void 0);const G=NM(m,{shouldForwardProp:H,label:zM(),...P}),ie=ae=>{if(ae.__emotion_real===ae)return ae;if(typeof ae=="function")return function(I){return Qd(I,ae,I.theme.modularCssLayers?M:void 0)};if(rr(ae)){const j=rx(ae);return function(A){return j.variants?Qd(A,j,A.theme.modularCssLayers?M:void 0):A.theme.modularCssLayers?io(j.style,M):j.style}}return ae},re=(...ae)=>{const j=[],I=ae.map(ie),A=[];if(j.push(l),y&&N&&A.push(function(x){const te=x.theme.components?.[y]?.styleOverrides;if(!te)return null;const U={};for(const ee in te)U[ee]=Qd(x,te[ee],x.theme.modularCssLayers?"theme":void 0);return N(x,U)}),y&&!L&&A.push(function(x){const te=x.theme?.components?.[y]?.variants;return te?ax(x,te,[],x.theme.modularCssLayers?"theme":void 0):null}),z||A.push(jl),Array.isArray(I[0])){const S=I.shift(),x=new Array(j.length).fill(""),Q=new Array(A.length).fill("");let te;te=[...x,...S,...Q],te.raw=[...x,...S.raw,...Q],j.unshift(te)}const R=[...j,...I,...A],O=G(...R);return m.muiName&&(O.muiName=m.muiName),O};return G.withConfig&&(re.withConfig=G.withConfig),re}}function zM(n,e){return void 0}function BM(n){for(const e in n)return!1;return!0}function FM(n){return typeof n=="string"&&n.charCodeAt(0)>96}function qM(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}function py(n,e,t=!1){const i={...e};for(const a in n)if(Object.prototype.hasOwnProperty.call(n,a)){const l=a;if(l==="components"||l==="slots")i[l]={...n[l],...i[l]};else if(l==="componentsProps"||l==="slotProps"){const u=n[l],m=e[l];if(!m)i[l]=u||{};else if(!u)i[l]=m;else{i[l]={...m};for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const y=g;i[l][y]=py(u[y],m[y],t)}}}else l==="className"&&t&&e.className?i.className=zA(n?.className,e?.className):l==="style"&&t&&e.style?i.style={...n?.style,...e?.style}:i[l]===void 0&&(i[l]=n[l])}return i}function HM(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}function Uv(n,e=0,t=1){return HM(n,e,t)}function $M(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(i=>i+i)),t?`rgb${t.length===4?"a":""}(${t.map((i,a)=>a<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function ba(n){if(n.type)return n;if(n.charAt(0)==="#")return ba($M(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(go(9,n));let i=n.substring(e+1,n.length-1),a;if(t==="color"){if(i=i.split(" "),a=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(a))throw new Error(go(10,a))}else i=i.split(",");return i=i.map(l=>parseFloat(l)),{type:t,values:i,colorSpace:a}}const GM=n=>{const e=ba(n);return e.values.slice(0,3).map((t,i)=>e.type.includes("hsl")&&i!==0?`${t}%`:t).join(" ")},tu=(n,e)=>{try{return GM(n)}catch{return n}};function am(n){const{type:e,colorSpace:t}=n;let{values:i}=n;return e.includes("rgb")?i=i.map((a,l)=>l<3?parseInt(a,10):a):e.includes("hsl")&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.includes("color")?i=`${t} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function ox(n){n=ba(n);const{values:e}=n,t=e[0],i=e[1]/100,a=e[2]/100,l=i*Math.min(a,1-a),u=(y,v=(y+t/30)%12)=>a-l*Math.max(Math.min(v-3,9-v,1),-1);let m="rgb";const g=[Math.round(u(0)*255),Math.round(u(8)*255),Math.round(u(4)*255)];return n.type==="hsla"&&(m+="a",g.push(e[3])),am({type:m,values:g})}function gy(n){n=ba(n);let e=n.type==="hsl"||n.type==="hsla"?ba(ox(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function KM(n,e){const t=gy(n),i=gy(e);return(Math.max(t,i)+.05)/(Math.min(t,i)+.05)}function lx(n,e){return n=ba(n),e=Uv(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,am(n)}function eo(n,e,t){try{return lx(n,e)}catch{return n}}function om(n,e){if(n=ba(n),e=Uv(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return am(n)}function gt(n,e,t){try{return om(n,e)}catch{return n}}function lm(n,e){if(n=ba(n),e=Uv(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return am(n)}function yt(n,e,t){try{return lm(n,e)}catch{return n}}function YM(n,e=.15){return gy(n)>.5?om(n,e):lm(n,e)}function Od(n,e,t){try{return YM(n,e)}catch{return n}}const QM=k.createContext(void 0);function XM(n){const{theme:e,name:t,props:i}=n;if(!e||!e.components||!e.components[t])return i;const a=e.components[t];return a.defaultProps?py(a.defaultProps,i,e.components.mergeClassNameAndStyle):!a.styleOverrides&&!a.variants?py(a,i,e.components.mergeClassNameAndStyle):i}function WM({props:n,name:e}){const t=k.useContext(QM);return XM({props:n,name:e,theme:{components:t}})}const Sw={theme:void 0};function JM(n){let e,t;return function(a){let l=e;return(l===void 0||a.theme!==t)&&(Sw.theme=a.theme,l=rx(n(Sw)),e=l,t=a.theme),l}}function ZM(n=""){function e(...i){if(!i.length)return"";const a=i[0];return typeof a=="string"&&!a.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${a}${e(...i.slice(1))})`:`, ${a}`}return(i,...a)=>`var(--${n?`${n}-`:""}${i}${e(...a)})`}const bw=(n,e,t,i=[])=>{let a=n;e.forEach((l,u)=>{u===e.length-1?Array.isArray(a)?a[Number(l)]=t:a&&typeof a=="object"&&(a[l]=t):a&&typeof a=="object"&&(a[l]||(a[l]=i.includes(l)?[]:{}),a=a[l])})},e6=(n,e,t)=>{function i(a,l=[],u=[]){Object.entries(a).forEach(([m,g])=>{(!t||t&&!t([...l,m]))&&g!=null&&(typeof g=="object"&&Object.keys(g).length>0?i(g,[...l,m],Array.isArray(g)?[...u,m]:u):e([...l,m],g,u))})}i(n)},t6=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(i=>n.includes(i))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function jg(n,e){const{prefix:t,shouldSkipGeneratingVar:i}=e||{},a={},l={},u={};return e6(n,(m,g,y)=>{if((typeof g=="string"||typeof g=="number")&&(!i||!i(m,g))){const v=`--${t?`${t}-`:""}${m.join("-")}`,b=t6(m,g);Object.assign(a,{[v]:b}),bw(l,m,`var(${v})`,y),bw(u,m,`var(${v}, ${b})`,y)}},m=>m[0]==="vars"),{css:a,vars:l,varsWithDefaults:u}}function n6(n,e={}){const{getSelector:t=z,disableCssColorScheme:i,colorSchemeSelector:a,enableContrastVars:l}=e,{colorSchemes:u={},components:m,defaultColorScheme:g="light",...y}=n,{vars:v,css:b,varsWithDefaults:T}=jg(y,e);let N=T;const P={},{[g]:M,...L}=u;if(Object.entries(L||{}).forEach(([ie,re])=>{const{vars:ae,css:j,varsWithDefaults:I}=jg(re,e);N=ms(N,I),P[ie]={css:j,vars:ae}}),M){const{css:ie,vars:re,varsWithDefaults:ae}=jg(M,e);N=ms(N,ae),P[g]={css:ie,vars:re}}function z(ie,re){let ae=a;if(a==="class"&&(ae=".%s"),a==="data"&&(ae="[data-%s]"),a?.startsWith("data-")&&!a.includes("%s")&&(ae=`[${a}="%s"]`),ie){if(ae==="media")return n.defaultColorScheme===ie?":root":{[`@media (prefers-color-scheme: ${u[ie]?.palette?.mode||ie})`]:{":root":re}};if(ae)return n.defaultColorScheme===ie?`:root, ${ae.replace("%s",String(ie))}`:ae.replace("%s",String(ie))}return":root"}return{vars:N,generateThemeVars:()=>{let ie={...v};return Object.entries(P).forEach(([,{vars:re}])=>{ie=ms(ie,re)}),ie},generateStyleSheets:()=>{const ie=[],re=n.defaultColorScheme||"light";function ae(A,R){Object.keys(R).length&&ie.push(typeof A=="string"?{[A]:{...R}}:A)}ae(t(void 0,{...b}),b);const{[re]:j,...I}=P;if(j){const{css:A}=j,R=u[re]?.palette?.mode,O=!i&&R?{colorScheme:R,...A}:{...A};ae(t(re,{...O}),O)}return Object.entries(I).forEach(([A,{css:R}])=>{const O=u[A]?.palette?.mode,S=!i&&O?{colorScheme:O,...R}:{...R};ae(t(A,{...S}),S)}),l&&ie.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),ie}}}function s6(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}const Cu={black:"#000",white:"#fff"},i6={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},ol={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},ll={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Wc={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},cl={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},ul={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},hl={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function cx(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Cu.white,default:Cu.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const ux=cx();function hx(){return{text:{primary:Cu.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Cu.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const yy=hx();function ww(n,e,t,i){const a=i.light||i,l=i.dark||i*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=lm(n.main,a):e==="dark"&&(n.dark=om(n.main,l)))}function Ew(n,e,t,i,a){const l=a.light||a,u=a.dark||a*1.5;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:t==="light"?e.light=`color-mix(in ${n}, ${e.main}, #fff ${(l*100).toFixed(0)}%)`:t==="dark"&&(e.dark=`color-mix(in ${n}, ${e.main}, #000 ${(u*100).toFixed(0)}%)`))}function r6(n="light"){return n==="dark"?{main:cl[200],light:cl[50],dark:cl[400]}:{main:cl[700],light:cl[400],dark:cl[800]}}function a6(n="light"){return n==="dark"?{main:ol[200],light:ol[50],dark:ol[400]}:{main:ol[500],light:ol[300],dark:ol[700]}}function o6(n="light"){return n==="dark"?{main:ll[500],light:ll[300],dark:ll[700]}:{main:ll[700],light:ll[400],dark:ll[800]}}function l6(n="light"){return n==="dark"?{main:ul[400],light:ul[300],dark:ul[700]}:{main:ul[700],light:ul[500],dark:ul[900]}}function c6(n="light"){return n==="dark"?{main:hl[400],light:hl[300],dark:hl[700]}:{main:hl[800],light:hl[500],dark:hl[900]}}function u6(n="light"){return n==="dark"?{main:Wc[400],light:Wc[300],dark:Wc[700]}:{main:"#ed6c02",light:Wc[500],dark:Wc[900]}}function h6(n){return`oklch(from ${n} var(--__l) 0 h / var(--__a))`}function zv(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:i=.2,colorSpace:a,...l}=n,u=n.primary||r6(e),m=n.secondary||a6(e),g=n.error||o6(e),y=n.info||l6(e),v=n.success||c6(e),b=n.warning||u6(e);function T(L){return a?h6(L):KM(L,yy.text.primary)>=t?yy.text.primary:ux.text.primary}const N=({color:L,name:z,mainShade:H=500,lightShade:G=300,darkShade:ie=700})=>{if(L={...L},!L.main&&L[H]&&(L.main=L[H]),!L.hasOwnProperty("main"))throw new Error(go(11,z?` (${z})`:"",H));if(typeof L.main!="string")throw new Error(go(12,z?` (${z})`:"",JSON.stringify(L.main)));return a?(Ew(a,L,"light",G,i),Ew(a,L,"dark",ie,i)):(ww(L,"light",G,i),ww(L,"dark",ie,i)),L.contrastText||(L.contrastText=T(L.main)),L};let P;return e==="light"?P=cx():e==="dark"&&(P=hx()),ms({common:{...Cu},mode:e,primary:N({color:u,name:"primary"}),secondary:N({color:m,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:N({color:g,name:"error"}),warning:N({color:b,name:"warning"}),info:N({color:y,name:"info"}),success:N({color:v,name:"success"}),grey:i6,contrastThreshold:t,getContrastText:T,augmentColor:N,tonalOffset:i,...P},l)}function d6(n){const e={};return Object.entries(n).forEach(i=>{const[a,l]=i;typeof l=="object"&&(e[a]=`${l.fontStyle?`${l.fontStyle} `:""}${l.fontVariant?`${l.fontVariant} `:""}${l.fontWeight?`${l.fontWeight} `:""}${l.fontStretch?`${l.fontStretch} `:""}${l.fontSize||""}${l.lineHeight?`/${l.lineHeight} `:""}${l.fontFamily||""}`)}),e}function f6(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function m6(n){return Math.round(n*1e5)/1e5}const Tw={textTransform:"uppercase"},Aw='"Roboto", "Helvetica", "Arial", sans-serif';function p6(n,e){const{fontFamily:t=Aw,fontSize:i=14,fontWeightLight:a=300,fontWeightRegular:l=400,fontWeightMedium:u=500,fontWeightBold:m=700,htmlFontSize:g=16,allVariants:y,pxToRem:v,...b}=typeof e=="function"?e(n):e,T=i/14,N=v||(L=>`${L/g*T}rem`),P=(L,z,H,G,ie)=>({fontFamily:t,fontWeight:L,fontSize:N(z),lineHeight:H,...t===Aw?{letterSpacing:`${m6(G/z)}em`}:{},...ie,...y}),M={h1:P(a,96,1.167,-1.5),h2:P(a,60,1.2,-.5),h3:P(l,48,1.167,0),h4:P(l,34,1.235,.25),h5:P(l,24,1.334,0),h6:P(u,20,1.6,.15),subtitle1:P(l,16,1.75,.15),subtitle2:P(u,14,1.57,.1),body1:P(l,16,1.5,.15),body2:P(l,14,1.43,.15),button:P(u,14,1.75,.4,Tw),caption:P(l,12,1.66,.4),overline:P(l,12,2.66,1,Tw),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ms({htmlFontSize:g,pxToRem:N,fontFamily:t,fontSize:i,fontWeightLight:a,fontWeightRegular:l,fontWeightMedium:u,fontWeightBold:m,...M},b,{clone:!1})}const g6=.2,y6=.14,v6=.12;function Dt(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${g6})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${y6})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${v6})`].join(",")}const _6=["none",Dt(0,2,1,-1,0,1,1,0,0,1,3,0),Dt(0,3,1,-2,0,2,2,0,0,1,5,0),Dt(0,3,3,-2,0,3,4,0,0,1,8,0),Dt(0,2,4,-1,0,4,5,0,0,1,10,0),Dt(0,3,5,-1,0,5,8,0,0,1,14,0),Dt(0,3,5,-1,0,6,10,0,0,1,18,0),Dt(0,4,5,-2,0,7,10,1,0,2,16,1),Dt(0,5,5,-3,0,8,10,1,0,3,14,2),Dt(0,5,6,-3,0,9,12,1,0,3,16,2),Dt(0,6,6,-3,0,10,14,1,0,4,18,3),Dt(0,6,7,-4,0,11,15,1,0,4,20,3),Dt(0,7,8,-4,0,12,17,2,0,5,22,4),Dt(0,7,8,-4,0,13,19,2,0,5,24,4),Dt(0,7,9,-4,0,14,21,2,0,5,26,4),Dt(0,8,9,-5,0,15,22,2,0,6,28,5),Dt(0,8,10,-5,0,16,24,2,0,6,30,5),Dt(0,8,11,-5,0,17,26,2,0,6,32,5),Dt(0,9,11,-5,0,18,28,2,0,7,34,6),Dt(0,9,12,-6,0,19,29,2,0,7,36,6),Dt(0,10,13,-6,0,20,31,3,0,8,38,7),Dt(0,10,13,-6,0,21,33,3,0,8,40,7),Dt(0,10,14,-6,0,22,35,3,0,8,42,7),Dt(0,11,14,-7,0,23,36,3,0,9,44,8),Dt(0,11,15,-7,0,24,38,3,0,9,46,8)],S6={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},b6={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function xw(n){return`${Math.round(n)}ms`}function w6(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function E6(n){const e={...S6,...n.easing},t={...b6,...n.duration};return{getAutoHeightDuration:w6,create:(a=["all"],l={})=>{const{duration:u=t.standard,easing:m=e.easeInOut,delay:g=0,...y}=l;return(Array.isArray(a)?a:[a]).map(v=>`${v} ${typeof u=="string"?u:xw(u)} ${m} ${typeof g=="string"?g:xw(g)}`).join(",")},...n,easing:e,duration:t}}const T6={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function A6(n){return rr(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function dx(n={}){const e={...n};function t(i){const a=Object.entries(i);for(let l=0;l<a.length;l++){const[u,m]=a[l];!A6(m)||u.startsWith("unstable_")?delete i[u]:rr(m)&&(i[u]={...m},t(i[u]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Cw(n){return typeof n=="number"?`${(n*100).toFixed(0)}%`:`calc((${n}) * 100%)`}const x6=n=>{if(!Number.isNaN(+n))return+n;const e=n.match(/\d*\.?\d+/g);if(!e)return 0;let t=0;for(let i=0;i<e.length;i+=1)t+=+e[i];return t};function C6(n){Object.assign(n,{alpha(e,t){const i=this||n;return i.colorSpace?`oklch(from ${e} l c h / ${typeof t=="string"?`calc(${t})`:t})`:i.vars?`rgba(${e.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof t=="string"?`calc(${t})`:t})`:lx(e,x6(t))},lighten(e,t){const i=this||n;return i.colorSpace?`color-mix(in ${i.colorSpace}, ${e}, #fff ${Cw(t)})`:lm(e,t)},darken(e,t){const i=this||n;return i.colorSpace?`color-mix(in ${i.colorSpace}, ${e}, #000 ${Cw(t)})`:om(e,t)}})}function vy(n={},...e){const{breakpoints:t,mixins:i={},spacing:a,palette:l={},transitions:u={},typography:m={},shape:g,colorSpace:y,...v}=n;if(n.vars&&n.generateThemeVars===void 0)throw new Error(go(20));const b=zv({...l,colorSpace:y}),T=sx(n);let N=ms(T,{mixins:f6(T.breakpoints,i),palette:b,shadows:_6.slice(),typography:p6(b,m),transitions:E6(u),zIndex:{...T6}});return N=ms(N,v),N=e.reduce((P,M)=>ms(P,M),N),N.unstable_sxConfig={...nm,...v?.unstable_sxConfig},N.unstable_sx=function(M){return jl({sx:M,theme:this})},N.toRuntimeSource=dx,C6(N),N}function N6(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const R6=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=N6(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function fx(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function mx(n){return n==="dark"?R6:[]}function I6(n){const{palette:e={mode:"light"},opacity:t,overlays:i,colorSpace:a,...l}=n,u=zv({...e,colorSpace:a});return{palette:u,opacity:{...fx(u.mode),...t},overlays:i||mx(u.mode),...l}}function D6(n){return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!n[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const j6=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],k6=n=>(e,t)=>{const i=n.rootSelector||":root",a=n.colorSchemeSelector;let l=a;if(a==="class"&&(l=".%s"),a==="data"&&(l="[data-%s]"),a?.startsWith("data-")&&!a.includes("%s")&&(l=`[${a}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const u={};return j6(n.cssVarPrefix).forEach(m=>{u[m]=t[m],delete t[m]}),l==="media"?{[i]:t,"@media (prefers-color-scheme: dark)":{[i]:u}}:l?{[l.replace("%s",e)]:u,[`${i}, ${l.replace("%s",e)}`]:t}:{[i]:{...t,...u}}}if(l&&l!=="media")return`${i}, ${l.replace("%s",String(e))}`}else if(e){if(l==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[i]:t}};if(l)return l.replace("%s",String(e))}return i};function O6(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function le(n,e,t){!n[e]&&t&&(n[e]=t)}function nu(n){return typeof n!="string"||!n.startsWith("hsl")?n:ox(n)}function ir(n,e){`${e}Channel`in n||(n[`${e}Channel`]=tu(nu(n[e])))}function M6(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const _i=n=>{try{return n()}catch{}},P6=(n="mui")=>ZM(n);function kg(n,e,t,i,a){if(!t)return;t=t===!0?{}:t;const l=a==="dark"?"dark":"light";if(!i){e[a]=I6({...t,palette:{mode:l,...t?.palette},colorSpace:n});return}const{palette:u,...m}=vy({...i,palette:{mode:l,...t?.palette},colorSpace:n});return e[a]={...t,palette:u,opacity:{...fx(l),...t?.opacity},overlays:t?.overlays||mx(l)},m}function V6(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:i,disableCssColorScheme:a=!1,cssVarPrefix:l="mui",nativeColor:u=!1,shouldSkipGeneratingVar:m=D6,colorSchemeSelector:g=t.light&&t.dark?"media":void 0,rootSelector:y=":root",...v}=n,b=Object.keys(t)[0],T=i||(t.light&&b!=="light"?"light":b),N=P6(l),{[T]:P,light:M,dark:L,...z}=t,H={...z};let G=P;if((T==="dark"&&!("dark"in t)||T==="light"&&!("light"in t))&&(G=!0),!G)throw new Error(go(21,T));let ie;u&&(ie="oklch");const re=kg(ie,H,G,v,T);M&&!H.light&&kg(ie,H,M,void 0,"light"),L&&!H.dark&&kg(ie,H,L,void 0,"dark");let ae={defaultColorScheme:T,...re,cssVarPrefix:l,colorSchemeSelector:g,rootSelector:y,getCssVar:N,colorSchemes:H,font:{...d6(re.typography),...re.font},spacing:M6(v.spacing)};Object.keys(ae.colorSchemes).forEach(O=>{const S=ae.colorSchemes[O].palette,x=te=>{const U=te.split("-"),ee=U[1],ge=U[2];return N(te,S[ee][ge])};S.mode==="light"&&(le(S.common,"background","#fff"),le(S.common,"onBackground","#000")),S.mode==="dark"&&(le(S.common,"background","#000"),le(S.common,"onBackground","#fff"));function Q(te,U,ee){if(ie){let ge;return te===eo&&(ge=`transparent ${((1-ee)*100).toFixed(0)}%`),te===gt&&(ge=`#000 ${(ee*100).toFixed(0)}%`),te===yt&&(ge=`#fff ${(ee*100).toFixed(0)}%`),`color-mix(in ${ie}, ${U}, ${ge})`}return te(U,ee)}if(O6(S,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),S.mode==="light"){le(S.Alert,"errorColor",Q(gt,S.error.light,.6)),le(S.Alert,"infoColor",Q(gt,S.info.light,.6)),le(S.Alert,"successColor",Q(gt,S.success.light,.6)),le(S.Alert,"warningColor",Q(gt,S.warning.light,.6)),le(S.Alert,"errorFilledBg",x("palette-error-main")),le(S.Alert,"infoFilledBg",x("palette-info-main")),le(S.Alert,"successFilledBg",x("palette-success-main")),le(S.Alert,"warningFilledBg",x("palette-warning-main")),le(S.Alert,"errorFilledColor",_i(()=>S.getContrastText(S.error.main))),le(S.Alert,"infoFilledColor",_i(()=>S.getContrastText(S.info.main))),le(S.Alert,"successFilledColor",_i(()=>S.getContrastText(S.success.main))),le(S.Alert,"warningFilledColor",_i(()=>S.getContrastText(S.warning.main))),le(S.Alert,"errorStandardBg",Q(yt,S.error.light,.9)),le(S.Alert,"infoStandardBg",Q(yt,S.info.light,.9)),le(S.Alert,"successStandardBg",Q(yt,S.success.light,.9)),le(S.Alert,"warningStandardBg",Q(yt,S.warning.light,.9)),le(S.Alert,"errorIconColor",x("palette-error-main")),le(S.Alert,"infoIconColor",x("palette-info-main")),le(S.Alert,"successIconColor",x("palette-success-main")),le(S.Alert,"warningIconColor",x("palette-warning-main")),le(S.AppBar,"defaultBg",x("palette-grey-100")),le(S.Avatar,"defaultBg",x("palette-grey-400")),le(S.Button,"inheritContainedBg",x("palette-grey-300")),le(S.Button,"inheritContainedHoverBg",x("palette-grey-A100")),le(S.Chip,"defaultBorder",x("palette-grey-400")),le(S.Chip,"defaultAvatarColor",x("palette-grey-700")),le(S.Chip,"defaultIconColor",x("palette-grey-700")),le(S.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),le(S.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),le(S.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),le(S.LinearProgress,"primaryBg",Q(yt,S.primary.main,.62)),le(S.LinearProgress,"secondaryBg",Q(yt,S.secondary.main,.62)),le(S.LinearProgress,"errorBg",Q(yt,S.error.main,.62)),le(S.LinearProgress,"infoBg",Q(yt,S.info.main,.62)),le(S.LinearProgress,"successBg",Q(yt,S.success.main,.62)),le(S.LinearProgress,"warningBg",Q(yt,S.warning.main,.62)),le(S.Skeleton,"bg",ie?Q(eo,S.text.primary,.11):`rgba(${x("palette-text-primaryChannel")} / 0.11)`),le(S.Slider,"primaryTrack",Q(yt,S.primary.main,.62)),le(S.Slider,"secondaryTrack",Q(yt,S.secondary.main,.62)),le(S.Slider,"errorTrack",Q(yt,S.error.main,.62)),le(S.Slider,"infoTrack",Q(yt,S.info.main,.62)),le(S.Slider,"successTrack",Q(yt,S.success.main,.62)),le(S.Slider,"warningTrack",Q(yt,S.warning.main,.62));const te=ie?Q(gt,S.background.default,.6825):Od(S.background.default,.8);le(S.SnackbarContent,"bg",te),le(S.SnackbarContent,"color",_i(()=>ie?yy.text.primary:S.getContrastText(te))),le(S.SpeedDialAction,"fabHoverBg",Od(S.background.paper,.15)),le(S.StepConnector,"border",x("palette-grey-400")),le(S.StepContent,"border",x("palette-grey-400")),le(S.Switch,"defaultColor",x("palette-common-white")),le(S.Switch,"defaultDisabledColor",x("palette-grey-100")),le(S.Switch,"primaryDisabledColor",Q(yt,S.primary.main,.62)),le(S.Switch,"secondaryDisabledColor",Q(yt,S.secondary.main,.62)),le(S.Switch,"errorDisabledColor",Q(yt,S.error.main,.62)),le(S.Switch,"infoDisabledColor",Q(yt,S.info.main,.62)),le(S.Switch,"successDisabledColor",Q(yt,S.success.main,.62)),le(S.Switch,"warningDisabledColor",Q(yt,S.warning.main,.62)),le(S.TableCell,"border",Q(yt,Q(eo,S.divider,1),.88)),le(S.Tooltip,"bg",Q(eo,S.grey[700],.92))}if(S.mode==="dark"){le(S.Alert,"errorColor",Q(yt,S.error.light,.6)),le(S.Alert,"infoColor",Q(yt,S.info.light,.6)),le(S.Alert,"successColor",Q(yt,S.success.light,.6)),le(S.Alert,"warningColor",Q(yt,S.warning.light,.6)),le(S.Alert,"errorFilledBg",x("palette-error-dark")),le(S.Alert,"infoFilledBg",x("palette-info-dark")),le(S.Alert,"successFilledBg",x("palette-success-dark")),le(S.Alert,"warningFilledBg",x("palette-warning-dark")),le(S.Alert,"errorFilledColor",_i(()=>S.getContrastText(S.error.dark))),le(S.Alert,"infoFilledColor",_i(()=>S.getContrastText(S.info.dark))),le(S.Alert,"successFilledColor",_i(()=>S.getContrastText(S.success.dark))),le(S.Alert,"warningFilledColor",_i(()=>S.getContrastText(S.warning.dark))),le(S.Alert,"errorStandardBg",Q(gt,S.error.light,.9)),le(S.Alert,"infoStandardBg",Q(gt,S.info.light,.9)),le(S.Alert,"successStandardBg",Q(gt,S.success.light,.9)),le(S.Alert,"warningStandardBg",Q(gt,S.warning.light,.9)),le(S.Alert,"errorIconColor",x("palette-error-main")),le(S.Alert,"infoIconColor",x("palette-info-main")),le(S.Alert,"successIconColor",x("palette-success-main")),le(S.Alert,"warningIconColor",x("palette-warning-main")),le(S.AppBar,"defaultBg",x("palette-grey-900")),le(S.AppBar,"darkBg",x("palette-background-paper")),le(S.AppBar,"darkColor",x("palette-text-primary")),le(S.Avatar,"defaultBg",x("palette-grey-600")),le(S.Button,"inheritContainedBg",x("palette-grey-800")),le(S.Button,"inheritContainedHoverBg",x("palette-grey-700")),le(S.Chip,"defaultBorder",x("palette-grey-700")),le(S.Chip,"defaultAvatarColor",x("palette-grey-300")),le(S.Chip,"defaultIconColor",x("palette-grey-300")),le(S.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),le(S.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),le(S.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),le(S.LinearProgress,"primaryBg",Q(gt,S.primary.main,.5)),le(S.LinearProgress,"secondaryBg",Q(gt,S.secondary.main,.5)),le(S.LinearProgress,"errorBg",Q(gt,S.error.main,.5)),le(S.LinearProgress,"infoBg",Q(gt,S.info.main,.5)),le(S.LinearProgress,"successBg",Q(gt,S.success.main,.5)),le(S.LinearProgress,"warningBg",Q(gt,S.warning.main,.5)),le(S.Skeleton,"bg",ie?Q(eo,S.text.primary,.13):`rgba(${x("palette-text-primaryChannel")} / 0.13)`),le(S.Slider,"primaryTrack",Q(gt,S.primary.main,.5)),le(S.Slider,"secondaryTrack",Q(gt,S.secondary.main,.5)),le(S.Slider,"errorTrack",Q(gt,S.error.main,.5)),le(S.Slider,"infoTrack",Q(gt,S.info.main,.5)),le(S.Slider,"successTrack",Q(gt,S.success.main,.5)),le(S.Slider,"warningTrack",Q(gt,S.warning.main,.5));const te=ie?Q(yt,S.background.default,.985):Od(S.background.default,.98);le(S.SnackbarContent,"bg",te),le(S.SnackbarContent,"color",_i(()=>ie?ux.text.primary:S.getContrastText(te))),le(S.SpeedDialAction,"fabHoverBg",Od(S.background.paper,.15)),le(S.StepConnector,"border",x("palette-grey-600")),le(S.StepContent,"border",x("palette-grey-600")),le(S.Switch,"defaultColor",x("palette-grey-300")),le(S.Switch,"defaultDisabledColor",x("palette-grey-600")),le(S.Switch,"primaryDisabledColor",Q(gt,S.primary.main,.55)),le(S.Switch,"secondaryDisabledColor",Q(gt,S.secondary.main,.55)),le(S.Switch,"errorDisabledColor",Q(gt,S.error.main,.55)),le(S.Switch,"infoDisabledColor",Q(gt,S.info.main,.55)),le(S.Switch,"successDisabledColor",Q(gt,S.success.main,.55)),le(S.Switch,"warningDisabledColor",Q(gt,S.warning.main,.55)),le(S.TableCell,"border",Q(gt,Q(eo,S.divider,1),.68)),le(S.Tooltip,"bg",Q(eo,S.grey[700],.92))}ir(S.background,"default"),ir(S.background,"paper"),ir(S.common,"background"),ir(S.common,"onBackground"),ir(S,"divider"),Object.keys(S).forEach(te=>{const U=S[te];te!=="tonalOffset"&&U&&typeof U=="object"&&(U.main&&le(S[te],"mainChannel",tu(nu(U.main))),U.light&&le(S[te],"lightChannel",tu(nu(U.light))),U.dark&&le(S[te],"darkChannel",tu(nu(U.dark))),U.contrastText&&le(S[te],"contrastTextChannel",tu(nu(U.contrastText))),te==="text"&&(ir(S[te],"primary"),ir(S[te],"secondary")),te==="action"&&(U.active&&ir(S[te],"active"),U.selected&&ir(S[te],"selected")))})}),ae=e.reduce((O,S)=>ms(O,S),ae);const j={prefix:l,disableCssColorScheme:a,shouldSkipGeneratingVar:m,getSelector:k6(ae),enableContrastVars:u},{vars:I,generateThemeVars:A,generateStyleSheets:R}=n6(ae,j);return ae.vars=I,Object.entries(ae.colorSchemes[ae.defaultColorScheme]).forEach(([O,S])=>{ae[O]=S}),ae.generateThemeVars=A,ae.generateStyleSheets=R,ae.generateSpacing=function(){return nx(v.spacing,Ov(this))},ae.getColorSchemeSelector=s6(g),ae.spacing=ae.generateSpacing(),ae.shouldSkipGeneratingVar=m,ae.unstable_sxConfig={...nm,...v?.unstable_sxConfig},ae.unstable_sx=function(S){return jl({sx:S,theme:this})},ae.toRuntimeSource=dx,ae}function Nw(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:zv({...t===!0?{}:t.palette,mode:e})})}function L6(n={},...e){const{palette:t,cssVariables:i=!1,colorSchemes:a=t?void 0:{light:!0},defaultColorScheme:l=t?.mode,...u}=n,m=l||"light",g=a?.[m],y={...a,...t?{[m]:{...typeof g!="boolean"&&g,palette:t}}:void 0};if(i===!1){if(!("colorSchemes"in n))return vy(n,...e);let v=t;"palette"in n||y[m]&&(y[m]!==!0?v=y[m].palette:m==="dark"&&(v={mode:"dark"}));const b=vy({...n,palette:v},...e);return b.defaultColorScheme=m,b.colorSchemes=y,b.palette.mode==="light"&&(b.colorSchemes.light={...y.light!==!0&&y.light,palette:b.palette},Nw(b,"dark",y.dark)),b.palette.mode==="dark"&&(b.colorSchemes.dark={...y.dark!==!0&&y.dark,palette:b.palette},Nw(b,"light",y.light)),b}return!t&&!("light"in y)&&m==="light"&&(y.light=!0),V6({...u,colorSchemes:y,defaultColorScheme:m,...typeof i!="boolean"&&i},...e)}const U6=L6(),z6="$$material";function B6(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const F6=n=>B6(n)&&n!=="classes",q6=UM({themeId:z6,defaultTheme:U6,rootShouldForwardProp:F6}),H6=JM;function $6(n){return WM(n)}function G6(n){return ix("MuiSvgIcon",n)}MM("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const K6=n=>{const{color:e,fontSize:t,classes:i}=n,a={root:["root",e!=="inherit"&&`color${Dl(e)}`,`fontSize${Dl(t)}`]};return z3(a,G6,i)},Y6=q6("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${Dl(t.color)}`],e[`fontSize${Dl(t.fontSize)}`]]}})(H6(({theme:n})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:n.transitions?.create?.("fill",{duration:(n.vars??n).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:n.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:n.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:n.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,e])=>e&&e.main).map(([e])=>({props:{color:e},style:{color:(n.vars??n).palette?.[e]?.main}})),{props:{color:"action"},style:{color:(n.vars??n).palette?.action?.active}},{props:{color:"disabled"},style:{color:(n.vars??n).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),_y=k.forwardRef(function(e,t){const i=$6({props:e,name:"MuiSvgIcon"}),{children:a,className:l,color:u="inherit",component:m="svg",fontSize:g="medium",htmlColor:y,inheritViewBox:v=!1,titleAccess:b,viewBox:T="0 0 24 24",...N}=i,P=k.isValidElement(a)&&a.type==="svg",M={...i,color:u,component:m,fontSize:g,instanceFontSize:e.fontSize,inheritViewBox:v,viewBox:T,hasSvgAsChild:P},L={};v||(L.viewBox=T);const z=K6(M);return h.jsxs(Y6,{as:m,className:zA(z.root,l),focusable:"false",color:y,"aria-hidden":b?void 0:!0,role:b?"img":void 0,ref:t,...L,...N,...P&&a.props,ownerState:M,children:[P?a.props.children:a,b?h.jsx("title",{children:b}):null]})});_y.muiName="SvgIcon";function $e(n,e){function t(i,a){return h.jsx(_y,{"data-testid":void 0,ref:a,...i,children:n})}return t.muiName=_y.muiName,k.memo(k.forwardRef(t))}const Q6=$e([h.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),h.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),px=$e(h.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),X6=$e([h.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),h.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")]),Og=$e(h.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),Mg=$e(h.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"})),W6=$e(h.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"})),J6=$e(h.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"})),Sy=$e(h.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"})),Z6=$e(h.jsx("path",{d:"M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66s.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21"})),eP=$e(h.jsx("path",{d:"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5s-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20zm-6 8h-4v-2h4zm0-4h-4v-2h4z"})),tP=$e(h.jsx("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"})),gx=$e(h.jsx("path",{d:"M18 11v2h4v-2zm-2 6.61c.96.71 2.21 1.65 3.2 2.39.4-.53.8-1.07 1.2-1.6-.99-.74-2.24-1.68-3.2-2.4-.4.54-.8 1.08-1.2 1.61M20.4 5.6c-.4-.53-.8-1.07-1.2-1.6-.99.74-2.24 1.68-3.2 2.4.4.53.8 1.07 1.2 1.6.96-.72 2.21-1.65 3.2-2.4M4 9c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h1v4h2v-4h1l5 3V6L8 9zm11.5 3c0-1.33-.58-2.53-1.5-3.35v6.69c.92-.81 1.5-2.01 1.5-3.34"})),by=$e(h.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),nP=$e(h.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),Ti=$e(h.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),sP=$e(h.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),yx=$e(h.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),vx=$e(h.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),wy=$e(h.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"})),iP=$e(h.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"})),Rw=$e(h.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"})),_x=$e(h.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),rP=$e(h.jsx("path",{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2m-5 12H9v-2h6zm5-7H4V4l16-.02z"})),aP=$e(h.jsx("path",{d:"M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.3 3-3.4 3-5.7 0-3.9-3.1-7-7-7"})),oP=$e(h.jsx("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5"})),lP=$e(h.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),cP=$e(h.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"})),uP=$e(h.jsx("path",{d:"M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h3l-1 1v2h12v-2l-1-1h3c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 13H4V5h16z"})),hP=$e(h.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"})),dP=$e(h.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),fP=$e(h.jsx("path",{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3"})),Sf=$e(h.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),mP=$e(h.jsx("path",{d:"M12 2.5s4.5 2.04 4.5 10.5c0 2.49-1.04 5.57-1.6 7H9.1c-.56-1.43-1.6-4.51-1.6-7C7.5 4.54 12 2.5 12 2.5m2 8.5c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2m-6.31 9.52c-.48-1.23-1.52-4.17-1.67-6.87l-1.13.75c-.56.38-.89 1-.89 1.67V22zM20 22v-5.93c0-.67-.33-1.29-.89-1.66l-1.13-.75c-.15 2.69-1.2 5.64-1.67 6.87z"})),Sx=$e(h.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),Bv=$e(h.jsx("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"})),pP=$e(h.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),cm=$e(h.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"})),gP=$e(h.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),yP=$e(h.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),vP=$e(h.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"})),Hl=$e(h.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"})),_P="/simpleInfo/logo.png";function bx(){const n=es(),[e,t]=k.useState(!1),[i,a]=k.useState(!1),[l,u]=k.useState(null),[m,g]=k.useState(0),[y,v]=k.useState(!1),[b,T]=k.useState([]),[N,P]=k.useState("v1.0.0"),[M,L]=k.useState(!1),[z,H]=k.useState(!1),[G,ie]=k.useState(!1),[re,ae]=k.useState(null),[j,I]=k.useState(!1),A=(Y,V)=>{const K=ce=>{const[,me,Ee,Te]=ce.match(/v?(\d+)\.(\d+)\.(\d+)/)||[0,0,0,0];return{major:parseInt(me),minor:parseInt(Ee),patch:parseInt(Te)}},fe=K(Y.version),q=K(V.version);return fe.major!==q.major?q.major-fe.major:fe.minor!==q.minor?q.minor-fe.minor:q.patch-fe.patch},R=async()=>{try{const V=(await qe.getPatchnotes()).sort(A);T(V),V.length>0&&P(V[0].version||"v1.0.0")}catch(Y){console.error("패치 노트 로드 실패:",Y)}},O=()=>{v(!0),R()},S=()=>{v(!1)},x=async()=>{try{const Y=await Eu.requestPermission();H(Y),Y&&alert("알림 권한이 허용되었습니다! 새로운 패치노트나 공지사항을 받을 수 있습니다.")}catch(Y){alert("알림 권한 요청에 실패했습니다: "+Y.message)}};k.useEffect(()=>{const Y=Eu.getPermissionStatus();return L(Y.isSupported),H(Y.canShow),R(),document.body.style.background="#f5f5f5",Jn.logActivity("메인 화면 접속","minor","사용자가 메인 화면(/)에 접속함"),()=>{document.body.style.background="#f5f5f5"}},[]);const Q=async()=>{try{console.log("MainScreen.checkActivePin: 시작 - 현재 시간:",new Date().toISOString());const Y=await Ce.getActiveConnections();console.log("MainScreen.checkActivePin: 가져온 연결 목록:",Y);const V=Y.length;if(console.log("MainScreen.checkActivePin: 연결 개수:",V),g(V),V>0){const K=Y[0];console.log("MainScreen.checkActivePin: 첫 번째 연결:",K),u(K.sessionId),a(!0)}else console.log("MainScreen.checkActivePin: 연결 없음"),a(!1),u(null)}catch(Y){console.error("MainScreen.checkActivePin: 활성 PIN 확인 실패:",Y),a(!1),u(null),g(0)}},te=async()=>{try{const Y=await Ce.getSchoolBlockingStatus();ie(Y)}catch(Y){console.error("학교 차단 상태 확인 실패:",Y)}};k.useEffect(()=>{const Y=me=>{me.preventDefault(),ae(me),I(!0)};window.addEventListener("beforeinstallprompt",Y),window.addEventListener("appinstalled",()=>{I(!1),ae(null)}),Q(),te();const V=Ce.subscribeToActiveConnections(me=>{console.log("MainScreen: 실시간 PIN 변경 감지:",me);const Ee=me.length;if(g(Ee),Ee>0){const Te=me[0];console.log("MainScreen: 첫 번째 연결:",Te),u(Te.sessionId),a(!0)}else console.log("MainScreen: 연결 없음"),a(!1),u(null)}),K=Ce.subscribeToSchoolBlockingStatus(me=>{ie(me)}),q=new URLSearchParams(window.location.search).get("admin"),ce=me=>{me.ctrlKey&&me.shiftKey&&me.key==="A"&&t(!0)};return q==="true"&&(t(!0),n("/admin")),window.addEventListener("keydown",ce),()=>{window.removeEventListener("keydown",ce),V&&typeof V=="function"&&(V(),console.log("MainScreen: PIN 실시간 모니터링 구독 해제")),K&&typeof K=="function"&&(K(),console.log("MainScreen: 차단 상태 실시간 모니터링 구독 해제"))}},[n]);const U=async()=>{if(re){re.prompt();const{outcome:Y}=await re.userChoice;console.log(Y==="accepted"?"PWA 설치 승인됨":"PWA 설치 거부됨"),ae(null),I(!1)}},ee=()=>{n("/control")},ge=async()=>{try{if(m>=10){alert("최대 PIN 개수(10개)에 도달했습니다. 기존 PIN을 제거한 후 다시 시도해주세요.");return}const Y=await Ce.createOutputSession();sessionStorage.setItem("outputSessionId",Y.sessionId),sessionStorage.setItem("currentPin",Y.pin),n("/output")}catch(Y){console.error("출력용 세션 생성 실패:",Y),alert(Y.message||"출력용 세션 생성에 실패했습니다.")}},be=()=>{const Y=new URL(window.location.href);Y.pathname="/simpleInfo/",Y.searchParams.set("admin","true"),window.location.href=Y.toString()};return h.jsxs("div",{className:"main-screen",children:[h.jsx("div",{className:"monitor-icon",children:h.jsx("img",{src:_P,alt:"학교 로고"})}),h.jsx("h1",{className:"school-name",children:"광주동신여자고등학교"}),h.jsx("h2",{className:"app-title",children:"학교 생활 도우미"}),h.jsx("div",{className:"mode-selection",children:m>=10?h.jsxs("div",{className:"active-pin-warning",children:[h.jsxs("h3",{children:[h.jsx(Hl,{sx:{fontSize:24,marginRight:1}})," 최대 연결 수에 도달했습니다"]}),h.jsxs("p",{children:["현재 활성화된 연결: ",h.jsx("strong",{children:m}),"개 / 최대 10개"]}),h.jsx("p",{children:"새로운 연결을 위해서는 관리자에게 문의해주세요."})]}):h.jsxs(h.Fragment,{children:[m>0&&h.jsxs("p",{className:"connection-info",children:["현재 활성화된 연결: ",h.jsx("strong",{children:m}),"개 / 최대 10개"]}),h.jsxs("div",{className:"mode-buttons",children:[h.jsx("button",{className:"mode-btn control-btn",onClick:ee,children:"제어용"}),h.jsx("button",{className:"mode-btn output-btn",onClick:ge,children:"출력용"}),e&&h.jsx("button",{className:"mode-btn admin-btn",onClick:be,children:"관리자"})]})]})}),h.jsxs("div",{className:"version-section",children:[h.jsx("button",{className:"version-button",onClick:O,children:h.jsxs("div",{className:"version-content",children:[h.jsx("span",{className:"version-icon",children:h.jsx(Sf,{sx:{fontSize:24}})}),h.jsxs("div",{className:"version-text",children:[h.jsx("span",{className:"version-number",children:N}),h.jsx("span",{className:"version-label",children:"패치 노트 보기"})]})]})}),M&&!z&&h.jsxs("button",{className:"notification-button",onClick:x,children:[h.jsx("span",{className:"notification-icon",children:h.jsx(hP,{sx:{fontSize:24}})}),h.jsx("span",{children:"알림 허용"})]}),j&&h.jsxs("button",{className:"install-button",onClick:U,children:[h.jsx("span",{className:"install-icon",children:h.jsx(iP,{sx:{fontSize:24}})}),h.jsx("span",{children:"앱 설치"})]})]}),y&&h.jsx("div",{className:"modal-overlay",onClick:S,children:h.jsxs("div",{className:"modal-content",onClick:Y=>Y.stopPropagation(),children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("h3",{children:"패치 노트"}),h.jsx("button",{className:"modal-close",onClick:S,children:"×"})]}),h.jsx("div",{className:"modal-body",children:b.length===0?h.jsx("p",{className:"no-patchnotes",children:"등록된 패치 노트가 없습니다."}):h.jsx("div",{className:"patchnotes-list",children:b.map(Y=>h.jsxs("div",{className:"patchnote-card",children:[h.jsxs("div",{className:"patchnote-header",children:[h.jsx("span",{className:`version-badge ${Y.type}`,children:Y.version}),h.jsx("span",{className:"patchnote-date",children:Y.date?new Date(Y.date+"T00:00:00").toLocaleDateString("ko-KR"):new Date(Y.createdAt).toLocaleDateString("ko-KR")})]}),h.jsxs("div",{className:"patchnote-content",children:[h.jsx("h4",{children:Y.title}),h.jsx("div",{className:"patchnote-details",children:Y.content.split(`
`).map((V,K)=>h.jsx("p",{children:V},K))})]})]},Y.id))})})]})})]})}function SP(){const[n,e]=k.useState(""),[t,i]=k.useState(!1),[a,l]=k.useState(""),u=es(),m=v=>{n.length<6&&(e(n+v),l(""))},g=()=>{e(n.slice(0,-1)),l("")},y=async()=>{if(n.length===6){i(!0),l("");try{const v=await Ce.connectControlDevice(n);v.success?(sessionStorage.setItem("controlSessionId",v.controlSessionId),sessionStorage.setItem("outputSessionId",v.outputSessionId),sessionStorage.setItem("currentPin",v.pin),sessionStorage.setItem("pairingId",v.pairingId),u("/control/main")):(l(v.error||"잘못된 PIN입니다. 다시 입력해주세요."),e(""))}catch(v){console.error("연결 실패:",v),l(v.message||"연결에 실패했습니다. 다시 시도해주세요."),e("")}finally{i(!1)}}};return h.jsxs("div",{className:"control-connection",children:[h.jsx("h2",{children:"제어용 기기에 표시된 PIN을 입력하세요"}),h.jsx("div",{className:"pin-input-container",children:h.jsxs("div",{className:"pin-display",children:[n.split("").map((v,b)=>h.jsx("div",{className:"pin-digit",children:v},b)),Array.from({length:6-n.length}).map((v,b)=>h.jsx("div",{className:"pin-digit empty"},b+n.length))]})}),a&&h.jsx("div",{className:"error-message",children:a}),h.jsxs("div",{className:"keypad",children:[h.jsxs("div",{className:"compact-layout",children:[h.jsx("button",{className:"key",onClick:()=>m("1"),children:"1"}),h.jsx("button",{className:"key",onClick:()=>m("2"),children:"2"}),h.jsx("button",{className:"key",onClick:()=>m("3"),children:"3"}),h.jsx("button",{className:"key",onClick:()=>m("4"),children:"4"}),h.jsx("button",{className:"key",onClick:()=>m("5"),children:"5"}),h.jsx("button",{className:"key",onClick:()=>m("6"),children:"6"}),h.jsx("button",{className:"key",onClick:()=>m("7"),children:"7"}),h.jsx("button",{className:"key",onClick:()=>m("8"),children:"8"}),h.jsx("button",{className:"key",onClick:()=>m("9"),children:"9"}),h.jsx("button",{className:"key",onClick:()=>m("0"),children:"0"}),h.jsx("button",{className:"key backspace",onClick:g,children:"⌫"})]}),h.jsxs("div",{className:"normal-layout",children:[h.jsxs("div",{className:"keypad-row",children:[h.jsx("button",{className:"key",onClick:()=>m("1"),children:"1"}),h.jsx("button",{className:"key",onClick:()=>m("2"),children:"2"}),h.jsx("button",{className:"key",onClick:()=>m("3"),children:"3"})]}),h.jsxs("div",{className:"keypad-row",children:[h.jsx("button",{className:"key",onClick:()=>m("4"),children:"4"}),h.jsx("button",{className:"key",onClick:()=>m("5"),children:"5"}),h.jsx("button",{className:"key",onClick:()=>m("6"),children:"6"})]}),h.jsxs("div",{className:"keypad-row",children:[h.jsx("button",{className:"key",onClick:()=>m("7"),children:"7"}),h.jsx("button",{className:"key",onClick:()=>m("8"),children:"8"}),h.jsx("button",{className:"key",onClick:()=>m("9"),children:"9"})]}),h.jsxs("div",{className:"keypad-row",children:[h.jsx("button",{className:"key backspace",onClick:g,children:"⌫"}),h.jsx("button",{className:"key",onClick:()=>m("0"),children:"0"}),h.jsx("button",{className:"key empty"})]})]})]}),h.jsx("button",{className:"pin-submit-btn",onClick:y,disabled:n.length!==6||t,children:t?"연결 중...":"PIN 입력"})]})}function bP(){const n=es(),[e,t]=k.useState("연결됨"),[i,a]=k.useState(null),[l,u]=k.useState(!1);k.useEffect(()=>(l&&i?(document.body.style.background="linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",document.body.style.minHeight="100vh"):(document.body.style.background="#f5f5f5",document.body.style.minHeight="auto"),()=>{document.body.style.background="#f5f5f5",document.body.style.minHeight="auto"}),[l,i]),k.useEffect(()=>{document.body.style.background="#f5f5f5";const P=sessionStorage.getItem("controlSessionId"),M=sessionStorage.getItem("outputSessionId"),L=sessionStorage.getItem("pairingId");if(P&&M&&L){t("연결됨");const z=Ce.subscribeToOutputData(M,G=>{G.controlData&&G.controlData.adminRemoved&&(t("연결 안됨"),sessionStorage.removeItem("controlSessionId"),sessionStorage.removeItem("outputSessionId"),sessionStorage.removeItem("currentPin"),sessionStorage.removeItem("pairingId"),n("/")),G.mainNotice&&G.mainNotice.isActive?(a(G.mainNotice),u(!0)):(a(null),u(!1))}),H=setInterval(async()=>{try{await Ce.heartbeatSession(P),await Ce.heartbeatSession(M)}catch(G){console.error("Heartbeat 실패:",G)}},6e4);return()=>{z(),clearInterval(H)}}else t("연결 안됨")},[n]);const m=async(P,M="monthly",L=0,z=0)=>{const H=sessionStorage.getItem("controlSessionId");if(sessionStorage.getItem("outputSessionId"),sessionStorage.getItem("pairingId"),H)try{const G={currentPage:P};P==="schedule"?(G.scheduleView=M,G.scheduleDate=new Date().toISOString()):P==="meal"?G.mealDate=L:P==="announcement"&&(G.announcementIndex=z),await Ce.sendControlData(H,G)}catch(G){console.error("제어 데이터 전송 실패:",G)}else console.error("ControlMain: 제어 세션 ID가 없습니다.")},g=async()=>{await m("schedule","weekly"),n("/control/schedule")},y=async()=>{await m("meal"),n("/control/meal")},v=async()=>{await m("roadmap"),n("/control/roadmap")},b=async()=>{await m("announcement"),n("/control/announcement")},T=()=>{n("/control/connection-info")},N=async()=>{await m("main")};return l&&i?h.jsx("div",{className:"control-main",children:h.jsxs("div",{className:"notice-block-screen",children:[h.jsx("div",{className:"notice-block-header",children:h.jsxs("h1",{children:[h.jsx(gx,{sx:{fontSize:32,marginRight:1}})," 메인 공지사항 활성화 중"]})}),h.jsxs("div",{className:"notice-block-content",children:[h.jsxs("div",{className:"notice-block-text",children:[h.jsx("p",{children:h.jsx("strong",{children:i.title})}),h.jsx("p",{children:"현재 출력 화면에 공지사항이 표시 중입니다."}),h.jsx("p",{children:"공지사항이 비활성화될 때까지 다른 조작이 일시 중단됩니다."})]}),h.jsx("div",{className:"notice-block-info",children:h.jsxs("div",{className:"notice-block-date",children:["작성일: ",new Date(i.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})})]}),h.jsx("div",{className:"notice-block-footer",children:h.jsxs("div",{className:"status-indicator",children:[h.jsx("div",{className:`status-dot ${e==="연결됨"?"connected":"disconnected"}`}),h.jsx("span",{children:e})]})})]})}):h.jsxs("div",{className:"control-main",children:[h.jsxs("div",{className:"menu-grid",children:[h.jsx("button",{className:"menu-btn",onClick:g,children:"학사 일정"}),h.jsx("button",{className:"menu-btn",onClick:y,children:"급식"}),h.jsx("button",{className:"menu-btn",onClick:v,children:"교실 배치"}),h.jsx("button",{className:"menu-btn",onClick:b,children:"공지 사항"})]}),h.jsxs("div",{className:"connection-section",children:[h.jsx("button",{className:"connection-info-btn",onClick:T,children:"연결 정보"}),h.jsxs("div",{className:"status-indicator",children:[h.jsx("div",{className:`status-dot ${e==="연결됨"?"connected":"disconnected"}`}),h.jsx("span",{children:e})]}),h.jsxs("button",{className:"main-screen-btn",onClick:N,children:[h.jsx(_x,{sx:{fontSize:20,marginRight:1}})," 메인화면"]})]})]})}function wP(){const n=es(),[e,t]=k.useState("weekly"),[i,a]=k.useState(new Date);k.useEffect(()=>{b("weekly",i)},[]);const l=async()=>{await v("main"),n("/control/main")},u=async()=>{let T;e==="monthly"?T=new Date(i.getFullYear(),i.getMonth()-1,1):(T=new Date(i),T.setDate(T.getDate()-7)),a(T),await b(e,T)},m=async()=>{let T;e==="monthly"?T=new Date(i.getFullYear(),i.getMonth()+1,1):(T=new Date(i),T.setDate(T.getDate()+7)),a(T),await b(e,T)},g=async T=>{t(T),await b(T,i)},y=async()=>{const T=new Date;a(T),await b(e,T)},v=async T=>{const N=sessionStorage.getItem("controlSessionId");if(N)try{await Ce.sendControlData(N,{currentPage:T})}catch(P){console.error("제어 데이터 전송 실패:",P)}},b=async(T,N)=>{const P=sessionStorage.getItem("controlSessionId");if(P)try{let M;N instanceof Date?M=N.toISOString():typeof N=="string"?M=N:M=new Date().toISOString();const L={currentPage:"schedule",scheduleView:T,scheduleDate:M};await Ce.sendControlData(P,L)}catch(M){console.error("제어 데이터 전송 실패:",M)}else console.error("ControlSchedule: 제어 세션 ID가 없습니다.")};return h.jsxs("div",{className:"control-schedule",children:[h.jsx("div",{className:"project-header",children:h.jsx("h1",{children:"학교 생활 도우미"})}),h.jsx("h2",{children:"학사 일정"}),h.jsxs("div",{className:"navigation-buttons",children:[h.jsx("button",{className:"nav-btn",onClick:u,children:e==="monthly"?"저번 달":"이번주"}),h.jsx("button",{className:"nav-btn",onClick:m,children:e==="monthly"?"다음 달":"다음주"})]}),h.jsx("div",{className:"today-button-section",children:h.jsx("button",{className:"today-btn",onClick:y,children:e==="monthly"?"이번달로 이동":"이번주로 이동"})}),h.jsxs("div",{className:"display-format",children:[h.jsx("h3",{children:"표시 형식"}),h.jsxs("div",{className:"format-buttons",children:[h.jsx("button",{className:`format-btn ${e==="monthly"?"active":""}`,onClick:()=>g("monthly"),children:"월별"}),h.jsx("button",{className:`format-btn ${e==="weekly"?"active":""}`,onClick:()=>g("weekly"),children:"주별"})]})]}),h.jsx("button",{className:"main-icon-btn",onClick:l,children:"🏠 메인화면"})]})}function EP(){const n=es(),[e,t]=k.useState(0),[i,a]=k.useState([]);k.useEffect(()=>{l()},[]);const l=async()=>{try{console.log("ControlMeal: 알레르기 정보 로드 시작 (새로운 컬렉션 사용)");const b=await qe.getAllergyItems();console.log("ControlMeal: 가져온 알레르기 데이터:",b);const T=b.map(N=>N.name);console.log("ControlMeal: 처리된 알레르기 항목명:",T),a(T),console.log("ControlMeal: 알레르기 정보 설정 완료, 길이:",T.length)}catch(b){console.error("알레르기 정보 로드 실패:",b),a([])}},u=async()=>{await m("main"),n("/control/main")},m=async b=>{const T=sessionStorage.getItem("controlSessionId");if(T)try{await Ce.sendControlData(T,{currentPage:b})}catch(N){console.error("제어 데이터 전송 실패:",N)}},g=async b=>{t(b),await y(b)},y=async b=>{const T=sessionStorage.getItem("controlSessionId");if(T)try{const N={currentPage:"meal",mealDate:b};await Ce.sendControlData(T,N)}catch(N){console.error("제어 데이터 전송 실패:",N)}else console.error("ControlMeal: 제어 세션 ID가 없습니다.")},v=b=>b===0?"오늘":b<0?`${Math.abs(b)}일 전`:`${b}일 후`;return h.jsxs("div",{className:"control-meal",children:[h.jsx("div",{className:"project-header",children:h.jsx("h1",{children:"학교 생활 도우미"})}),h.jsx("h2",{children:"급식"}),h.jsxs("div",{className:"meal-navigation",children:[h.jsx("button",{className:"meal-btn",onClick:()=>g(e-1),children:v(e-1)}),h.jsxs("div",{className:"current-date",children:["현재: ",v(e)]}),h.jsx("button",{className:"meal-btn",onClick:()=>g(e+1),children:v(e+1)})]}),h.jsx("div",{className:"today-button-section",children:h.jsx("button",{className:"today-btn",onClick:()=>g(0),children:"오늘로 이동"})}),h.jsxs("div",{className:"allergy-info",children:[h.jsx("h3",{children:"알레르기 정보"}),h.jsx("div",{className:"allergy-table",children:i.length>0?h.jsx("table",{children:h.jsx("tbody",{children:(()=>{const b=Math.max(3,Math.min(4,Math.ceil(i.length/2))),T=Math.ceil(i.length/b);return Array.from({length:T},(N,P)=>h.jsx("tr",{children:Array.from({length:b},(M,L)=>{const z=P*b+L,H=i[z];return h.jsx("td",{className:"allergy-cell",children:H?`${z+1}. ${H}`:""},L)})},P))})()})}):h.jsx("div",{className:"no-allergy-data",children:"등록된 알레르기 정보가 없습니다."})})]}),h.jsx("button",{className:"main-icon-btn",onClick:u,children:"🏠 메인화면"})]})}function TP(){const n=es();k.useEffect(()=>{t("roadmap")},[]);const e=async()=>{await t("main"),n("/control/main")},t=async i=>{const a=sessionStorage.getItem("controlSessionId");if(a)try{await Ce.sendControlData(a,{currentPage:i})}catch(l){console.error("제어 데이터 전송 실패:",l)}};return h.jsxs("div",{className:"control-roadmap",children:[h.jsx("h1",{children:"교실 배치"}),h.jsxs("div",{className:"roadmap-message",children:[h.jsx("h2",{children:"스크린을 확인해주세요"}),h.jsx("p",{children:"교실 배치 정보는 출력 화면에서 확인할 수 있습니다."})]}),h.jsx("button",{className:"main-icon-btn",onClick:e,children:"🏠 메인화면"})]})}class AP{constructor(){this.speechSynthesis=window.speechSynthesis,this.currentUtterance=null,this.isPlaying=!1,this.isPaused=!1,this.lastReadContent=null,this.lastReadAnnouncementId=null,this.isActivated=!1,this.autoPlayEnabled=!1}speak(e,t={}){if(this.stop(),!e||e.trim()===""){console.warn("TTS: 읽을 텍스트가 없습니다.");return}if(!this.isSupported()){console.warn("TTS: 브라우저에서 음성 합성을 지원하지 않습니다.");return}const a={...{lang:"ko-KR",rate:.9,pitch:1,volume:1,voice:null},...t};try{if(this.currentUtterance=new SpeechSynthesisUtterance(e),this.currentUtterance.lang=a.lang,this.currentUtterance.rate=a.rate,this.currentUtterance.pitch=a.pitch,this.currentUtterance.volume=a.volume,a.voice)this.currentUtterance.voice=a.voice;else{const u=this.speechSynthesis.getVoices().find(m=>m.lang.startsWith("ko"));u?this.currentUtterance.voice=u:console.warn("TTS: 한국어 음성을 찾을 수 없습니다. 기본 음성을 사용합니다.")}this.currentUtterance.onstart=()=>{this.isPlaying=!0,this.isPaused=!1,console.log("TTS: 음성 재생 시작")},this.currentUtterance.onend=()=>{this.isPlaying=!1,this.isPaused=!1,console.log("TTS: 음성 재생 완료")},this.currentUtterance.onerror=l=>{this.isPlaying=!1,this.isPaused=!1,console.error("TTS: 음성 재생 오류:",l.error),(l.error==="synthesis-failed"||l.error==="synthesis-unavailable")&&(console.warn("TTS: 음성 합성 실패. 라즈베리파이에서 TTS 엔진이 설치되지 않았을 수 있습니다."),console.warn("TTS: 해결 방법: sudo apt-get install espeak 또는 sudo apt-get install festival"))},this.currentUtterance.onpause=()=>{this.isPaused=!0,console.log("TTS: 음성 일시정지")},this.currentUtterance.onresume=()=>{this.isPaused=!1,console.log("TTS: 음성 재개")},this.speechSynthesis.speak(this.currentUtterance),setTimeout(()=>{this.isPlaying||console.warn("TTS: 음성 재생이 시작되지 않았습니다. TTS 엔진을 확인해주세요.")},3e3)}catch(l){console.error("TTS: 음성 합성 초기화 실패:",l),this.isPlaying=!1,this.isPaused=!1}}pause(){this.isPlaying&&!this.isPaused&&this.speechSynthesis.pause()}resume(){this.isPlaying&&this.isPaused&&this.speechSynthesis.resume()}stop(){if(this.isPlaying)try{this.speechSynthesis.cancel(),this.isPlaying=!1,this.isPaused=!1,console.log("TTS: 음성 재생 중지")}catch(e){console.warn("TTS: 음성 중지 중 오류 발생:",e),this.isPlaying=!1,this.isPaused=!1}}getStatus(){return{isPlaying:this.isPlaying,isPaused:this.isPaused,isSupported:"speechSynthesis"in window}}getVoices(){return this.speechSynthesis.getVoices()}getKoreanVoices(){return this.getVoices().filter(t=>t.lang.startsWith("ko"))}speakAnnouncementContent(e,t=!1){if(!e||!e.content){console.warn("TTS: 공지사항 내용이 없습니다.");return}if(!this.isSupported()){console.warn("TTS: 라즈베리파이에서 음성 합성을 지원하지 않습니다.");return}const i=this.cleanText(e.content);if(!t&&this.lastReadAnnouncementId===e.id&&this.lastReadContent===i){console.log("TTS: 이미 읽은 공지사항입니다. 건너뜁니다.");return}if(!t&&!this.autoPlayEnabled){console.log("TTS: 자동 재생이 비활성화되어 있습니다. 사용자가 재생 버튼을 눌러주세요.");return}const a=i;this.lastReadContent=i,this.lastReadAnnouncementId=e.id,this.speak(a,{rate:.7,pitch:1,volume:.8,lang:"ko-KR"})}activateTTS(){this.isActivated=!0,this.autoPlayEnabled=!0,console.log("TTS: 사용자 제스처로 활성화되었습니다.")}cleanText(e){if(!e)return"";let t=e.replace(/<[^>]*>/g,"");return t=t.replace(/&nbsp;/g," "),t=t.replace(/&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&quot;/g,'"'),t=t.replace(/\s+/g," "),t=t.trim(),t}isSupported(){return"speechSynthesis"in window}}const Nn=new AP;function xP(){const n=es(),[e,t]=k.useState(0),i=async()=>{await a("main"),n("/control/main")},a=async y=>{const v=sessionStorage.getItem("controlSessionId");if(v)try{await Ce.sendControlData(v,{currentPage:y})}catch(b){console.error("제어 데이터 전송 실패:",b)}},l=async()=>{const y=Math.max(0,e-1);t(y),await m(y)},u=async()=>{const y=e+1;t(y),await m(y)},m=async y=>{const v=sessionStorage.getItem("controlSessionId");if(v)try{await Ce.sendControlData(v,{currentPage:"announcement",announcementIndex:y})}catch(b){console.error("제어 데이터 전송 실패:",b)}},g=async()=>{const y=sessionStorage.getItem("controlSessionId");if(y)try{await Ce.sendControlData(y,{currentPage:"announcement",announcementIndex:e,reReadAnnouncement:!0})}catch(v){console.error("다시 듣기 신호 전송 실패:",v)}};return h.jsxs("div",{className:"control-announcement",children:[h.jsx("h1",{children:"공지사항"}),h.jsxs("div",{className:"announcement-navigation",children:[h.jsx("button",{className:"nav-btn",onClick:l,children:"이전 게시물"}),h.jsx("button",{className:"nav-btn",onClick:u,children:"다음 게시물"})]}),h.jsxs("div",{className:"current-post",children:[h.jsxs("p",{children:["현재 게시물: ",e+1,"번째"]}),h.jsx("button",{className:"listen-btn",onClick:g,children:"🔊 다시 듣기"})]}),h.jsx("button",{className:"main-icon-btn",onClick:i,children:"🏠 메인화면"})]})}function CP(){const n=es(),[e,t]=k.useState("연결 안됨"),[i,a]=k.useState(""),[l,u]=k.useState(!1),[m,g]=k.useState(""),[y,v]=k.useState(""),[b,T]=k.useState(""),[N,P]=k.useState(!1),[M,L]=k.useState("040507");k.useEffect(()=>{(async()=>{try{const S=await Yt(De(ve,"system","pinCode"));S.exists()&&L(S.data().code||"040507")}catch(S){console.error("시스템 PIN 코드 로드 실패:",S)}})();const O=sessionStorage.getItem("currentPin");O&&(a(O),t("연결됨"))},[]);const z=()=>{u(!0),g(""),v(""),T(""),P(!1)},H=R=>{y.length<6&&v(O=>O+R)},G=()=>{v(R=>R.slice(0,-1))},ie=()=>{v("")},re=async()=>{if(y.length!==6){T("6자리 비밀번호를 입력해주세요.");return}if(y!==M){T("비밀번호가 올바르지 않습니다.");return}u(!1),P(!0),T(""),await j()},ae=()=>{u(!1),g(""),v(""),T(""),P(!1)},j=async()=>{const R=sessionStorage.getItem("controlSessionId"),O=sessionStorage.getItem("outputSessionId");if(R)try{O&&(await Ce.sendControlData(R,{currentPage:"main",adminRemoved:!0}),await new Promise(S=>setTimeout(S,500))),await Ce.disconnectSession(R),sessionStorage.removeItem("controlSessionId"),sessionStorage.removeItem("outputSessionId"),sessionStorage.removeItem("currentPin"),sessionStorage.removeItem("pairingId"),t("연결 안됨"),a(""),P(!1),n("/")}catch(S){console.error("연결 해제 실패:",S),T("연결 해제에 실패했습니다. 다시 시도해주세요.")}else T("연결된 세션이 없습니다.")},I=async()=>{if(!N){z();return}await j()},A=()=>{n("/control/main")};return h.jsxs("div",{className:"control-connection-info",children:[h.jsx("h1",{children:"연결 정보"}),h.jsxs("div",{className:"connection-status",children:[h.jsxs("div",{className:"status-item",children:[h.jsx("span",{className:"label",children:"연결 상태:"}),h.jsx("span",{className:`status ${e==="연결됨"?"connected":"disconnected"}`,children:e})]}),i&&h.jsxs("div",{className:"status-item",children:[h.jsx("span",{className:"label",children:"PIN 번호:"}),h.jsx("span",{className:"pin-value",children:i})]}),h.jsxs("div",{className:"status-item",children:[h.jsx("span",{className:"label",children:"연결 시간:"}),h.jsx("span",{className:"time-value",children:new Date().toLocaleString()})]})]}),h.jsx("div",{className:"connection-actions",children:h.jsx("button",{className:"disconnect-btn",onClick:I,disabled:!i,children:"연결 해제"})}),h.jsx("button",{className:"main-icon-btn",onClick:A,children:"🏠 메인 화면"}),l&&h.jsx("div",{className:"pin-popup-overlay",children:h.jsxs("div",{className:"pin-popup",children:[h.jsx("h2",{children:"연결 해제"}),h.jsxs("div",{className:"password-display",children:[h.jsx("div",{className:"password-dots",children:[0,1,2,3,4,5].map(R=>h.jsx("div",{className:`password-dot ${y.length>R?"filled":""}`},R))}),h.jsx("div",{className:"password-text",children:"비밀번호를 입력하세요"})]}),b&&h.jsx("div",{className:"error-message",children:b}),h.jsxs("div",{className:"keypad",children:[h.jsxs("div",{className:"keypad-row",children:[h.jsx("button",{className:"keypad-btn",onClick:()=>H("1"),children:"1"}),h.jsx("button",{className:"keypad-btn",onClick:()=>H("2"),children:"2"}),h.jsx("button",{className:"keypad-btn",onClick:()=>H("3"),children:"3"})]}),h.jsxs("div",{className:"keypad-row",children:[h.jsx("button",{className:"keypad-btn",onClick:()=>H("4"),children:"4"}),h.jsx("button",{className:"keypad-btn",onClick:()=>H("5"),children:"5"}),h.jsx("button",{className:"keypad-btn",onClick:()=>H("6"),children:"6"})]}),h.jsxs("div",{className:"keypad-row",children:[h.jsx("button",{className:"keypad-btn",onClick:()=>H("7"),children:"7"}),h.jsx("button",{className:"keypad-btn",onClick:()=>H("8"),children:"8"}),h.jsx("button",{className:"keypad-btn",onClick:()=>H("9"),children:"9"})]}),h.jsxs("div",{className:"keypad-row",children:[h.jsx("button",{className:"keypad-btn",onClick:()=>H("0"),children:"0"}),h.jsx("button",{className:"keypad-btn backspace-btn",onClick:G,children:"⌫"}),h.jsx("button",{className:"keypad-btn clear-btn",onClick:ie,children:"C"})]})]}),h.jsxs("div",{className:"popup-buttons",children:[h.jsx("button",{className:"submit-btn",onClick:re,disabled:y.length!==6,children:"확인"}),h.jsx("button",{className:"cancel-btn",onClick:ae,children:"취소"})]})]})})]})}function NP(){return h.jsxs(Cy,{children:[h.jsx(dn,{path:"/",element:h.jsx(SP,{})}),h.jsx(dn,{path:"/main",element:h.jsx(bP,{})}),h.jsx(dn,{path:"/schedule",element:h.jsx(wP,{})}),h.jsx(dn,{path:"/meal",element:h.jsx(EP,{})}),h.jsx(dn,{path:"/roadmap",element:h.jsx(TP,{})}),h.jsx(dn,{path:"/announcement",element:h.jsx(xP,{})}),h.jsx(dn,{path:"/connection-info",element:h.jsx(CP,{})})]})}function RP(){const[n,e]=k.useState(""),t=es();return k.useEffect(()=>{let i=null;return(async()=>{try{const l=sessionStorage.getItem("outputSessionId"),u=sessionStorage.getItem("currentPin");l&&u?(e(u),i=Ce.subscribeToOutputData(l,m=>{m.connectedControlSession&&(m.pairingId&&sessionStorage.setItem("pairingId",m.pairingId),setTimeout(()=>{t("/output/main")},100))})):(console.error("OutputLoading: 세션 정보가 없습니다."),t("/"))}catch(l){console.error("연결 초기화 실패:",l),t("/")}})(),()=>{i&&i()}},[t]),h.jsxs("div",{className:"output-loading",children:[h.jsx("h2",{children:"제어용 기기에 아래의 PIN을 입력하세요!"}),h.jsxs("div",{className:"pin-display",children:[h.jsx("span",{className:"pin-label",children:"PIN:"}),h.jsx("span",{className:"pin-number",children:n})]}),h.jsx("div",{className:"loading-text",children:"제어용 기기 연결을 기다리는 중..."})]})}function IP(){const n=es(),[e,t]=k.useState("main"),[i,a]=k.useState(null),[l,u]=k.useState(null),[m,g]=k.useState(null),[y,v]=k.useState(null),[b,T]=k.useState([]),[N,P]=k.useState({name:"",teamName:""}),[M,L]=k.useState(null),[z,H]=k.useState(!1),[G,ie]=k.useState([]),[re,ae]=k.useState(0);k.useEffect(()=>(z&&M?(document.body.style.background="linear-gradient(135deg, #00C851 0%, #007E33 100%)",document.body.style.minHeight="100vh"):(document.body.style.background="#f5f5f5",document.body.style.minHeight="auto"),()=>{document.body.style.background="#f5f5f5",document.body.style.minHeight="auto"}),[z,M]),k.useEffect(()=>()=>{Nn.stop()},[]),k.useEffect(()=>{document.body.style.background="#f5f5f5";const te=sessionStorage.getItem("currentPin"),U=sessionStorage.getItem("outputSessionId");if(sessionStorage.getItem("pairingId"),te&&U){Ce.subscribeToOutputData(U,be=>{if(a(be),be.mainNotice&&be.mainNotice.isActive?(L(be.mainNotice),H(!0)):(L(null),H(!1)),be.controlData){const Y=be.controlData,V=Y.currentPage||"main";if(Y.adminRemoved){sessionStorage.removeItem("currentPin"),sessionStorage.removeItem("outputSessionId"),sessionStorage.removeItem("pairingId"),n("/");return}u(Y),t(V)}else console.log("")});const ge=setInterval(async()=>{try{await Ce.heartbeatSession(U)}catch(be){console.error("Heartbeat 실패:",be)}},6e4);return()=>{clearInterval(ge)}}else n("/");const ee=()=>{U&&Ce.disconnectSession(U)};return window.addEventListener("beforeunload",ee),()=>{window.removeEventListener("beforeunload",ee)}},[n]),k.useEffect(()=>{if(G.length>1){const te=setInterval(()=>{ae(U=>(U+1)%G.length)},2e4);return()=>clearInterval(te)}},[G]);const j=async()=>{try{const te=await qe.getAnnouncements();return te&&te.length>0?te:[]}catch(te){return console.error("공지사항 데이터 가져오기 실패:",te),[]}},I=async(te,U)=>{const ee=te?new Date(te):new Date,ge=ee.getFullYear(),be=ee.getMonth();if(U==="monthly"){const Y=await qe.getScheduleData(ge,be+1),V=new Date(ge,be,1),K=new Date(V);K.setDate(K.getDate()-V.getDay());const fe=[],q=new Date(ge,be+1,0).getDate();for(let ce=0;ce<6;ce++){const me=[];for(let Ee=0;Ee<7;Ee++){const Te=ce*7+Ee+1-V.getDay();if(Te>q||Te<=0){me.push(null);continue}const Pt={date:new Date(ge,be,Te),isCurrentMonth:!0,events:Y[Te]||[]};me.push(Pt)}if(fe.push(me),(ce+1)*7-V.getDay()>q)break}return{type:"monthly",calendar:fe,monthName:`${be+1}월`,year:ge}}else{const Y=new Date(ee);Y.setDate(ee.getDate()-ee.getDay());const V=new Date(Y);V.setDate(Y.getDate()+6);const K=await qe.getWeeklyScheduleData(Y,V),fe=[];for(let q=0;q<7;q++){const ce=new Date(Y);ce.setDate(Y.getDate()+q);const me={date:new Date(ce),events:K[ce.getDate()]||[]};fe.push(me)}return{type:"weekly",weekData:fe,weekStart:Y,weekEnd:V}}},A=async te=>{try{const U=await qe.getMealData(te);return U&&(U.lunch.length>0||U.dinner.length>0)?{lunch:U.lunch||[],dinner:U.dinner||[]}:{lunch:[],dinner:[]}}catch(U){return console.error("급식 데이터 가져오기 실패:",U),{lunch:[],dinner:[]}}},R=()=>{switch(e){case"schedule":return h.jsx(O,{controlData:l});case"meal":return h.jsx(S,{controlData:l});case"roadmap":return h.jsx(x,{});case"announcement":return h.jsx(Q,{announcements:b,controlData:l});default:return h.jsx("div",{className:"main-display",children:h.jsxs("div",{className:"logo-section",children:[G.length>0?h.jsx("div",{className:"photo-slideshow",children:h.jsxs("div",{className:"photo-container",children:[h.jsx("img",{src:G[re]?.imageURL,alt:G[re]?.title,className:"school-photo"}),h.jsxs("div",{className:"photo-info",children:[h.jsx("h3",{className:"photo-title",children:G[re]?.title}),h.jsx("p",{className:"photo-description",children:G[re]?.description}),h.jsx("p",{className:"photo-date",children:G[re]?.eventDate?.toDate?.()?.toLocaleDateString("ko-KR")||new Date(G[re]?.eventDate).toLocaleDateString("ko-KR")})]})]})}):h.jsx("div",{className:"school-logo",children:h.jsx(Bv,{sx:{fontSize:80}})}),h.jsx("h1",{className:"main-title",children:N.name}),h.jsx("h2",{className:"main-subtitle",children:"학교 생활 도우미"})]})})}},O=({controlData:te})=>{const[U,ee]=k.useState(null),[ge,be]=k.useState(!0);if(k.useEffect(()=>{(async()=>{be(!0);try{const V=await I(te?.scheduleDate,te?.scheduleView||"monthly");ee(V)}catch(V){console.error("학사일정 로드 실패:",V)}finally{be(!1)}})()},[te?.scheduleDate,te?.scheduleView]),ge)return h.jsx("div",{className:"loading",children:"학사일정을 불러오는 중..."});if(U?.type==="monthly")return h.jsxs("div",{className:"schedule-display",children:[h.jsxs("h2",{children:[U.year,"년 ",U.monthName," 학사일정"]}),h.jsxs("div",{className:"calendar-container",children:[h.jsxs("div",{className:"calendar-header",children:[h.jsx("div",{className:"day-header",children:"일"}),h.jsx("div",{className:"day-header",children:"월"}),h.jsx("div",{className:"day-header",children:"화"}),h.jsx("div",{className:"day-header",children:"수"}),h.jsx("div",{className:"day-header",children:"목"}),h.jsx("div",{className:"day-header",children:"금"}),h.jsx("div",{className:"day-header",children:"토"})]}),h.jsx("div",{className:"calendar-body",children:U.calendar.map((Y,V)=>h.jsx("div",{className:"calendar-week",children:Y.map((K,fe)=>K?h.jsxs("div",{className:`calendar-day ${K.isCurrentMonth?"current-month":"other-month"}`,children:[h.jsx("div",{className:`day-number ${K.date.getDay()===0?"sunday":K.date.getDay()===6?"saturday":""}`,children:K.date.getDate()}),h.jsx("div",{className:"day-events",children:K.events.map((q,ce)=>h.jsxs("div",{className:"event-item",children:[h.jsx("div",{className:"event-title",children:q.title}),q.target&&q.target.length>0&&h.jsx("div",{className:"event-target",children:q.target.length>1?q.target.map((me,Ee)=>h.jsx("div",{className:"grade-item",children:me},Ee)):q.target.join(", ")})]},ce))})]},fe):h.jsx("div",{className:"calendar-day empty-day"},fe))},V))})]})]});{const Y=V=>`${V.getMonth()+1}월 ${V.getDate()}일`;return h.jsxs("div",{className:"schedule-display",children:[h.jsx("h2",{children:"주간 학사일정"}),h.jsxs("div",{className:"week-range",children:[Y(U?.weekStart)," ~ ",Y(U?.weekEnd)]}),h.jsxs("div",{className:"weekly-calendar",children:[h.jsxs("div",{className:"week-header",children:[h.jsx("div",{className:"week-day",children:"일"}),h.jsx("div",{className:"week-day",children:"월"}),h.jsx("div",{className:"week-day",children:"화"}),h.jsx("div",{className:"week-day",children:"수"}),h.jsx("div",{className:"week-day",children:"목"}),h.jsx("div",{className:"week-day",children:"금"}),h.jsx("div",{className:"week-day",children:"토"})]}),h.jsx("div",{className:"week-body",children:U?.weekData.map((V,K)=>h.jsxs("div",{className:"week-day-cell",children:[h.jsx("div",{className:`week-day-number ${V.date.getDay()===0?"sunday":V.date.getDay()===6?"saturday":""}`,children:V.date.getDate()}),h.jsx("div",{className:"week-day-events",children:V.events.map((fe,q)=>h.jsxs("div",{className:"week-event-item",children:[h.jsx("div",{className:"event-title",children:fe.title}),fe.target&&fe.target.length>0&&h.jsx("div",{className:"event-target",children:fe.target.length>1?fe.target.map((ce,me)=>h.jsx("div",{className:"grade-item",children:ce},me)):fe.target.join(", ")})]},q))})]},K))})]})]})}},S=({controlData:te})=>{const[U,ee]=k.useState(null),[ge,be]=k.useState(!0);if(k.useEffect(()=>{(async()=>{be(!0);try{const K=te?.mealDate||0,fe=new Date;fe.setDate(fe.getDate()+K);const q=fe.toISOString().split("T")[0],ce=await A(q);ee(ce)}catch(K){console.error("급식 데이터 로드 실패:",K)}finally{be(!1)}})()},[te?.mealDate]),ge)return h.jsx("div",{className:"loading",children:"급식 정보를 불러오는 중..."});const Y=V=>V===0?"오늘":V<0?`${Math.abs(V)}일 전`:`${V}일 후`;return h.jsxs("div",{className:"meal-display",children:[h.jsx("div",{className:"meal-date-header",children:h.jsxs("h2",{children:[Y(te?.mealDate||0),"의 급식"]})}),h.jsxs("div",{className:"meal-sections",children:[h.jsxs("div",{className:"meal-section lunch-section",children:[h.jsx("h3",{children:"점심"}),h.jsx("div",{className:"meal-items",children:U?.lunch&&U.lunch.length>0?U.lunch.map((V,K)=>h.jsx("div",{className:"meal-item",children:V},K)):h.jsx("div",{className:"no-meal-data",children:"급식 정보가 없습니다."})})]}),h.jsxs("div",{className:"meal-section dinner-section",children:[h.jsx("h3",{children:"저녁"}),h.jsx("div",{className:"meal-items",children:U?.dinner&&U.dinner.length>0?U.dinner.map((V,K)=>h.jsx("div",{className:"meal-item",children:V},K)):h.jsx("div",{className:"no-meal-data",children:"급식 정보가 없습니다."})})]})]})]})},x=()=>{const[te,U]=k.useState(null),[ee,ge]=k.useState(!0);return k.useEffect(()=>{(async()=>{try{const Y=await qe.getCampusLayoutImage();U(Y)}catch(Y){console.error("교실 배치 이미지 로드 실패:",Y)}finally{ge(!1)}})()},[]),ee?h.jsxs("div",{className:"roadmap-display",children:[h.jsx("h2",{children:"교내 배치도"}),h.jsxs("div",{className:"loading-container",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"교실 배치 이미지를 불러오는 중..."})]})]}):h.jsxs("div",{className:"roadmap-display",children:[h.jsx("h2",{children:"교내 배치도"}),te?h.jsx("div",{className:"campus-image-container",children:h.jsx("img",{src:te,alt:"교실 배치도",className:"campus-image"})}):h.jsxs("div",{className:"no-campus-image",children:[h.jsx("h3",{children:"준비 중"}),h.jsx("p",{children:"교실 배치도가 준비 중입니다."})]})]})},Q=({announcements:te,controlData:U})=>{const[ee,ge]=k.useState(null),[be,Y]=k.useState(!0),[V,K]=k.useState({isPlaying:!1,isPaused:!1,isSupported:Nn.isSupported()});k.useEffect(()=>{(async()=>{Y(!0);try{const me=await j();ge(me);const Ee=U?.announcementIndex||0,Te=me?.[Ee]||me?.[0];Te&&Te.id&&await qe.incrementAnnouncementViews(Te.id)}catch(me){console.error("공지사항 데이터 로드 실패:",me)}finally{Y(!1)}})()},[U?.announcementIndex]),k.useEffect(()=>{if(ee&&U?.announcementIndex!==void 0){const ce=U.announcementIndex||0,me=ee[ce]||ee[0];if(me&&me.content){Nn.activateTTS();const Ee=setTimeout(()=>{Nn.speakAnnouncementContent(me),K(Nn.getStatus())},1e3);return()=>clearTimeout(Ee)}}},[ee,U?.announcementIndex]),k.useEffect(()=>{if(ee&&U?.reReadAnnouncement){const ce=U.announcementIndex||0,me=ee[ce]||ee[0];me&&me.content&&(Nn.speakAnnouncementContent(me,!0),K(Nn.getStatus()))}},[ee,U?.reReadAnnouncement]),k.useEffect(()=>{const ce=setInterval(()=>{K(Nn.getStatus())},500);return()=>clearInterval(ce)},[]);const fe=U?.announcementIndex||0,q=ee?.[fe]||ee?.[0];return be?h.jsx("div",{className:"loading",children:"공지사항을 불러오는 중..."}):!ee||ee.length===0?h.jsxs("div",{className:"announcement-display",children:[h.jsx("h2",{children:"공지사항"}),h.jsx("div",{className:"no-announcements",children:"등록된 공지사항이 없습니다."})]}):q?h.jsxs("div",{className:"announcement-display",children:[h.jsx("h2",{children:"공지사항"}),h.jsxs("div",{className:"announcement-table",children:[h.jsxs("div",{className:"announcement-header",children:[h.jsx("div",{className:"col-number",children:"번호"}),h.jsx("div",{className:"col-title",children:"제목"}),h.jsx("div",{className:"col-date",children:"등록일"})]}),ee.map((ce,me)=>h.jsxs("div",{className:`announcement-row ${me===fe?"active":""}`,children:[h.jsx("div",{className:"col-number",children:me+1}),h.jsx("div",{className:"col-title",children:ce.title}),h.jsx("div",{className:"col-date",children:ce.createdAt?.toDate?.()?.toLocaleDateString()||"2024.10.01"})]},ce.id))]}),h.jsxs("div",{className:"announcement-content",children:[h.jsxs("div",{className:"announcement-header-with-tts",children:[h.jsx("h3",{children:q.title}),V.isSupported&&h.jsxs("div",{className:"tts-controls",children:[V.isPlaying?V.isPaused?h.jsx("button",{className:"tts-btn resume-btn",onClick:()=>{Nn.resume(),K(Nn.getStatus())},title:"음성 재개",children:"▶️"}):h.jsx("button",{className:"tts-btn pause-btn",onClick:()=>{Nn.pause(),K(Nn.getStatus())},title:"음성 일시정지",children:"⏸️"}):h.jsx("button",{className:"tts-btn play-btn",onClick:()=>{Nn.activateTTS(),Nn.speakAnnouncementContent(q,!0),K(Nn.getStatus())},title:"음성으로 읽기",children:"🔊"}),h.jsx("button",{className:"tts-btn stop-btn",onClick:()=>{Nn.stop(),K(Nn.getStatus())},title:"음성 중지",children:"⏹️"})]})]}),h.jsx("p",{style:{whiteSpace:"pre-line"},children:q.content}),h.jsxs("div",{className:"announcement-meta",children:[h.jsxs("span",{children:["등록일: ",q.createdAt?.toDate?.()?.toLocaleDateString()||"2024.10.01"]}),h.jsxs("span",{children:["조회수: ",q.views||0]}),V.isPlaying&&h.jsx("span",{className:"tts-status",children:V.isPaused?"음성 일시정지 중":"음성 재생 중"})]})]})]}):h.jsx("div",{className:"loading",children:"공지사항을 불러오는 중..."})};return z&&M?h.jsxs("div",{className:"output-main notice-notice-active",children:[h.jsx("div",{className:"notice-notice-header",children:h.jsxs("h1",{children:[h.jsx(gx,{sx:{fontSize:32,marginRight:1}})," 메인 공지사항 활성화 중"]})}),h.jsxs("div",{className:"notice-notice-content",children:[h.jsxs("div",{className:"notice-notice-text",children:[h.jsx("p",{children:h.jsx("strong",{children:M.title})}),h.jsx("p",{style:{whiteSpace:"pre-line"},children:M.content})]}),h.jsx("div",{className:"notice-notice-info",children:h.jsxs("div",{className:"notice-notice-date",children:["작성일: ",new Date(M.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})})]})]}):h.jsxs("div",{className:"output-main",children:[e==="main"&&h.jsxs(h.Fragment,{children:[h.jsx("h1",{className:"school-name",children:N.name||"광주동신여자고등학교"}),h.jsx("h2",{className:"app-title",children:"학교 생활 도우미"})]}),h.jsx("div",{className:"content-area",children:R()}),e==="main"&&h.jsxs("div",{className:"status-indicator",children:[h.jsx("div",{className:"status-dot"}),h.jsx("span",{children:"연결됨"}),sessionStorage.getItem("currentPin")&&h.jsxs("span",{children:["PIN: ",sessionStorage.getItem("currentPin")]})]})]})}function DP(){const[n,e]=k.useState("monthly"),[t,i]=k.useState(new Date),l=n==="monthly"?sampleSchedule.monthly["10월"]:sampleSchedule.weekly["10월 (9/28 ~ 10/4)"];return h.jsxs("div",{className:"output-schedule",children:[h.jsx("h1",{children:n==="monthly"?"10월 학사일정":"10월 학사일정 (9/28 ~ 10/4)"}),h.jsx("div",{className:"schedule-table",children:Object.entries(l).map(([u,m])=>h.jsxs("div",{className:"schedule-row",children:[h.jsx("div",{className:"day-cell",children:u}),h.jsx("div",{className:"events-cell",children:m.map((g,y)=>h.jsx("div",{className:"event-item",children:g},y))})]},u))})]})}function jP({controlData:n}){const[e,t]=k.useState(null),[i,a]=k.useState(!0),[l,u]=k.useState(new Date);if(k.useEffect(()=>{(async()=>{a(!0);try{const b=n?.mealDate||0,T=new Date;T.setDate(T.getDate()+b);const N=T.getFullYear(),P=String(T.getMonth()+1).padStart(2,"0"),M=String(T.getDate()).padStart(2,"0"),L=`${N}-${P}-${M}`,z=await qe.getMealData(L);t(z),u(T)}catch(b){console.error("급식 데이터 로드 실패:",b),t(null)}finally{a(!1)}})()},[n?.mealDate]),i)return h.jsx("div",{className:"output-meal",children:h.jsxs("div",{className:"loading-container",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"급식 정보를 불러오는 중..."})]})});const m=n?.mealSession==="dinner"?"dinner":"lunch",g=m==="lunch"?"점심":"저녁",y=Array.isArray(e?.[m])?e[m]:[];return h.jsx("div",{className:"output-meal",children:h.jsxs("div",{className:"meal-poster",children:[h.jsx("div",{className:"poster-title",children:g}),h.jsx("div",{className:"poster-grid",children:y.length>0?y.map((v,b)=>h.jsx("div",{className:"poster-item",children:v},b)):h.jsx("div",{className:"no-meal",children:"급식 정보가 없습니다"})})]})})}function kP(){return h.jsxs("div",{className:"output-roadmap",children:[h.jsx("h1",{children:"로드맵"}),h.jsx("div",{className:"roadmap-container",children:h.jsx("div",{className:"floor-plan",children:h.jsxs("div",{className:"room-grid",children:[h.jsx("div",{className:"floor-label",children:"1층"}),h.jsxs("div",{className:"rooms-row",children:[h.jsx("div",{className:"room",children:"1-1"}),h.jsx("div",{className:"room",children:"1-2"}),h.jsx("div",{className:"room",children:"1-3"})]}),h.jsx("div",{className:"floor-label",children:"2층"}),h.jsxs("div",{className:"rooms-row",children:[h.jsx("div",{className:"room",children:"2-1"}),h.jsx("div",{className:"room",children:"2-2"}),h.jsx("div",{className:"room",children:"2-3"})]}),h.jsx("div",{className:"floor-label",children:"3층"}),h.jsxs("div",{className:"rooms-row",children:[h.jsx("div",{className:"room",children:"3-1"}),h.jsx("div",{className:"room",children:"3-2"}),h.jsx("div",{className:"room",children:"3-3"})]}),h.jsxs("div",{className:"special-rooms",children:[h.jsx("div",{className:"special-room faculty",children:"교무실"}),h.jsx("div",{className:"special-room nurse",children:"보건실"}),h.jsx("div",{className:"special-room library",children:"도서관"}),h.jsx("div",{className:"special-room auditorium",children:"강당"}),h.jsx("div",{className:"special-room cafeteria",children:"급식실"})]})]})})})]})}function OP(){return h.jsxs("div",{className:"output-announcement",children:[h.jsx("h1",{children:"공지사항"}),h.jsxs("div",{className:"announcement-content",children:[h.jsxs("div",{className:"announcement-item",children:[h.jsx("h3",{children:"중간고사 일정 안내"}),h.jsx("p",{children:"10월 15일부터 10월 19일까지 중간고사가 진행됩니다."}),h.jsx("span",{className:"date",children:"2024.10.01"})]}),h.jsxs("div",{className:"announcement-item",children:[h.jsx("h3",{children:"체험학습 신청 안내"}),h.jsx("p",{children:"10월 20일 체험학습 신청을 받습니다. 신청서는 담임선생님께 제출해주세요."}),h.jsx("span",{className:"date",children:"2024.09.28"})]}),h.jsxs("div",{className:"announcement-item",children:[h.jsx("h3",{children:"건강검진 일정"}),h.jsx("p",{children:"10월 25일 전교생 건강검진이 예정되어 있습니다."}),h.jsx("span",{className:"date",children:"2024.09.25"})]})]}),h.jsx("div",{className:"location-icon",children:h.jsx(lP,{sx:{fontSize:24}})})]})}function MP(){return h.jsxs(Cy,{children:[h.jsx(dn,{path:"/",element:h.jsx(RP,{})}),h.jsx(dn,{path:"/main",element:h.jsx(IP,{})}),h.jsx(dn,{path:"/schedule",element:h.jsx(DP,{})}),h.jsx(dn,{path:"/meal",element:h.jsx(jP,{})}),h.jsx(dn,{path:"/roadmap",element:h.jsx(kP,{})}),h.jsx(dn,{path:"/announcement",element:h.jsx(OP,{})})]})}const PP="modulepreload",VP=function(n){return"/simpleInfo/"+n},Iw={},Dw=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let y=function(v){return Promise.all(v.map(b=>Promise.resolve(b).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var u=y;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),g=m?.nonce||m?.getAttribute("nonce");a=y(t.map(v=>{if(v=VP(v),v in Iw)return;Iw[v]=!0;const b=v.endsWith(".css"),T=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${T}`))return;const N=document.createElement("link");if(N.rel=b?"stylesheet":PP,b||(N.as="script"),N.crossOrigin="",N.href=v,g&&N.setAttribute("nonce",g),document.head.appendChild(N),b)return new Promise((P,M)=>{N.addEventListener("load",P),N.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(m){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=m,window.dispatchEvent(g),!g.defaultPrevented)throw m}return a.then(m=>{for(const g of m||[])g.status==="rejected"&&l(g.reason);return e().catch(l)})};class LP{constructor(){this.subscribers=new Set,this.isMonitoring=!1,this.lastActivity=null,this.systemStatus={isOnline:!1,lastActivity:null,activeConnections:0,recentActivity:[]}}startMonitoring(){this.isMonitoring||(this.isMonitoring=!0,console.log("시스템 모니터링 시작"),this.monitorActiveConnections(),this.monitorRecentActivity(),this.startPeriodicCheck())}stopMonitoring(){this.isMonitoring=!1,console.log("시스템 모니터링 중지")}monitorActiveConnections(){const e=Xe(ve,"connections"),t=Rn(e,ha("connectedAt","desc"));this.connectionsUnsubscribe=oa(t,i=>{const a=i.docs.filter(l=>{const u=l.data();return u.status==="connected"||u.status==="control_connected"});this.systemStatus.activeConnections=a.length,this.updateLastActivity(),this.notifySubscribers()},i=>{console.error("활성 연결 모니터링 오류:",i)})}monitorRecentActivity(){[{collection:"schedules",field:"createdAt"},{collection:"announcements",field:"createdAt"},{collection:"meals",field:"updatedAt"},{collection:"mainNotice",field:"updatedAt"}].forEach(t=>{const i=Xe(ve,t.collection),a=Rn(i,ha(t.field,"desc"),hf(1));oa(a,l=>{if(!l.empty){const g=l.docs[0].data()[t.field];g&&this.updateLastActivity(g.toDate())}this.notifySubscribers()},l=>{console.error(`${t.collection} 모니터링 오류:`,l)})})}startPeriodicCheck(){this.periodicInterval=setInterval(()=>{this.checkSystemHealth()},300*1e3)}async checkSystemHealth(){try{const e=Xe(ve,"systemHealth");await Bt(e),this.systemStatus.isOnline=!0,this.updateLastActivity()}catch(e){console.error("시스템 건강 상태 체크 실패:",e),this.systemStatus.isOnline=!1}this.notifySubscribers()}updateLastActivity(e=new Date){this.lastActivity=e,this.systemStatus.lastActivity=e,this.systemStatus.recentActivity.unshift({timestamp:e,type:"system_check"}),this.systemStatus.recentActivity.length>10&&(this.systemStatus.recentActivity=this.systemStatus.recentActivity.slice(0,10))}notifySubscribers(){this.subscribers.forEach(e=>{try{e(this.getSystemStatus())}catch(t){console.error("구독자 알림 오류:",t)}})}subscribe(e){return this.subscribers.add(e),e(this.getSystemStatus()),()=>{this.subscribers.delete(e)}}getSystemStatus(){const e=new Date,t=this.systemStatus.lastActivity,i=t&&e.getTime()-t.getTime()<600*1e3;return{...this.systemStatus,isRecentlyActive:i,statusText:this.getStatusText(i),statusColor:this.getStatusColor(i)}}getStatusText(e){return this.systemStatus.isOnline?e?"정상 운영 중":"활동 없음":"오프라인"}getStatusColor(e){return this.systemStatus.isOnline?e?"#4caf50":"#ff9800":"#f44336"}getCurrentStatus(){return Promise.resolve(this.getSystemStatus())}cleanup(){this.stopMonitoring(),this.connectionsUnsubscribe&&this.connectionsUnsubscribe(),this.periodicInterval&&clearInterval(this.periodicInterval),this.subscribers.clear()}}const to=new LP;function UP({onSuccess:n}){const[e,t]=k.useState(""),[i,a]=k.useState(""),[l,u]=k.useState(!1),[m,g]=k.useState(!1),y=es();k.useEffect(()=>(document.body.style.background="#f5f5f5",()=>{document.body.style.background="#f5f5f5"}),[]);const v=async N=>{N.preventDefault(),u(!0),a("");try{const P=await qe.getAdminByCode(e);P&&P.isActive?(console.log("로그인 성공한 관리자 정보:",P),console.log("관리자 권한:",P.permissions),console.log("systemManagement 권한 있음:",P.permissions?.includes("systemManagement")),sessionStorage.setItem("adminAuthenticated","true"),sessionStorage.setItem("adminInfo",JSON.stringify({id:P.id,name:P.name,adminCode:P.adminCode,permissions:P.permissions,level:P.level})),await Jn.logAdminLogin(P),n(P)):a("잘못된 관리자 코드이거나 비활성화된 계정입니다.")}catch(P){console.error("관리자 인증 실패:",P),a("인증 중 오류가 발생했습니다.")}u(!1)},b=()=>{y("/")},T=N=>{t(N.target.value),a("")};return h.jsxs("div",{className:"admin-auth-screen",children:[h.jsxs("div",{className:"background-decoration",children:[h.jsx("div",{className:"decoration-circle circle-1"}),h.jsx("div",{className:"decoration-circle circle-2"}),h.jsx("div",{className:"decoration-circle circle-3"}),h.jsx("div",{className:"decoration-square square-1"}),h.jsx("div",{className:"decoration-square square-2"}),h.jsx("div",{className:"decoration-triangle triangle-1"}),h.jsx("div",{className:"decoration-triangle triangle-2"})]}),h.jsxs("div",{className:"admin-auth-container",children:[h.jsxs("div",{className:"admin-auth-card",children:[h.jsxs("div",{className:"card-header",children:[h.jsx("div",{className:"admin-icon",children:h.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("rect",{width:"20",height:"14",x:"2",y:"7",rx:"3",ry:"3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),h.jsx("path",{d:"M9 10v-3a3 3 0 0 1 6 0v3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),h.jsx("path",{d:"M12 17a2 2 0 1 1 0-4 2 2 0 0 1 0 4z",fill:"currentColor"})]})}),h.jsx("h1",{className:"auth-title",children:"관리자 인증"}),h.jsx("p",{className:"auth-subtitle",children:"학교 생활 도우미 관리자 페이지 접근"}),h.jsxs("div",{className:"security-badge",children:[h.jsx("span",{className:"security-icon",children:h.jsx(cP,{sx:{fontSize:20}})}),h.jsx("span",{children:"보안 인증 필요"})]})]}),h.jsxs("form",{onSubmit:v,className:"admin-auth-form",children:[h.jsxs("div",{className:"password-input-container",children:[h.jsx("label",{htmlFor:"adminCode",className:"password-label",children:"관리자 코드"}),h.jsxs("div",{className:"input-wrapper",children:[h.jsx("input",{type:m?"text":"password",id:"adminCode",value:e,onChange:T,placeholder:"관리자 코드를 입력하세요",className:"password-input",required:!0}),h.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>g(!m),children:m?h.jsx(vP,{sx:{fontSize:20}}):h.jsx(yP,{sx:{fontSize:20}})})]})]}),i&&h.jsxs("div",{className:"error-container",children:[h.jsx("span",{className:"error-icon",children:h.jsx(Hl,{sx:{fontSize:20}})}),h.jsx("span",{className:"error-message",children:i})]}),h.jsx("div",{className:"button-group",children:h.jsx("button",{type:"submit",className:`login-button ${l?"loading":""}`,disabled:l||!e.trim(),children:l?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("span",{children:"인증 중..."})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"login-icon",children:"🔑"}),h.jsx("span",{children:"관리자 로그인"})]})})}),h.jsxs("div",{className:"auth-footer",children:[h.jsxs("button",{type:"button",onClick:b,className:"back-link",children:[h.jsx("span",{className:"back-icon",children:"←"}),h.jsx("span",{children:"메인화면으로 돌아가기"})]}),h.jsx("div",{className:"security-info",children:h.jsxs("span",{className:"security-text",children:[h.jsx(cm,{sx:{fontSize:16,marginRight:.5}})," 이 페이지는 관리자 전용입니다"]})})]})]})]}),h.jsxs("div",{className:"auth-pattern",children:[h.jsx("div",{className:"pattern-dot"}),h.jsx("div",{className:"pattern-dot"}),h.jsx("div",{className:"pattern-dot"}),h.jsx("div",{className:"pattern-dot"}),h.jsx("div",{className:"pattern-dot"})]})]})]})}function zP(){const[n,e]=k.useState([]),[t,i]=k.useState(!1),[a,l]=k.useState(""),[u,m]=k.useState(null),[g,y]=k.useState({title:"",content:""});k.useEffect(()=>{v()},[]);const v=async()=>{i(!0);try{const H=(await qe.getAnnouncements()).sort((G,ie)=>{const re=G.createdAt?.toDate?.()||new Date(0);return(ie.createdAt?.toDate?.()||new Date(0))-re});e(H)}catch{b("공지사항 로드 실패")}finally{i(!1)}},b=z=>{l(z),setTimeout(()=>l(""),3e3)},T=()=>{m("new"),y({title:"",content:""})},N=z=>{m(z.id),y({title:z.title,content:z.content})},P=async z=>{if(window.confirm("정말 삭제하시겠습니까?")){i(!0);try{await qe.deleteAnnouncement(z),b("공지사항이 삭제되었습니다."),v()}catch{b("삭제 실패")}finally{i(!1)}}},M=async()=>{if(!g.title.trim()||!g.content.trim()){b("제목과 내용을 모두 입력해주세요.");return}i(!0);try{u==="new"?(await qe.addAnnouncement(g.title,g.content),b("공지사항이 추가되었습니다.")):(await qe.updateAnnouncement(u,g.title,g.content),b("공지사항이 수정되었습니다.")),m(null),y({title:"",content:""}),v()}catch{b("저장 실패")}finally{i(!1)}},L=()=>{m(null),y({title:"",content:""})};return h.jsxs("div",{className:"admin-table-container",children:[h.jsxs("div",{className:"announcement-header",children:[h.jsxs("h2",{children:[h.jsx(W6,{sx:{fontSize:20,marginRight:6}})," 공지사항 관리"]}),h.jsxs("button",{className:"add-announcement-btn",onClick:T,disabled:t,children:[h.jsx(px,{sx:{fontSize:18,marginRight:4}})," 추가"]})]}),a&&h.jsx("div",{className:"message",children:a}),u&&h.jsxs("div",{className:"edit-form",children:[h.jsx("h3",{children:u==="new"?"새 공지사항 추가":"공지사항 수정"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"제목:"}),h.jsx("input",{type:"text",value:g.title,onChange:z=>y({...g,title:z.target.value}),placeholder:"제목을 입력하세요"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"내용:"}),h.jsx("textarea",{value:g.content,onChange:z=>y({...g,content:z.target.value}),placeholder:"내용을 입력하세요",rows:"4"})]}),h.jsxs("div",{className:"form-actions",children:[h.jsxs("button",{className:"save-btn",onClick:M,disabled:t,children:[h.jsx(Sx,{sx:{fontSize:16,marginRight:4}})," ",t?"저장 중...":"저장"]}),h.jsxs("button",{className:"cancel-btn",onClick:L,disabled:t,children:[h.jsx(by,{sx:{fontSize:16,marginRight:4}})," 취소"]})]})]}),h.jsx("div",{className:"announcement-list",children:n.map((z,H)=>h.jsxs("div",{className:"announcement-card",children:[h.jsxs("div",{className:"announcement-card-header",children:[h.jsx("div",{className:"announcement-number",children:H+1}),h.jsx("div",{className:"announcement-title",children:z.title}),h.jsxs("div",{className:"announcement-actions",children:[h.jsx("button",{className:"edit-announcement-btn",onClick:()=>N(z),disabled:t,title:"수정",children:h.jsx(vx,{sx:{fontSize:16}})}),h.jsx("button",{className:"delete-announcement-btn",onClick:()=>P(z.id),disabled:t,title:"삭제",children:h.jsx(yx,{sx:{fontSize:16}})})]})]}),h.jsx("div",{className:"announcement-card-content",children:h.jsx("p",{className:"announcement-content-text",style:{whiteSpace:"pre-line"},children:z.content})}),h.jsxs("div",{className:"announcement-card-footer",children:[h.jsxs("span",{className:"announcement-date",children:["등록일: ",z.createdAt?.toDate?.()?.toLocaleDateString()||"N/A"]}),h.jsxs("span",{className:"announcement-views",children:["조회수: ",z.views||0]})]})]},z.id))})]})}function BP(){const[n,e]=k.useState(new Date),[t,i]=k.useState([]),[a,l]=k.useState(null),[u,m]=k.useState(!1),[g,y]=k.useState(null),[v,b]=k.useState({title:"",target:[]}),[T,N]=k.useState(!1);k.useEffect(()=>{P()},[n]);const P=async()=>{N(!0);try{const A=n.getFullYear(),R=n.getMonth()+1,O=await qe.getScheduleData(A,R),S=[];Object.keys(O).forEach(x=>{O[x].forEach(Q=>{S.push({...Q,eventDate:new Date(A,R-1,parseInt(x))})})}),i(S)}catch(A){console.error("학사일정 로드 실패:",A),i([])}finally{N(!1)}},M=()=>{const A=n.getFullYear(),R=n.getMonth(),O=new Date(A,R,1),S=new Date(O);S.setDate(S.getDate()-O.getDay());const x=[],Q=new Date(S);for(let te=0;te<6;te++){const U=[];for(let ee=0;ee<7;ee++){const ge=Array.isArray(t)?t.filter(be=>{const Y=new Date(be.eventDate);return Y.getDate()===Q.getDate()&&Y.getMonth()===Q.getMonth()&&Y.getFullYear()===Q.getFullYear()}):[];U.push({date:new Date(Q),events:ge,isCurrentMonth:Q.getMonth()===R}),Q.setDate(Q.getDate()+1)}x.push(U)}return x},L=A=>{l(A),m(!0),y(null),b({title:"",target:[]})},z=A=>{if(y(A),b({title:A.title,target:A.target||[]}),A.eventDate){const R=A.eventDate instanceof Date?A.eventDate:new Date(A.eventDate);l(R)}m(!0)},H=async A=>{A.preventDefault(),N(!0);try{if(!a){console.error("선택된 날짜가 없습니다.");return}const R=a.getFullYear(),O=String(a.getMonth()+1).padStart(2,"0"),S=String(a.getDate()).padStart(2,"0"),x=`${R}-${O}-${S}`;if(g)await qe.updateScheduleEventById(g.id,{eventDate:x,title:v.title,target:v.target});else{const Q=new Date(x),te=Q.getFullYear(),U=Q.getMonth()+1,ee=Q.getDate();await qe.addScheduleEvent(te,U,ee,v.title,v.target)}m(!1),y(null),b({title:"",target:[]}),P()}catch(R){console.error("학사일정 저장 실패:",R)}finally{N(!1)}},G=async A=>{if(window.confirm("정말로 이 일정을 삭제하시겠습니까?"))try{await qe.deleteScheduleEvent(A),P()}catch(R){console.error("학사일정 삭제 실패:",R)}},ie=(A,R)=>{b(R?O=>({...O,target:[...O.target,A]}):O=>({...O,target:O.target.filter(S=>S!==A)}))},re=A=>{e(R=>{const O=new Date(R);return O.setMonth(O.getMonth()+A),O})},ae=M(),j=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],I=["일","월","화","수","목","금","토"];return h.jsxs("div",{className:"admin-schedule-calendar",children:[h.jsxs("div",{className:"calendar-header",children:[h.jsx("button",{onClick:()=>re(-1),children:"이전 달"}),h.jsxs("h2",{children:[n.getFullYear(),"년 ",j[n.getMonth()]]}),h.jsx("button",{onClick:()=>re(1),children:"다음 달"})]}),T?h.jsxs("div",{className:"loading-spinner",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"10%",margin:"0 auto"},children:[h.jsx("div",{className:"spinner"}),h.jsx("p",{children:"학사일정을 불러오는 중..."})]}):h.jsxs("div",{className:"calendar-grid",children:[h.jsx("div",{className:"calendar-week-header",children:I.map(A=>h.jsx("div",{className:"day-header",children:A},A))}),ae.map((A,R)=>h.jsx("div",{className:"calendar-week",children:A.map((O,S)=>h.jsxs("div",{className:`calendar-day ${O.isCurrentMonth?"":"other-month"}`,onClick:()=>L(O.date),children:[h.jsx("div",{className:`day-number ${O.date.getDay()===0?"sunday":O.date.getDay()===6?"saturday":""}`,children:O.date.getDate()}),h.jsx("div",{className:"day-events",children:O.events.map((x,Q)=>h.jsxs("div",{className:"event-item",onClick:te=>{te.stopPropagation(),z(x)},children:[h.jsx("div",{className:"event-title",children:x.title}),h.jsx("div",{className:"event-target",children:x.target?.join(", ")}),h.jsx("button",{className:"delete-event-btn",onClick:te=>{te.stopPropagation(),G(x.id)},children:"×"})]},Q))})]},S))},R))]}),u&&h.jsx("div",{className:"event-form-overlay",children:h.jsxs("div",{className:"event-form",children:[h.jsx("h3",{children:g?"일정 수정":"일정 추가"}),h.jsxs("form",{onSubmit:H,children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"제목:"}),h.jsx("input",{type:"text",value:v.title,onChange:A=>b(R=>({...R,title:A.target.value})),required:!0})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"대상:"}),h.jsx("div",{className:"checkbox-group",children:["1학년","2학년","3학년"].map(A=>h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:v.target.includes(A),onChange:R=>ie(A,R.target.checked)}),A]},A))})]}),h.jsxs("div",{className:"form-buttons",children:[h.jsx("button",{type:"submit",disabled:T,children:T?"저장 중...":g?"수정":"추가"}),h.jsx("button",{type:"button",onClick:()=>m(!1),children:"취소"})]})]})]})})]})}function FP(){const[n,e]=k.useState(new Date),[t,i]=k.useState([]),[a,l]=k.useState(null),[u,m]=k.useState(!1),[g,y]=k.useState(null),[v,b]=k.useState({lunch:"",dinner:""}),[T,N]=k.useState(!1);k.useEffect(()=>{P()},[n]);const P=async()=>{N(!0);try{const I=n.getFullYear(),A=n.getMonth()+1,R=new Date(I,A,0).getDate(),O=[];for(let S=1;S<=R;S++){const x=`${I}-${String(A).padStart(2,"0")}-${String(S).padStart(2,"0")}`;try{const Q=await qe.getMealData(x);Q&&(Q.lunch.length>0||Q.dinner.length>0)&&O.push({date:x,lunch:Q.lunch,dinner:Q.dinner})}catch{}}i(O)}catch(I){console.error("급식 정보 로드 실패:",I),i([])}finally{N(!1)}},M=()=>{const I=n.getFullYear(),A=n.getMonth(),R=new Date(I,A,1),O=new Date(R);O.setDate(O.getDate()-R.getDay());const S=[],x=new Date(O);for(let Q=0;Q<6;Q++){const te=[];for(let U=0;U<7;U++){const ee=Array.isArray(t)?t.find(ge=>{const be=new Date(ge.date);return be.getDate()===x.getDate()&&be.getMonth()===x.getMonth()&&be.getFullYear()===x.getFullYear()}):null;te.push({date:new Date(x),meal:ee,isCurrentMonth:x.getMonth()===A}),x.setDate(x.getDate()+1)}S.push(te)}return S},L=I=>{l(I),m(!0),y(null),b({lunch:"",dinner:""})},z=I=>{if(y(I),b({lunch:I.lunch.join(", "),dinner:I.dinner.join(", ")}),I.date){const A=I.date instanceof Date?I.date:new Date(I.date);l(A)}m(!0)},H=async I=>{I.preventDefault(),N(!0);try{if(!a){console.error("선택된 날짜가 없습니다.");return}const A=a.getFullYear(),R=String(a.getMonth()+1).padStart(2,"0"),O=String(a.getDate()).padStart(2,"0"),S=`${A}-${R}-${O}`,x=v.lunch.split(",").map(te=>te.trim()).filter(te=>te),Q=v.dinner.split(",").map(te=>te.trim()).filter(te=>te);g?await qe.updateMealData(S,x,Q):await qe.updateMealData(S,x,Q),m(!1),y(null),b({lunch:"",dinner:""}),P()}catch(A){console.error("급식 정보 저장 실패:",A)}finally{N(!1)}},G=async I=>{if(window.confirm("정말로 이 날의 급식 정보를 삭제하시겠습니까?"))try{await qe.deleteMealData(I),P()}catch(A){console.error("급식 정보 삭제 실패:",A)}},ie=I=>{e(A=>{const R=new Date(A);return R.setMonth(R.getMonth()+I),R})},re=M(),ae=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],j=["일","월","화","수","목","금","토"];return h.jsxs("div",{className:"admin-meal-calendar",children:[h.jsx("h2",{className:"meal-calendar-title",children:"급식 목록"}),h.jsxs("div",{className:"calendar-header",children:[h.jsx("button",{onClick:()=>ie(-1),children:"이전 달"}),h.jsxs("h2",{children:[n.getFullYear(),"년 ",ae[n.getMonth()]]}),h.jsx("button",{onClick:()=>ie(1),children:"다음 달"})]}),T?h.jsx("div",{className:"loading-spinner",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"10%",margin:"0 auto"},children:h.jsx("div",{className:"spinner"})}):h.jsxs("div",{className:"calendar-grid",children:[h.jsx("div",{className:"calendar-week-header",children:j.map(I=>h.jsx("div",{className:"day-header",children:I},I))}),re.map((I,A)=>h.jsx("div",{className:"calendar-week",children:I.map((R,O)=>h.jsxs("div",{className:`calendar-day ${R.isCurrentMonth?"":"other-month"}`,onClick:()=>L(R.date),children:[h.jsx("div",{className:"day-number",children:R.date.getDate()}),h.jsx("div",{className:"day-meals",children:R.meal?h.jsxs("div",{className:"meal-item",onClick:S=>{S.stopPropagation(),z(R.meal)},children:[h.jsxs("div",{className:"meal-lunch",children:[h.jsx("strong",{children:"점심:"})," ",R.meal.lunch.slice(0,2).join(", "),R.meal.lunch.length>2&&"..."]}),h.jsxs("div",{className:"meal-dinner",children:[h.jsx("strong",{children:"저녁:"})," ",R.meal.dinner.slice(0,2).join(", "),R.meal.dinner.length>2&&"..."]}),h.jsx("button",{className:"delete-meal-btn",onClick:S=>{S.stopPropagation(),G(R.meal.date)},children:"×"})]}):h.jsx("div",{className:"no-meal",children:"급식 정보 없음"})})]},O))},A))]}),u&&h.jsx("div",{className:"meal-form-overlay",children:h.jsxs("div",{className:"meal-form",children:[h.jsx("h3",{children:g?"급식 정보 수정":"급식 정보 추가"}),h.jsxs("form",{onSubmit:H,children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"점심 메뉴 (쉼표로 구분):"}),h.jsx("textarea",{value:v.lunch,onChange:I=>b(A=>({...A,lunch:I.target.value})),placeholder:"예: 김치찌개, 불고기, 밥, 김치, 우유",rows:"3"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"저녁 메뉴 (쉼표로 구분):"}),h.jsx("textarea",{value:v.dinner,onChange:I=>b(A=>({...A,dinner:I.target.value})),placeholder:"예: 된장찌개, 제육볶음, 밥, 김치, 요구르트",rows:"3"})]}),h.jsxs("div",{className:"form-buttons",children:[h.jsx("button",{type:"submit",disabled:T,children:T?"저장 중...":g?"수정":"추가"}),h.jsx("button",{type:"button",onClick:()=>m(!1),children:"취소"})]})]})]})})]})}function qP({currentAdmin:n}){const[e,t]=k.useState(!1),[i,a]=k.useState(""),[l,u]=k.useState([]),[m,g]=k.useState([]),[y,v]=k.useState(!1),[b,T]=k.useState(null),[N,P]=k.useState(!1),[M,L]=k.useState({}),[z,H]=k.useState({title:"",content:"",targetPins:[],isActive:!1}),G=async()=>{try{const S=await Ce.getActiveConnectionsWithNicknames();u(S);const x={};S.forEach(Q=>{x[Q.pin]=Q.nickname||""}),L(x)}catch{u([]),L({})}},ie=async()=>{try{const S=await Ce.getActiveConnectionsWithNicknames(),x=[];for(const Q of S){const te=await Ce.findOutputSessionByPin(Q.pin);if(te&&te.length>0){const U=te[0];U.mainNotice&&U.mainNotice.isActive&&x.push({pinId:Q.pin,sessionId:U.sessionId,title:U.mainNotice.title,content:U.mainNotice.content,createdAt:U.mainNotice.createdAt,timestamp:U.mainNotice.timestamp})}}g(x)}catch{g([])}};k.useEffect(()=>{G(),ie(),(()=>{setTimeout(()=>{G()},2e3),setTimeout(()=>{G()},5e3)})();const x=Ce.subscribeToActiveConnections(async Q=>{await G(),await ie()});return()=>{x&&typeof x=="function"&&x()}},[]);const re=S=>{H(x=>{const Q=x.targetPins.includes(S)?x.targetPins.filter(U=>U!==S):[...x.targetPins,S],te=Q.filter(U=>m.some(ee=>ee.pinId===U&&(!b||ee.sessionId!==b.sessionId)));return te.length>0?(a(`PIN ${te.join(", ")}에는 이미 활성화된 공지사항이 있습니다.`),x):{...x,targetPins:Q}})},ae=async S=>{if(S.preventDefault(),!z.title.trim()||!z.content.trim()){a("제목과 내용을 모두 입력해주세요.");return}if(z.targetPins.length===0){a("최소 하나 이상의 PIN을 선택해주세요.");return}t(!0);try{await Ce.notifyMainNoticeActive(!0)}catch{}try{const x=[];for(const Q of z.targetPins){const te=await Ce.findOutputSessionByPin(Q);if(te&&te.length>0){const U=te[0];U.mainNotice&&U.mainNotice.isActive&&x.push(Q)}}if(x.length>0)for(const Q of x){const te=await Ce.findOutputSessionByPin(Q);if(te&&te.length>0){const U=te[0];await Ce.deactivateMainNotice(U.sessionId)}}await Promise.all(z.targetPins.map(async Q=>{const te=await Ce.findOutputSessionByPin(Q);if(te&&te.length>0){const U=te[0].sessionId;await Ce.sendMainNotice(U,{title:z.title,content:z.content,createdAt:new Date().toISOString()})}})),n&&await Jn.logMainNoticeToggle(!0,z.title,n),a("메인 공지사항이 성공적으로 전송되었습니다."),H({title:"",content:"",targetPins:[],isActive:!0}),O(),P(!1)}catch{a("공지사항 전송에 실패했습니다.")}finally{t(!1)}},j=async(S,x)=>{if(window.confirm(`정말로 PIN ${x}의 공지사항을 삭제하시겠습니까?`)){t(!0);try{await Ce.deleteMainNotice(S),a("공지사항이 성공적으로 삭제되었습니다."),ie()}catch{a("공지사항 삭제에 실패했습니다.")}finally{t(!1)}}},I=S=>{T(S),H({title:S.title,content:S.content,targetPins:[S.pinId],isActive:!0}),v(!0)},A=()=>{v(!1),T(null),H({title:"",content:"",targetPins:[],isActive:!1})},R=async S=>{if(S.preventDefault(),!z.title.trim()||!z.content.trim()){a("제목과 내용을 모두 입력해주세요.");return}if(z.targetPins.length===0){a("최소 하나 이상의 PIN을 선택해주세요.");return}t(!0);try{const x=z.targetPins.filter(Q=>Q!==b.pinId);if(x.length>0){const Q=[];for(const te of x){const U=await Ce.findOutputSessionByPin(te);if(U&&U.length>0){const ee=U[0];ee.mainNotice&&ee.mainNotice.isActive&&ee.sessionId!==b.sessionId&&Q.push(te)}}if(Q.length>0){a(`PIN ${Q.join(", ")}에는 이미 활성화된 공지사항이 있습니다.`);return}}await Ce.deactivateMainNotice(b.sessionId),await Promise.all(z.targetPins.map(async Q=>{const te=await Ce.findOutputSessionByPin(Q);if(te&&te.length>0){const U=te[0].sessionId;await Ce.sendMainNotice(U,{title:z.title,content:z.content,createdAt:new Date().toISOString()})}})),a("공지사항이 성공적으로 수정되었습니다."),A(),O()}catch{a("공지사항 수정에 실패했습니다.")}finally{t(!1)}},O=()=>{G(),ie()};return h.jsxs("div",{className:"admin-main-notice",children:[h.jsx("h2",{children:"메인 공지사항 관리"}),i&&h.jsx("div",{className:`message ${i.includes("실패")?"error":"success"}`,children:i}),h.jsx("div",{className:"add-notice-section",children:h.jsx("button",{type:"button",className:"add-notice-btn",onClick:()=>P(!N),disabled:e,children:N?"메인 공지사항 작성 취소":"+ 메인 공지사항 추가"})}),N&&h.jsxs("form",{onSubmit:ae,className:"main-notice-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"title",children:"제목 *"}),h.jsx("input",{type:"text",id:"title",value:z.title,onChange:S=>H(x=>({...x,title:S.target.value})),placeholder:"공지사항 제목을 입력하세요",required:!0,maxLength:50})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"content",children:"내용 *"}),h.jsx("textarea",{id:"content",value:z.content,onChange:S=>H(x=>({...x,content:S.target.value})),placeholder:"공지사항 내용을 입력하세요 (줄바꿈 포함)",required:!0,rows:8,maxLength:1e3}),h.jsxs("small",{className:"char-count",children:[z.content.length,"/1000"]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"대상 PIN 선택 *"}),h.jsx("div",{className:"pin-selection",children:l.length===0?h.jsx("p",{className:"no-pins-message",children:"현재 활성화된 PIN이 없습니다."}):h.jsx("div",{className:"pin-checkboxes",children:l.map(S=>h.jsxs("label",{className:"pin-checkbox",children:[h.jsx("input",{type:"checkbox",checked:z.targetPins.includes(S.pin),onChange:()=>re(S.pin)}),h.jsxs("div",{className:"pin-label-section",children:[h.jsxs("span",{className:"pin-label",children:["PIN ",S.pin]}),S.nickname&&h.jsxs("span",{className:"pin-nickname-inline",children:["(",S.nickname,")"]}),h.jsxs("small",{className:"pin-status",children:["(",S.status,")"]})]})]},S.pin))})})]}),h.jsx("div",{className:"form-group",children:h.jsx("button",{type:"submit",className:"submit-btn",disabled:e||!z.title.trim()||!z.content.trim()||z.targetPins.length===0,children:e?"전송 중...":"메인 공지사항 전송"})})]}),h.jsxs("div",{className:"active-notices-section",children:[h.jsx("h3",{children:"현재 활성화된 공지사항"}),m.length===0?h.jsx("p",{className:"no-notices",children:"현재 활성화된 공지사항이 없습니다."}):h.jsx("div",{className:"notices-table",children:h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"대상 PIN"}),h.jsx("th",{children:"제목"}),h.jsx("th",{children:"내용 미리보기"}),h.jsx("th",{children:"작성일"}),h.jsx("th",{children:"조작"})]})}),h.jsx("tbody",{children:m.map(S=>h.jsxs("tr",{children:[h.jsx("td",{className:"pin-cell",children:h.jsxs("div",{className:"pin-with-nickname",children:[h.jsxs("span",{className:"pin-badge",children:["PIN ",S.pinId]}),M[S.pinId]&&h.jsxs("span",{className:"pin-nickname",children:["(",M[S.pinId],")"]})]})}),h.jsx("td",{className:"title-cell",children:h.jsx("button",{className:"title-edit-btn",onClick:()=>I(S),disabled:e,children:S.title})}),h.jsx("td",{className:"content-preview",children:h.jsx("div",{style:{whiteSpace:"pre-line"},children:S.content.length>50?S.content.substring(0,50)+"...":S.content})}),h.jsx("td",{className:"date-cell",children:new Date(S.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),h.jsx("td",{className:"action-cell",children:h.jsx("button",{className:"delete-notice-btn",onClick:()=>j(S.sessionId,S.pinId),disabled:e,children:"삭제"})})]},S.sessionId))})]})})]}),h.jsxs("div",{className:"notice-info",children:[h.jsx("h3",{children:"공지사항 안내"}),h.jsxs("ul",{children:[h.jsx("li",{children:"메인 공지사항이 전송되면 해당 PIN의 출력 화면이 공지사항으로 변경됩니다."}),h.jsx("li",{children:"공지사항 표시 중에는 제어용 다른 조작이 불가능합니다."}),h.jsx("li",{children:"내용에는 최대 1000자까지 작성할 수 있습니다."}),h.jsx("li",{children:"줄바꿈은 그대로 표시됩니다."}),h.jsx("li",{children:"각 PIN당 최대 1개의 공지사항만 제한됩니다."})]})]}),y&&b&&h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-content",children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("h3",{children:"공지사항 수정"}),h.jsx("button",{className:"modal-close-btn",onClick:A,children:"×"})]}),h.jsxs("form",{onSubmit:R,className:"modal-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"edit-title",children:"제목 *"}),h.jsx("input",{type:"text",id:"edit-title",value:z.title,onChange:S=>H(x=>({...x,title:S.target.value})),placeholder:"공지사항 제목을 입력하세요",required:!0,maxLength:50})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"edit-content",children:"내용 *"}),h.jsx("textarea",{id:"edit-content",value:z.content,onChange:S=>H(x=>({...x,content:S.target.value})),placeholder:"공지사항 내용을 입력하세요 (줄바꿈 포함)",required:!0,rows:8,maxLength:1e3}),h.jsxs("small",{className:"char-count",children:[z.content.length,"/1000"]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"대상 PIN 선택 *"}),h.jsx("div",{className:"pin-selection",children:l.length===0?h.jsx("p",{className:"no-pins-message",children:"현재 활성화된 PIN이 없습니다."}):h.jsx("div",{className:"pin-checkboxes",children:l.map(S=>h.jsxs("label",{className:"pin-checkbox",children:[h.jsx("input",{type:"checkbox",checked:z.targetPins.includes(S.pin),onChange:()=>re(S.pin)}),h.jsxs("div",{className:"pin-label-section",children:[h.jsxs("span",{className:"pin-label",children:["PIN ",S.pin]}),S.nickname&&h.jsxs("span",{className:"pin-nickname-inline",children:["(",S.nickname,")"]}),h.jsxs("small",{className:"pin-status",children:["(",S.status,")"]})]})]},S.pin))})})]}),h.jsxs("div",{className:"modal-actions",children:[h.jsx("button",{type:"button",className:"cancel-btn",onClick:A,children:"취소"}),h.jsx("button",{type:"submit",className:"update-btn",disabled:e||!z.title.trim()||!z.content.trim()||z.targetPins.length===0,children:e?"수정 중...":"공지사항 수정"})]})]})]})})]})}function HP(){const[n,e]=k.useState(!1),[t,i]=k.useState(""),[a,l]=k.useState([]),[u,m]=k.useState(!1),[g,y]=k.useState(null),[v,b]=k.useState(null),[T,N]=k.useState({version:"",date:new Date().toISOString().split("T")[0],title:"",content:"",type:"major"}),P=(A,R)=>{const O=Q=>{const[,te,U,ee]=Q.match(/v?(\d+)\.(\d+)\.(\d+)/)||[0,0,0,0];return{major:parseInt(te),minor:parseInt(U),patch:parseInt(ee)}},S=O(A.version),x=O(R.version);return S.major!==x.major?x.major-S.major:S.minor!==x.minor?x.minor-S.minor:x.patch-S.patch},M=async()=>{try{e(!0);const A=await qe.getPatchnotes();l(A.sort(P))}catch{i("패치 노트 목록을 가져오는데 실패했습니다.")}finally{e(!1)}};k.useEffect(()=>{M()},[]);const L=()=>{if(a.length===0)return"1.0.0";const R=a[0].version.match(/^(\d+)\.(\d+)\.(\d+)$/);if(!R)return"1.0.0";const[,O,S,x]=R,Q=parseInt(x)+1;return`${O}.${S}.${Q}`},z=A=>{const R=A.match(/^(\d+)\.(\d+)\.(\d+)$/);if(!R)return null;const[,O,S,x]=R,Q=parseInt(x)+1;return`${O}.${S}.${Q}`},H=A=>{const R=A.match(/^(\d+)\.(\d+)\.(\d+)$/);if(!R)return null;const[,O,S]=R,x=parseInt(S)+1;return`${O}.${x}.0`},G=A=>{const R=A.match(/^(\d+)\.(\d+)\.(\d+)$/);if(!R)return"minor";const[,O,S,x]=R;return O>"1"?"major":S>"0"?"minor":"patch"},ie=()=>{N({version:"",date:new Date().toISOString().split("T")[0],title:"",content:"",type:"minor"}),y(null)},re=async A=>{if(A.preventDefault(),!T.version.trim()||!T.title.trim()||!T.content.trim()){i("버전, 제목, 내용을 모두 입력해주세요.");return}e(!0);try{if(g)await qe.updatePatchnote(g.id,T),i("패치 노트가 성공적으로 수정되었습니다.");else{await qe.createPatchnote(T),i("패치 노트가 성공적으로 등록되었습니다.");try{await Eu.showPatchnoteNotification(T)}catch(R){console.error("알림 발송 실패:",R)}}ie(),m(!1),b(null),y(null),M()}catch{i("패치 노트 등록에 실패했습니다.")}finally{e(!1)}},ae=A=>{if(v===A.id){b(null),y(null);return}y(A),b(A.id),N({version:A.version,date:A.date||new Date().toISOString().split("T")[0],title:A.title,content:A.content,type:A.type||"major"}),m(!0)},j=async A=>{if(window.confirm("정말로 이 패치 노트를 삭제하시겠습니까?")){e(!0);try{await qe.deletePatchnote(A),i("패치 노트가 성공적으로 삭제되었습니다."),M()}catch{i("패치 노트 삭제에 실패했습니다.")}finally{e(!1)}}},I=()=>{m(!1),ie()};return h.jsxs("div",{className:"admin-patchnotes",children:[h.jsx("h2",{children:"패치 노트 관리"}),t&&h.jsx("div",{className:`message ${t.includes("실패")?"error":"success"}`,children:t}),h.jsx("div",{className:"add-patchnote-section",children:h.jsx("button",{type:"button",className:"add-patchnote-btn",onClick:()=>{if(u)ie(),y(null),b(null);else{ie(),y(null),b(null);const A=L();N({version:A,date:new Date().toISOString().split("T")[0],title:"",content:"",type:"major"})}m(!u)},disabled:n,children:u?"패치 노트 작성 취소":"+ 패치 노트 추가"})}),u&&h.jsxs("form",{onSubmit:re,className:"patchnote-form",children:[h.jsxs("div",{className:"form-row",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"version",children:"버전 *"}),h.jsxs("div",{className:"version-input-group",children:[h.jsx("input",{type:"text",id:"version",value:T.version,onChange:A=>{const R=A.target.value,O=G(R);N(S=>({...S,version:R,type:O}))},placeholder:"예: v1.0.0",required:!0}),h.jsxs("div",{className:"version-update-buttons",children:[h.jsx("button",{type:"button",className:"version-update-btn minor",onClick:()=>{const A=H(T.version);A&&N(R=>({...R,version:A,type:"minor"}))},title:"Minor 업데이트 (예: 1.0.0 → 1.1.0)",children:"Minor+1"}),h.jsx("button",{type:"button",className:"version-update-btn patch",onClick:()=>{const A=z(T.version);A&&N(R=>({...R,version:A,type:"fix"}))},title:"Patch 업데이트 (예: 1.0.0 → 1.0.1)",children:"Patch+1"})]})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"date",children:"날짜 *"}),h.jsx("input",{type:"date",id:"date",value:T.date,onChange:A=>N(R=>({...R,date:A.target.value})),required:!0})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"type",children:"타입"}),h.jsxs("select",{id:"type",value:T.type,onChange:A=>N(R=>({...R,type:A.target.value})),children:[h.jsx("option",{value:"major",children:"Major (주요 변경)"}),h.jsx("option",{value:"minor",children:"Minor (기능 변경)"}),h.jsx("option",{value:"security",children:"Security (보안)"}),h.jsx("option",{value:"fix",children:"Fix (버그 수정)"})]})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"title",children:"제목 *"}),h.jsx("input",{type:"text",id:"title",value:T.title,onChange:A=>N(R=>({...R,title:A.target.value})),placeholder:"패치 노트 제목을 입력하세요",required:!0})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"content",children:"내용 *"}),h.jsx("textarea",{id:"content",value:T.content,onChange:A=>N(R=>({...R,content:A.target.value})),placeholder:"변경 사항을 줄바꿈으로 구분하여 입력하세요",rows:"8",required:!0})]}),h.jsxs("div",{className:"form-actions",children:[h.jsx("button",{type:"button",onClick:I,className:"cancel-btn",disabled:n,children:"취소"}),h.jsx("button",{type:"submit",className:"submit-btn",disabled:n||!T.version.trim()||!T.title.trim()||!T.content.trim(),children:n?"처리 중...":g?"패치 노트 수정":"패치 노트 등록"})]})]}),h.jsxs("div",{className:"patchnotes-list",children:[h.jsx("h3",{children:"패치 노트 목록"}),a.length===0?h.jsx("p",{className:"no-patchnotes",children:"등록된 패치 노트가 없습니다."}):h.jsx("div",{className:"patchnotes-container",children:a.map(A=>h.jsxs("div",{className:"patchnote-card",children:[h.jsxs("div",{className:"patchnote-header",children:[h.jsxs("div",{className:"patchnote-version",children:[h.jsx("span",{className:`version-badge ${A.type}`,children:A.version}),h.jsxs("span",{className:"patchnote-type",children:[A.type==="major"&&h.jsxs(h.Fragment,{children:[h.jsx(rP,{sx:{fontSize:16,marginRight:.5}})," 주요 변경"]}),A.type==="minor"&&h.jsxs(h.Fragment,{children:[h.jsx(Z6,{sx:{fontSize:16,marginRight:.5}})," 기능 변경"]}),A.type==="security"&&h.jsxs(h.Fragment,{children:[h.jsx(cm,{sx:{fontSize:16,marginRight:.5}})," 보안"]}),A.type==="fix"&&h.jsxs(h.Fragment,{children:[h.jsx(eP,{sx:{fontSize:16,marginRight:.5}})," 버그 수정"]})]})]}),h.jsx("div",{className:"patchnote-date",children:A.date?new Date(A.date+"T00:00:00").toLocaleDateString("ko-KR"):new Date(A.createdAt).toLocaleDateString("ko-KR")})]}),h.jsxs("div",{className:"patchnote-content",children:[h.jsx("h4",{children:A.title}),h.jsx("div",{className:"patchnote-details",children:A.content.split(`
`).map((R,O)=>h.jsx("p",{children:R},O))})]}),h.jsxs("div",{className:"patchnote-actions",children:[h.jsx("button",{className:"edit-btn",onClick:()=>ae(A),disabled:n,children:v===A.id?"취소":"수정"}),h.jsx("button",{className:"remove-btn",onClick:()=>j(A.id),disabled:n,children:"삭제"})]}),v===A.id&&h.jsxs("div",{className:"patchnote-edit-form",children:[h.jsx("h4",{children:"패치 노트 수정"}),h.jsxs("form",{onSubmit:re,children:[h.jsxs("div",{className:"form-row",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:`edit-version-${A.id}`,children:"버전"}),h.jsx("input",{type:"text",id:`edit-version-${A.id}`,value:T.version,onChange:R=>N({...T,version:R.target.value}),placeholder:"예: v1.9.0",disabled:n})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:`edit-date-${A.id}`,children:"날짜"}),h.jsx("input",{type:"date",id:`edit-date-${A.id}`,value:T.date,onChange:R=>N({...T,date:R.target.value}),disabled:n})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:`edit-type-${A.id}`,children:"타입"}),h.jsxs("select",{id:`edit-type-${A.id}`,value:T.type,onChange:R=>N({...T,type:R.target.value}),disabled:n,children:[h.jsx("option",{value:"major",children:"Major (주요 변경)"}),h.jsx("option",{value:"minor",children:"Minor (기능 변경)"}),h.jsx("option",{value:"security",children:"Security (보안)"}),h.jsx("option",{value:"fix",children:"Fix (버그 수정)"})]})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:`edit-title-${A.id}`,children:"제목"}),h.jsx("input",{type:"text",id:`edit-title-${A.id}`,value:T.title,onChange:R=>N({...T,title:R.target.value}),placeholder:"패치 노트 제목을 입력하세요",disabled:n})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:`edit-content-${A.id}`,children:"내용"}),h.jsx("textarea",{id:`edit-content-${A.id}`,value:T.content,onChange:R=>N({...T,content:R.target.value}),placeholder:"패치 노트 내용을 입력하세요",rows:5,disabled:n})]}),h.jsxs("div",{className:"form-actions",children:[h.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>{b(null),y(null)},disabled:n,children:"취소"}),h.jsx("button",{type:"submit",className:"submit-btn",disabled:n||!T.version.trim()||!T.title.trim()||!T.content.trim(),children:n?"수정 중...":"패치 노트 수정"})]})]})]})]},A.id))})]})]})}function $P({currentAdmin:n}){const[e,t]=k.useState(!1),[i,a]=k.useState(""),[l,u]=k.useState(!1);k.useEffect(()=>{m();const v=Ce.subscribeToSchoolBlockingStatus(b=>{u(b)});return()=>v()},[]);const m=async()=>{try{t(!0);const v=await Ce.getSchoolBlockingStatus();u(v)}catch{a("차단 상태 조회에 실패했습니다.")}finally{t(!1)}},g=async()=>{if(window.confirm(`학교 생활 도우미를 차단하시겠습니까?
모든 사용자가 차단 화면을 보게 됩니다.`)){t(!0);try{await Ce.setSchoolBlockingStatus(!0),await Ce.notifyBlockingStatus(!0);try{await Eu.showBlockingNotification(!0)}catch(v){console.error("차단 알림 발송 실패:",v)}n&&await Jn.logSchoolBlockingToggle(!0,n),a("학교 생활 도우미가 차단되었습니다. 모든 디바이스에 즉시 적용됩니다."),u(!0)}catch{a("차단 설정에 실패했습니다.")}finally{t(!1)}}},y=async()=>{if(window.confirm(`학교 생활 도우미 차단을 해제하시겠습니까?
모든 사용자가 정상적으로 사이트에 접근할 수 있게 됩니다.`)){t(!0);try{await Ce.setSchoolBlockingStatus(!1),await Ce.notifyBlockingStatus(!1);try{await Eu.showBlockingNotification(!1)}catch(v){console.error("차단 해제 알림 발송 실패:",v)}n&&await Jn.logSchoolBlockingToggle(!1,n),a("학교 생활 도우미 차단이 해제되었습니다. 모든 디바이스가 정상 작동합니다."),u(!1)}catch{a("차단 해제에 실패했습니다.")}finally{t(!1)}}};return h.jsxs("div",{className:"admin-school-blocking",children:[h.jsxs("div",{className:"blocking-header",children:[h.jsxs("h2",{children:[h.jsx(Bv,{sx:{fontSize:24,marginRight:1}})," 학교 생활 도우미 차단 관리"]}),h.jsx("p",{children:"시스템 점검이나 긴급상황 시 학교 생활 도우미를 일시적으로 차단할 수 있습니다."})]}),h.jsx("div",{className:"status-section",children:h.jsxs("div",{className:`status-indicator ${l?"blocked":"active"}`,children:[h.jsx("span",{className:"status-icon",children:l?h.jsx(Sy,{sx:{fontSize:24}}):h.jsx(Ti,{sx:{fontSize:24}})}),h.jsx("span",{className:"status-text",children:l?"차단됨 (사용자 접근 불가)":"정상 운영 중"})]})}),h.jsx("div",{className:"control-section",children:h.jsx("div",{className:"control-buttons",children:l?h.jsxs("button",{className:"unblock-btn",onClick:y,disabled:e,children:[h.jsx("span",{className:"btn-icon",children:h.jsx(Ti,{sx:{fontSize:20}})}),h.jsx("span",{className:"btn-text",children:"차단 해제"})]}):h.jsxs("button",{className:"block-btn",onClick:g,disabled:e,children:[h.jsx("span",{className:"btn-icon",children:h.jsx(Sy,{sx:{fontSize:20}})}),h.jsx("span",{className:"btn-text",children:"차단 시작"})]})})}),h.jsxs("div",{className:"info-section",children:[h.jsxs("div",{className:"info-card",children:[h.jsxs("h3",{children:[h.jsx(J6,{sx:{fontSize:20,marginRight:.5}})," 차단 기능 안내"]}),h.jsxs("ul",{className:"info-list",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"차단 시작:"})," 모든 사용자가 차단 화면을 보게 됩니다."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"관리자 페이지:"})," 차단 중에도 관리자 페이지는 정상 접근 가능합니다."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"실시간 반영:"})," 차단 상태 변경이 즉시 반영됩니다."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"차단 화면:"})," 시스템 점검 메시지와 함께 안내 화면을 표시합니다."]})]})]}),h.jsxs("div",{className:"warning-card",children:[h.jsxs("h3",{children:[h.jsx(Hl,{sx:{fontSize:20,marginRight:.5}})," 주의사항"]}),h.jsxs("ul",{className:"warning-list",children:[h.jsx("li",{children:"차단 시 모든 학생과 교사가 서비스를 이용할 수 없습니다."}),h.jsx("li",{children:"긴급 상황이나 시스템 점검 시에만 사용하세요."}),h.jsx("li",{children:"차단 해제 후에도 기존 연결은 정상적으로 유지됩니다."})]})]})]}),h.jsx("div",{className:"refresh-section",children:h.jsxs("button",{className:"refresh-btn",onClick:m,disabled:e,children:[h.jsx("span",{className:"btn-icon",children:h.jsx(Sf,{sx:{fontSize:20}})}),h.jsx("span",{className:"btn-text",children:"상태 새로고침"})]})}),i&&h.jsx("div",{className:`message ${i.includes("실패")?"error":"success"}`,children:i})]})}function GP({currentAdmin:n}){const[e,t]=k.useState([]),[i,a]=k.useState(!1),[l,u]=k.useState(!1),[m,g]=k.useState(null),[y,v]=k.useState(""),[b,T]=k.useState(""),[N,P]=k.useState(""),[M,L]=k.useState("name"),[z,H]=k.useState("asc"),[G,ie]=k.useState(null),[re,ae]=k.useState({name:"",adminCode:"",permissions:[],level:"일반 관리자"}),j=[{key:"schedule",label:"학사일정 관리"},{key:"meal",label:"급식 관리"},{key:"announcement",label:"공지사항 관리"},{key:"allergy",label:"알레르기 관리"},{key:"campusLayout",label:"교실 배치 관리"},{key:"mainNotice",label:"메인 공지사항 관리"},{key:"patchnotes",label:"패치노트 관리"},{key:"schoolBlocking",label:"학교 차단 관리"},{key:"pins",label:"PIN 관리"},{key:"adminManagement",label:"관리자 관리"},{key:"systemManagement",label:"시스템 관리"}];k.useEffect(()=>{I()},[]);const I=async()=>{try{a(!0);const q=await qe.getAdmins();t(q)}catch{A("관리자 목록을 불러오는데 실패했습니다.","error")}finally{a(!1)}},A=(q,ce="success")=>{v(q),T(ce),setTimeout(()=>{v(""),T("")},3e3)},R=()=>{ae({name:"",adminCode:"",permissions:[],level:"일반 관리자"}),u(!1),g(null),P("")},O=async()=>{if(!re.adminCode.trim()){P("");return}P("checking");try{const q=await qe.checkAdminCodeExists(re.adminCode,m?.id);P(q?"duplicate":"available")}catch(q){console.error("코드 중복 확인 실패:",q),P("")}},S=q=>{M===q?H(z==="asc"?"desc":"asc"):(L(q),H("asc"))},x=[...e].sort((q,ce)=>{let me=q[M],Ee=ce[M];if(M==="level"){const Te={"최고 관리자":2,"일반 관리자":1};me=Te[me]||0,Ee=Te[Ee]||0}return typeof me=="string"&&(me=me.toLowerCase(),Ee=Ee.toLowerCase()),z==="asc"?me>Ee?1:-1:me<Ee?1:-1}),Q=n?.level==="최고 관리자"?x:x.filter(q=>q.level==="일반 관리자"),te=q=>q.id===n?.id?!0:n?.level==="최고 관리자"&&q.level==="최고 관리자"?!1:n?.level==="최고 관리자"&&q.level==="일반 관리자",U=q=>q.id===n?.id||n?.level==="최고 관리자"&&q.level==="최고 관리자"?!1:n?.level==="최고 관리자"&&q.level==="일반 관리자",ee=q=>{const{name:ce,value:me}=q.target;ae(Ee=>{const Te={...Ee,[ce]:me};return ce==="level"&&me==="최고 관리자"&&(Te.permissions=["schedule","meal","announcement","allergy","campusLayout","mainNotice","patchnotes","schoolBlocking","pins","adminManagement","systemManagement"]),Te})},ge=q=>{re.level!=="최고 관리자"&&(q==="adminManagement"||q==="systemManagement")||ae(ce=>({...ce,permissions:ce.permissions.includes(q)?ce.permissions.filter(me=>me!==q):[...ce.permissions,q]}))},be=async()=>{try{if(!re.name.trim()||!re.adminCode.trim()){A("이름과 관리자 코드를 입력해주세요.","error");return}if(re.level!=="최고 관리자"&&re.permissions.length===0){A("최소 하나의 권한을 선택해주세요.","error");return}const q={...re};q.level!=="최고 관리자"&&(q.permissions=(q.permissions||[]).filter(ce=>ce!=="adminManagement"&&ce!=="systemManagement")),await qe.createAdmin(q),A("관리자가 성공적으로 생성되었습니다."),R(),I()}catch(q){A(q.message||"관리자 생성에 실패했습니다.","error")}},Y=q=>{g(q),ae({name:q.name,adminCode:q.adminCode,permissions:q.permissions||[],level:q.level||"일반 관리자"}),u(!0)},V=async()=>{try{if(!re.name.trim()){A("이름을 입력해주세요.","error");return}if(m.level==="최고 관리자"){const me={name:re.name};await qe.updateAdmin(m.id,me),A("관리자 이름이 성공적으로 수정되었습니다."),R(),I();return}if(re.level!=="최고 관리자"&&re.permissions.length===0){A("최소 하나의 권한을 선택해주세요.","error");return}const q=m,ce={...re};ce.level!=="최고 관리자"&&(ce.permissions=(ce.permissions||[]).filter(me=>me!=="adminManagement"&&me!=="systemManagement")),await qe.updateAdmin(m.id,ce),(q.adminCode!==re.adminCode||q.name!==re.name||JSON.stringify(q.permissions)!==JSON.stringify(ce.permissions)||q.level!==ce.level)&&await qe.disconnectAdminSessions(re.adminCode),A("관리자 정보가 성공적으로 수정되었습니다."),R(),I()}catch(q){A(q.message||"관리자 수정에 실패했습니다.","error")}},K=async q=>{if(q.id===n?.id){A("자신의 계정은 삭제할 수 없습니다.","error");return}if(window.confirm(`정말로 "${q.name}" 관리자를 삭제하시겠습니까?`))try{await qe.deleteAdmin(q.id),A("관리자가 성공적으로 삭제되었습니다."),I()}catch{A("관리자 삭제에 실패했습니다.","error")}},fe=n?.level==="최고 관리자";return h.jsxs("div",{className:"admin-management",children:[h.jsxs("div",{className:"admin-management-header",children:[h.jsxs("h2",{children:[h.jsx(X6,{sx:{fontSize:24,marginRight:1}}),"관리자 관리"]}),fe&&h.jsxs("button",{className:"add-admin-btn",onClick:()=>{m&&(g(null),R()),u(!0)},children:[h.jsx(px,{sx:{fontSize:20,marginRight:.5}}),m?"새 관리자 추가":"관리자 추가"]})]}),y&&h.jsxs("div",{className:`message ${b}`,children:[b==="error"?h.jsx(Hl,{sx:{fontSize:20,marginRight:.5}}):h.jsx(Ti,{sx:{fontSize:20,marginRight:.5}}),y]}),l&&h.jsxs("div",{className:"admin-form",children:[h.jsxs("div",{className:"form-header",children:[h.jsx("h3",{children:m?"관리자 수정":"새 관리자 추가"}),h.jsx("button",{className:"close-btn",onClick:R,children:h.jsx(by,{sx:{fontSize:20}})})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"이름"}),h.jsx("input",{type:"text",name:"name",value:re.name,onChange:ee,placeholder:"관리자 이름을 입력하세요"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"관리자 코드"}),h.jsxs("div",{className:"code-input-container",children:[h.jsx("input",{type:"text",name:"adminCode",value:re.adminCode,onChange:ee,placeholder:"관리자 코드를 입력하세요",disabled:m||N==="available"||m&&m.level==="최고 관리자"}),!m&&h.jsx("button",{type:"button",className:`check-btn ${N}`,onClick:O,disabled:!re.adminCode.trim()||N==="checking",children:N==="checking"?"확인중...":N==="available"?h.jsx(nP,{sx:{fontSize:16}}):N==="duplicate"?h.jsx(sP,{sx:{fontSize:16}}):"중복확인"})]}),m&&h.jsx("small",{className:"disabled-note",children:"관리자 코드는 수정할 수 없습니다."}),N==="available"&&h.jsx("small",{className:"success-note",children:"사용 가능한 관리자 코드입니다."}),N==="duplicate"&&h.jsx("small",{className:"error-note",children:"이미 존재하는 관리자 코드입니다."})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"등급"}),h.jsxs("select",{name:"level",value:re.level,onChange:ee,disabled:m&&m.level==="최고 관리자",children:[h.jsx("option",{value:"일반 관리자",children:"일반 관리자"}),h.jsx("option",{value:"최고 관리자",children:"최고 관리자"})]}),m&&m.level==="최고 관리자"&&h.jsx("small",{className:"disabled-note",children:"최고 관리자의 등급은 수정할 수 없습니다."})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{children:"권한 설정"}),m&&m.level==="최고 관리자"?h.jsxs("div",{className:"permissions-disabled",children:[h.jsxs("div",{className:"disabled-message",children:[h.jsx(Ti,{sx:{fontSize:20,marginRight:.5,color:"#4caf50"}}),"최고 관리자의 권한은 수정할 수 없습니다."]}),h.jsx("div",{className:"permissions-list",children:j.map(q=>h.jsxs("div",{className:"permission-item-disabled",children:[h.jsx(Ti,{sx:{fontSize:16,marginRight:.5,color:"#4caf50"}}),h.jsx("span",{children:q.label})]},q.key))})]}):re.level==="최고 관리자"?h.jsxs("div",{className:"permissions-disabled",children:[h.jsxs("div",{className:"disabled-message",children:[h.jsx(Ti,{sx:{fontSize:20,marginRight:.5,color:"#4caf50"}}),"최고 관리자는 모든 권한이 자동으로 부여됩니다."]}),h.jsx("div",{className:"permissions-list",children:j.map(q=>h.jsxs("div",{className:"permission-item-disabled",children:[h.jsx(Ti,{sx:{fontSize:16,marginRight:.5,color:"#4caf50"}}),h.jsx("span",{children:q.label})]},q.key))})]}):h.jsx("div",{className:"permissions-grid",children:j.map(q=>{const ce=re.level!=="최고 관리자"&&(q.key==="adminManagement"||q.key==="systemManagement");return h.jsxs("label",{className:"permission-item",style:ce?{opacity:.5,cursor:"not-allowed"}:{},children:[h.jsx("input",{type:"checkbox",checked:re.permissions.includes(q.key),onChange:()=>ge(q.key),disabled:ce}),h.jsxs("span",{children:[q.label,ce?" (최고 관리자 전용)":""]})]},q.key)})})]}),h.jsxs("div",{className:"form-actions",children:[h.jsxs("button",{className:"save-btn",onClick:m?V:be,children:[h.jsx(Sx,{sx:{fontSize:20,marginRight:.5}}),m?"수정":"추가"]}),h.jsxs("button",{className:"cancel-btn",onClick:R,children:[h.jsx(by,{sx:{fontSize:20,marginRight:.5}}),"취소"]})]})]}),h.jsxs("div",{className:"admin-list",children:[h.jsx("h3",{children:"관리자 목록"}),i?h.jsx("div",{className:"loading",children:"로딩 중..."}):h.jsxs("div",{className:"admin-table",children:[h.jsxs("div",{className:"table-header",children:[h.jsxs("div",{className:"sortable-header",onClick:()=>S("name"),children:["이름",M==="name"&&(z==="asc"?h.jsx(Mg,{sx:{fontSize:16}}):h.jsx(Og,{sx:{fontSize:16}}))]}),h.jsxs("div",{className:"sortable-header",onClick:()=>S("adminCode"),children:["관리자 코드",M==="adminCode"&&(z==="asc"?h.jsx(Mg,{sx:{fontSize:16}}):h.jsx(Og,{sx:{fontSize:16}}))]}),h.jsxs("div",{className:"sortable-header",onClick:()=>S("level"),children:["등급",M==="level"&&(z==="asc"?h.jsx(Mg,{sx:{fontSize:16}}):h.jsx(Og,{sx:{fontSize:16}}))]}),h.jsx("div",{children:"권한"}),h.jsx("div",{children:"생성일"}),h.jsx("div",{children:"작업"})]}),Q.map(q=>h.jsxs("div",{className:"table-row",children:[h.jsxs("div",{className:"admin-name",onMouseEnter:ce=>{ie(q);const me=ce.target.getBoundingClientRect(),Ee=document.querySelector(".permissions-tooltip");if(Ee){const Te=Ee.getBoundingClientRect(),Ke=window.innerWidth,Pt=window.innerHeight;let gs=me.left,ys=me.bottom+5;gs+Te.width>Ke&&(gs=me.right-Te.width),ys+Te.height>Pt&&(ys=me.top-Te.height-5),Ee.style.left=`${gs}px`,Ee.style.top=`${ys}px`}},onMouseLeave:()=>ie(null),children:[h.jsx(dP,{sx:{fontSize:20,marginRight:.5}}),q.name,G?.id===q.id&&h.jsxs("div",{className:"permissions-tooltip",children:[h.jsx("div",{className:"tooltip-title",children:"권한 목록"}),h.jsx("div",{className:"tooltip-permissions",children:n?.level==="최고 관리자"?q.permissions?.map(ce=>{const me=j.find(Ee=>Ee.key===ce)?.label||ce;return h.jsx("div",{className:"tooltip-permission",children:me},ce)}):h.jsx("div",{className:"tooltip-permission",children:"권한 정보는 최고 관리자만 확인할 수 있습니다."})})]})]}),h.jsxs("div",{className:"admin-code",children:[h.jsx(cm,{sx:{fontSize:20,marginRight:.5}}),n?.level==="최고 관리자"?q.adminCode:"***"]}),h.jsx("div",{className:`admin-level ${q.level==="최고 관리자"?"super":"normal"}`,children:q.level}),h.jsx("div",{className:"admin-permissions",children:n?.level==="최고 관리자"?`${q.permissions?.length||0}개 권한`:"***"}),h.jsx("div",{className:"admin-date",children:q.createdAt?.toDate?.()?.toLocaleDateString()||"알 수 없음"}),h.jsxs("div",{className:"admin-actions",children:[te(q)&&h.jsx("button",{className:"edit-btn",onClick:()=>Y(q),children:h.jsx(vx,{sx:{fontSize:16}})}),U(q)&&h.jsx("button",{className:"delete-btn",onClick:()=>K(q),children:h.jsx(yx,{sx:{fontSize:16}})}),q.id===n?.id&&h.jsx("span",{className:"current-admin",children:"현재 관리자"})]})]},q.id))]})]})]})}function KP({currentAdmin:n}){const[e,t]=k.useState("040507"),[i,a]=k.useState(!1),[l,u]=k.useState(""),[m,g]=k.useState(""),[y,v]=k.useState([]),[b,T]=k.useState([]),[N,P]=k.useState(""),[M,L]=k.useState("all"),[z,H]=k.useState(!1),[G,ie]=k.useState(100),[re,ae]=k.useState("timestamp"),[j,I]=k.useState("desc");k.useEffect(()=>{A(),R();const Y=Jn.subscribeToActivityLogs(V=>{v(V),S(V)},G);return()=>{Y()}},[G]),k.useEffect(()=>{S(y)},[N,M,y,re,j]);const A=async()=>{try{const Y=await Yt(De(ve,"system","pinCode"));Y.exists()&&t(Y.data().code||"040507")}catch{U("PIN 코드 로드 실패","error")}},R=async()=>{try{H(!0);const Y=await Jn.getActivityLogs(G);v(Y),S(Y)}catch{U("활동 로그 로드 실패","error")}finally{H(!1)}},O=Y=>{re===Y?I(j==="asc"?"desc":"asc"):(ae(Y),I("asc"))},S=Y=>{let V=[...Y];N&&(V=V.filter(K=>K.action.toLowerCase().includes(N.toLowerCase())||K.details.toLowerCase().includes(N.toLowerCase())||K.adminName.toLowerCase().includes(N.toLowerCase())||K.adminId.toLowerCase().includes(N.toLowerCase()))),M!=="all"&&(V=V.filter(K=>K.level===M)),V.sort((K,fe)=>{let q=K[re],ce=fe[re];if(re==="timestamp")q=q?.toDate?q.toDate():new Date(q),ce=ce?.toDate?ce.toDate():new Date(ce);else if(re==="level"){const me={major:3,medium:2,minor:1};q=me[q]||0,ce=me[ce]||0}return typeof q=="string"&&(q=q.toLowerCase(),ce=ce.toLowerCase()),j==="asc"?q>ce?1:-1:q<ce?1:-1}),T(V)},x=()=>{R()},Q=async()=>{if(!e||e.length!==6){U("PIN 코드는 정확히 6자리 숫자여야 합니다","error");return}if(!/^\d{6}$/.test(e)){U("PIN 코드는 숫자만 입력 가능합니다","error");return}a(!0);try{await ar(De(ve,"system","pinCode"),{code:e,updatedAt:new Date,updatedBy:n?.adminCode||"unknown"}),await Jn.logActivity({level:"대",action:"PIN 코드 변경",details:`PIN 코드가 ${e}로 변경됨`,adminName:n?.name||"시스템",adminId:n?.adminCode||"system"}),U("PIN 코드가 성공적으로 업데이트되었습니다","success")}catch(Y){U("PIN 코드 업데이트 실패","error"),await Jn.logActivity({level:"중",action:"PIN 코드 변경 실패",details:`오류: ${Y.message}`,adminName:n?.name||"시스템",adminId:n?.adminCode||"system"})}finally{a(!1)}},te=async()=>{try{await Jn.logActivity({level:"소",action:"PIN 코드 테스트",details:`PIN 코드 ${e} 테스트 실행`,adminName:n?.name||"시스템",adminId:n?.adminCode||"system"}),U("PIN 코드 테스트가 완료되었습니다","success")}catch{U("PIN 코드 테스트 실패","error")}},U=(Y,V)=>{u(Y),g(V),setTimeout(()=>{u(""),g("")},3e3)},ee=Y=>{switch(Y){case"major":return h.jsx(wy,{sx:{fontSize:16,color:"#d32f2f"}});case"medium":return h.jsx(Hl,{sx:{fontSize:16,color:"#ed6c02"}});case"minor":return h.jsx(Ti,{sx:{fontSize:16,color:"#2e7d32"}});default:return h.jsx(Rw,{sx:{fontSize:16}})}},ge=Y=>{switch(Y){case"major":return"대";case"medium":return"중";case"minor":return"소";default:return"알 수 없음"}},be=Y=>Y?(Y.toDate?Y.toDate():new Date(Y)).toLocaleString("ko-KR"):"";return h.jsxs("div",{className:"admin-system-management",children:[h.jsxs("div",{className:"system-header",children:[h.jsx(gP,{sx:{fontSize:24,marginRight:1}}),h.jsx("h2",{children:"시스템 관리"}),h.jsxs("div",{className:"admin-info",children:[h.jsx(cm,{sx:{fontSize:16,marginRight:.5}}),h.jsx("span",{children:"최고 관리자 전용"})]})]}),h.jsxs("div",{className:"system-content",children:[h.jsxs("div",{className:"pin-management-section",children:[h.jsx("h3",{children:"연결 해제 PIN 코드 관리"}),h.jsxs("div",{className:"pin-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"pinCode",children:"PIN 코드"}),h.jsxs("div",{className:"pin-input-container",children:[h.jsx("input",{type:"text",id:"pinCode",value:e,onChange:Y=>{const V=Y.target.value.replace(/\D/g,"");V.length<=6&&t(V)},placeholder:"6자리 숫자를 입력하세요",maxLength:6}),h.jsx("button",{className:"test-btn",onClick:te,disabled:i,children:"테스트"})]}),h.jsx("small",{className:"form-help",children:"제어용과 출력용 디바이스 연결 해제 시 사용되는 PIN 코드입니다. (6자리 숫자)"})]}),h.jsx("button",{className:"update-btn",onClick:Q,disabled:i||!e||e.length!==6,children:i?"업데이트 중...":"PIN 코드 업데이트"})]})]}),h.jsxs("div",{className:"activity-logs-section",children:[h.jsxs("div",{className:"logs-header",children:[h.jsx("h3",{children:"시스템 활동 로그"}),h.jsxs("div",{className:"logs-controls",children:[h.jsxs("div",{className:"search-container",children:[h.jsx(pP,{sx:{fontSize:20,marginRight:.5}}),h.jsx("input",{type:"text",placeholder:"검색...",value:N,onChange:Y=>P(Y.target.value),className:"search-input"})]}),h.jsxs("select",{value:M,onChange:Y=>L(Y.target.value),className:"level-filter",children:[h.jsx("option",{value:"all",children:"모든 레벨"}),h.jsx("option",{value:"major",children:"대"}),h.jsx("option",{value:"medium",children:"중"}),h.jsx("option",{value:"minor",children:"소"})]}),h.jsxs("select",{value:G,onChange:Y=>ie(Number(Y.target.value)),className:"logs-count-select",children:[h.jsx("option",{value:50,children:"50개"}),h.jsx("option",{value:100,children:"100개"}),h.jsx("option",{value:200,children:"200개"}),h.jsx("option",{value:500,children:"500개"})]}),h.jsxs("button",{className:"refresh-btn",onClick:x,disabled:z,children:[h.jsx(Sf,{sx:{fontSize:20}}),"새로고침"]})]})]}),h.jsxs("div",{className:"logs-stats",children:[h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-label",children:"전체 로그:"}),h.jsxs("span",{className:"stat-value",children:[y.length,"개"]})]}),h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-label",children:"필터된 로그:"}),h.jsxs("span",{className:"stat-value",children:[b.length,"개"]})]}),h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-label",children:"대:"}),h.jsxs("span",{className:"stat-value",children:[y.filter(Y=>Y.level==="major").length,"개"]})]}),h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-label",children:"중:"}),h.jsxs("span",{className:"stat-value",children:[y.filter(Y=>Y.level==="medium").length,"개"]})]}),h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-label",children:"소:"}),h.jsxs("span",{className:"stat-value",children:[y.filter(Y=>Y.level==="minor").length,"개"]})]})]}),h.jsx("div",{className:"logs-container",children:z?h.jsxs("div",{className:"loading-logs",children:[h.jsx(Sf,{sx:{fontSize:48,color:"#ccc",animation:"spin 1s linear infinite"}}),h.jsx("p",{children:"로그를 불러오는 중..."})]}):b.length===0?h.jsxs("div",{className:"no-logs",children:[h.jsx(Rw,{sx:{fontSize:48,color:"#ccc"}}),h.jsx("p",{children:"활동 로그가 없습니다"})]}):h.jsx("div",{className:"logs-table-container",children:h.jsxs("table",{className:"logs-table",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsxs("th",{onClick:()=>O("timestamp"),style:{cursor:"pointer"},children:["시간",re==="timestamp"&&(j==="asc"?" ↑":" ↓")]}),h.jsxs("th",{onClick:()=>O("level"),style:{cursor:"pointer"},children:["레벨",re==="level"&&(j==="asc"?" ↑":" ↓")]}),h.jsxs("th",{onClick:()=>O("action"),style:{cursor:"pointer"},children:["작업",re==="action"&&(j==="asc"?" ↑":" ↓")]}),h.jsx("th",{children:"상세 내용"}),h.jsxs("th",{onClick:()=>O("ip"),style:{cursor:"pointer"},children:["IP",re==="ip"&&(j==="asc"?" ↑":" ↓")]}),h.jsxs("th",{onClick:()=>O("adminName"),style:{cursor:"pointer"},children:["관리자",re==="adminName"&&(j==="asc"?" ↑":" ↓")]})]})}),h.jsx("tbody",{children:b.map(Y=>h.jsxs("tr",{className:`log-row ${Y.level}`,children:[h.jsx("td",{className:"log-timestamp",children:be(Y.timestamp)}),h.jsx("td",{className:"log-level-cell",children:h.jsxs("div",{className:"log-level",children:[ee(Y.level),h.jsx("span",{className:"level-text",children:ge(Y.level)})]})}),h.jsx("td",{className:"log-action",children:Y.action}),h.jsx("td",{className:"log-details",children:Y.details}),h.jsx("td",{className:"log-ip",children:Y.ip||"N/A"}),h.jsx("td",{className:"log-admin",children:h.jsxs("div",{className:"admin-info",children:[h.jsx("div",{className:"admin-name",children:Y.adminName}),h.jsxs("div",{className:"admin-code",children:["(",Y.adminId,")"]})]})})]},Y.id))})]})})})]})]}),l&&h.jsxs("div",{className:`message ${m}`,children:[m==="success"?h.jsx(Ti,{sx:{fontSize:20,marginRight:1}}):h.jsx(wy,{sx:{fontSize:20,marginRight:1}}),l]})]})}function YP(){const[n,e]=k.useState(!1),[t,i]=k.useState(null),[a,l]=k.useState("schedule"),[u,m]=k.useState(!1),[g,y]=k.useState(""),[v,b]=k.useState([]),[T,N]=k.useState(""),[P,M]=k.useState({}),[L,z]=k.useState(null),[H,G]=k.useState(""),[ie,re]=k.useState(null),[ae,j]=k.useState(!1),[I,A]=k.useState(!1),[R,O]=k.useState({isOnline:!1,isRecentlyActive:!1,statusText:"확인 중...",statusColor:"#666",activeConnections:0,lastActivity:null}),S=es(),x=Pi();k.useEffect(()=>{new URLSearchParams(x.search).get("admin")!=="true"&&S("/")},[x.search,S]),k.useEffect(()=>{if(document.body.style.background="#f5f5f5",sessionStorage.getItem("adminAuthenticated")==="true"){e(!0);const je=sessionStorage.getItem("adminInfo");if(je)try{const Le=JSON.parse(je);qe.getAdminByCode(Le.adminCode).then(dt=>{if(dt){i(dt),sessionStorage.setItem("adminInfo",JSON.stringify({id:dt.id,name:dt.name,adminCode:dt.adminCode,permissions:dt.permissions,level:dt.level}));const br=["schedule","meal","announcement","allergy","campusLayout","mainNotice","patchnotes","schoolBlocking","pins","adminManagement","systemManagement"].find(bn=>dt.permissions?.includes(bn));br&&l(br)}else sessionStorage.removeItem("adminInfo"),sessionStorage.removeItem("adminAuthenticated"),e(!1)}).catch(dt=>{Le&&Le.permissions&&Le.level?i(Le):(sessionStorage.removeItem("adminInfo"),sessionStorage.removeItem("adminAuthenticated"),e(!1))})}catch{sessionStorage.removeItem("adminInfo"),sessionStorage.removeItem("adminAuthenticated")}(async()=>{try{await U(),to.startMonitoring(),await to.checkSystemHealth();const Le=await to.getCurrentStatus();Le&&O(Le),await ee(),await Q(),await te(),[1e3,3e3,5e3,8e3].forEach((Sn,br)=>{setTimeout(()=>{ee()},Sn)})}catch{}})();const Ge=Ce.subscribeToActiveConnections(async Le=>{if(Le.length>0)try{const dt=await Ce.getActiveConnectionsWithNicknames();b(dt)}catch{b(Le)}else b(Le)}),Nt=Ce.subscribeToSchoolBlockingStatus(Le=>{A(Le)}),st=to.subscribe(Le=>{O(Le)});return()=>{Ge&&typeof Ge=="function"&&Ge(),Nt&&typeof Nt=="function"&&Nt(),st&&typeof st=="function"&&st()}}},[]),k.useEffect(()=>{if(!n||!t)return;(async()=>{try{switch(a){case"pins":await ee();break;case"allergy":await Q();break;case"campusLayout":await te();break;case"schoolBlocking":await U();break;default:break}}catch(je){console.error(`${a} 탭 데이터 로드 실패:`,je)}})()},[a,n,t]);const Q=async()=>{try{const _e=await qe.getAllergyItems();Ke({items:_e.map(je=>({id:je.id,name:je.name}))})}catch{}},te=async()=>{try{const _e=await qe.getCampusLayoutImage();re(_e)}catch{}},U=async()=>{try{const _e=await Ce.getSchoolBlockingStatus();A(_e)}catch{}},ee=async()=>{try{const _e=await Ce.getActiveConnectionsWithNicknames();if(_e.length===0)try{const{collection:je,getDocs:Me}=await Dw(async()=>{const{collection:dt,getDocs:Sn}=await Promise.resolve().then(()=>g4);return{collection:dt,getDocs:Sn}},[]),{db:Ge}=await Dw(async()=>{const{db:dt}=await Promise.resolve().then(()=>k3);return{db:dt}},void 0),Nt=je(Ge,"connections"),st=await Me(Nt),Le=[];if(st.forEach(dt=>{const Sn=dt.data();Sn.deviceType==="output"&&Sn.pin&&Sn.pin.length===6&&(Sn.status==="connected"||Sn.status==="control_connected"||Sn.connectedControlSession)&&Le.push({sessionId:dt.id,...Sn,nickname:Sn.nickname||""})}),Le.length>0){b(Le),N(`직접 쿼리로 ${Le.length}개의 PIN을 발견했습니다.`);return}else N("현재 활성화된 PIN이 없습니다.")}catch{}b(_e),_e.length>0&&N(`정상적으로 ${_e.length}개의 PIN을 조회했습니다.`)}catch{b([])}},ge=_e=>t?t.level==="최고 관리자"?!0:t.permissions?.includes(_e)||!1:!1,be=async _e=>{e(!0),i(_e);const Me=["schedule","meal","announcement","allergy","campusLayout","mainNotice","patchnotes","schoolBlocking","pins","adminManagement","systemManagement"].find(Ge=>ge(Ge));Me&&l(Me);try{await U(),to.startMonitoring(),await to.checkSystemHealth();const Ge=await to.getCurrentStatus();Ge&&O(Ge),await ee(),await Q(),await te(),[1e3,3e3,5e3,8e3].forEach((st,Le)=>{setTimeout(()=>{ee()},st)})}catch(Ge){console.error("초기 데이터 로드 실패:",Ge)}},Y=()=>{t&&Jn.logAdminLogout(t),sessionStorage.removeItem("adminAuthenticated"),sessionStorage.removeItem("adminInfo"),e(!1),i(null),S("/")},V=()=>{S("/")},K=_e=>{z(_e),G(_e.nickname||"")},fe=async _e=>{try{await Ce.setPinNickname(_e.pin,H)?(N(`PIN ${_e.pin} 별명이 "${H}"로 설정되었습니다.`),await ee(),z(null),G("")):N("별명 저장에 실패했습니다.")}catch{N("별명 저장 중 오류가 발생했습니다.")}},q=()=>{z(null),G("")},ce=async _e=>{if(window.confirm(`정말로 PIN ${_e}을(를) 제거하시겠습니까?`)){try{const je=await Ce.findOutputSessionByPin(_e);if(je&&je.length>0){const Me=je[0],Ge=Me.sessionId,Nt=Me.connectedControlSession;Nt&&(await Ce.sendControlData(Nt,{currentPage:"main",adminRemoved:!0}),await new Promise(st=>setTimeout(st,500)),await Ce.disconnectSession(Nt)),await Ce.disconnectSession(Ge),N(`PIN ${_e}이(가) 성공적으로 제거되었습니다.`),ee()}else N(`PIN ${_e}을(를) 찾을 수 없습니다.`)}catch{N(`PIN ${_e} 제거에 실패했습니다.`)}setTimeout(()=>N(""),3e3)}},[me,Ee]=k.useState({title:"",content:""}),[Te,Ke]=k.useState({items:[],newItem:""}),Pt=_e=>{y(_e),setTimeout(()=>y(""),3e3)},gs=async _e=>{_e.preventDefault(),m(!0);try{const je=Array.isArray(Te.items)?Te.items.filter(Me=>Me&&Me.name&&Me.name.trim().length>0):[];if(je.length===0)await qe.deleteAllAllergyItems(),Pt("모든 알레르기 정보가 삭제되었습니다.");else{await qe.deleteAllAllergyItems();for(const Me of je)await qe.addAllergyItem(Me.name);Pt(`${je.length}개의 알레르기 정보가 업데이트되었습니다.`)}await Q(),Ke(Me=>({...Me,newItem:""}))}catch(je){Pt("알레르기 정보 업데이트에 실패했습니다: "+je.message)}finally{m(!1)}},ys=async _e=>{const je=_e.target.files[0];if(je){if(!je.type.startsWith("image/")){Pt("이미지 파일만 업로드 가능합니다.");return}j(!0);try{const Me=await qe.uploadCampusLayoutImage(je);re(Me),Pt("교실 배치 이미지가 업로드되었습니다.")}catch{Pt("교실 배치 이미지 업로드에 실패했습니다.")}finally{j(!1)}}},Sr=async()=>{if(ie){j(!0);try{await qe.deleteCampusLayoutImage(),re(null),Pt("교실 배치 이미지가 삭제되었습니다.")}catch{Pt("교실 배치 이미지 삭제에 실패했습니다.")}finally{j(!1)}}};return h.jsx(h.Fragment,{children:n?h.jsxs("div",{className:"admin-panel",children:[h.jsxs("div",{className:"admin-header",children:[h.jsxs("div",{className:"header-left",children:[h.jsx("h1",{children:"관리자 패널"}),h.jsx("div",{className:"school-blocking-status",children:I?h.jsxs("span",{className:"blocking-status blocked",children:[h.jsx(Sy,{sx:{fontSize:20,marginRight:.5}}),"학교 차단 중"]}):h.jsxs("span",{className:"blocking-status active",children:[h.jsx(Ti,{sx:{fontSize:20,marginRight:.5}}),"정상 운영 중"]})}),h.jsxs("div",{className:"system-status",children:[h.jsxs("span",{className:"system-status-indicator",style:{color:R.statusColor},children:[h.jsx(uP,{sx:{fontSize:20,marginRight:.5}}),R.statusText]}),h.jsxs("span",{className:"system-details",children:[h.jsx(oP,{sx:{fontSize:16,marginRight:.5}}),"연결: ",R.activeConnections,"개(제어용 + 출력용)"]})]})]}),h.jsxs("div",{className:"header-buttons",children:[h.jsxs("div",{className:"admin-info",children:[h.jsx("span",{className:"admin-name",children:t?.name}),h.jsx("span",{className:"admin-code",children:t?.adminCode})]}),h.jsx("button",{className:"logout-btn",onClick:Y,children:"로그아웃"}),h.jsx("button",{className:"main-btn",onClick:V,children:"메인 화면"})]})]}),g&&h.jsx("div",{className:"message",children:g}),h.jsxs("div",{className:"admin-tabs",children:[ge("schedule")&&h.jsx("button",{className:`tab-btn ${a==="schedule"?"active":""}`,onClick:()=>l("schedule"),children:"학사일정"}),ge("meal")&&h.jsx("button",{className:`tab-btn ${a==="meal"?"active":""}`,onClick:()=>l("meal"),children:"급식"}),ge("announcement")&&h.jsx("button",{className:`tab-btn ${a==="announcement"?"active":""}`,onClick:()=>l("announcement"),children:"공지사항"}),ge("allergy")&&h.jsx("button",{className:`tab-btn ${a==="allergy"?"active":""}`,onClick:()=>l("allergy"),children:"알레르기"}),ge("campusLayout")&&h.jsx("button",{className:`tab-btn ${a==="campusLayout"?"active":""}`,onClick:()=>l("campusLayout"),children:"교실 배치"}),ge("mainNotice")&&h.jsx("button",{className:`tab-btn ${a==="mainNotice"?"active":""}`,onClick:()=>l("mainNotice"),children:"메인 공지사항"}),ge("patchnotes")&&h.jsx("button",{className:`tab-btn ${a==="patchnotes"?"active":""}`,onClick:()=>l("patchnotes"),children:"패치 노트"}),ge("schoolBlocking")&&h.jsx("button",{className:`tab-btn ${a==="schoolBlocking"?"active":""}`,onClick:()=>l("schoolBlocking"),children:"학교 차단"}),ge("pins")&&h.jsx("button",{className:`tab-btn ${a==="pins"?"active":""}`,onClick:()=>l("pins"),children:"활성화된 PIN"}),ge("adminManagement")&&h.jsx("button",{className:`tab-btn ${a==="adminManagement"?"active":""}`,onClick:()=>l("adminManagement"),children:"관리자 관리"}),ge("systemManagement")&&h.jsx("button",{className:`tab-btn ${a==="systemManagement"?"active":""}`,onClick:()=>l("systemManagement"),children:"시스템 관리"})]}),h.jsxs("div",{className:"admin-content",children:[a==="schedule"&&h.jsx("div",{className:"form-section",children:h.jsx(BP,{})}),a==="meal"&&h.jsx("div",{className:"form-section",children:h.jsx(FP,{})}),a==="announcement"&&h.jsx(zP,{}),a==="allergy"&&h.jsxs("div",{className:"form-section",children:[h.jsx("h2",{children:"알레르기 정보 관리"}),h.jsxs("div",{className:"allergy-management",children:[h.jsxs("div",{className:"allergy-items-list",children:[h.jsx("h3",{children:"현재 알레르기 항목"}),h.jsx("button",{type:"button",onClick:Q,style:{marginBottom:"10px",padding:"5px 10px",fontSize:"12px",backgroundColor:"#f0f0f0",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer"},children:"새로고침"}),Array.isArray(Te.items)&&Te.items.length>0?h.jsx("div",{className:"allergy-items",children:Te.items.map((_e,je)=>h.jsxs("div",{className:"allergy-item",children:[h.jsx("input",{type:"text",value:_e.name,onChange:Me=>{const Ge=[...Te.items];Ge[je]={..._e,name:Me.target.value},Ke({...Te,items:Ge})},className:"allergy-item-input",placeholder:"알레르기 항목명"}),h.jsx("button",{type:"button",onClick:async()=>{if(window.confirm(`"${_e.name}" 알레르기 항목을 삭제하시겠습니까?`))try{await qe.deleteAllergyItem(_e.id);const Me=Te.items.filter((Ge,Nt)=>Nt!==je);Ke({...Te,items:Me}),Pt(`"${_e.name}" 알레르기 항목이 삭제되었습니다.`)}catch(Me){console.error("알레르기 항목 삭제 실패:",Me),Pt("알레르기 항목 삭제에 실패했습니다.")}},className:"remove-allergy-btn",title:"항목 삭제",children:"×"})]},_e.id||je))}):h.jsx("p",{className:"no-allergy-items",children:"설정된 알레르기 항목이 없습니다."})]}),h.jsxs("div",{className:"add-allergy-section",children:[h.jsx("h3",{children:"새 항목 추가"}),h.jsxs("div",{className:"add-allergy-form",children:[h.jsx("input",{type:"text",value:Te.newItem||"",onChange:_e=>{const je=_e.target.value;if(Ke(Me=>({...Me,newItem:je})),je.includes(",")){const Me=je.split(",").map(Ge=>Ge.trim()).filter(Ge=>Ge.length>0);if(Me.length>0){const Ge=Array.isArray(prev.items)?prev.items:[],Nt=[...Ge,...Me.filter(st=>!Ge.includes(st))];Ke(st=>({...st,items:Nt,newItem:""}))}}},placeholder:"알레르기 항목명 입력 (쉼표로 구분 가능: 난류, 우유, 견과류)",className:"new-allergy-input"}),h.jsx("button",{type:"button",onClick:()=>{if(Te.newItem&&Te.newItem.trim()){const _e=Te.newItem.trim(),je=Array.isArray(Te.items)?Te.items:[];if(_e.includes(",")){const Me=_e.split(",").map(Ge=>Ge.trim()).filter(Ge=>Ge.length>0&&!je.some(Nt=>Nt.name===Ge));if(Me.length>0){const Ge=Me.map(Nt=>({id:`temp_${Date.now()}_${Math.random()}`,name:Nt}));Ke({...Te,items:[...je,...Ge],newItem:""})}else Ke(Ge=>({...Ge,newItem:""}))}else if(je.some(Me=>Me.name===_e))Ke(Me=>({...Me,newItem:""}));else{const Me={id:`temp_${Date.now()}_${Math.random()}`,name:_e};Ke({...Te,items:[...je,Me],newItem:""})}}},className:"add-allergy-btn",disabled:!Te.newItem||!Te.newItem.trim(),children:"추가"})]}),h.jsxs("p",{className:"allergy-input-hint",children:[h.jsx(aP,{sx:{fontSize:16,marginRight:.5}}),' 쉼표로 여러 항목을 한 번에 입력할 수 있습니다: "난류, 우유, 견과류"']})]}),h.jsx("form",{onSubmit:gs,className:"allergy-submit-form",children:h.jsx("button",{type:"submit",disabled:u||!Array.isArray(Te.items)||Te.items.length===0,children:u?"업데이트 중...":"변경사항 저장"})})]})]}),a==="mainNotice"&&h.jsx("div",{className:"form-section",children:h.jsx(qP,{currentAdmin:t})}),a==="patchnotes"&&h.jsx("div",{className:"form-section",children:h.jsx(HP,{})}),a==="schoolBlocking"&&h.jsx("div",{className:"form-section",children:h.jsx($P,{currentAdmin:t})}),a==="campusLayout"&&h.jsxs("div",{className:"form-section",children:[h.jsx("h2",{children:"교실 배치 이미지 관리"}),h.jsxs("div",{className:"campus-layout-section",children:[h.jsxs("div",{className:"image-upload-area",children:[h.jsx("input",{type:"file",accept:"image/*",onChange:ys,disabled:ae,id:"campus-layout-upload",style:{display:"none"}}),h.jsx("label",{htmlFor:"campus-layout-upload",className:"upload-btn",children:ae?"업로드 중...":"이미지 업로드"})]}),h.jsxs("div",{className:"current-image-section",children:[h.jsx("h3",{children:"현재 교실 배치 이미지"}),ie?h.jsxs("div",{className:"image-preview",children:[h.jsx("img",{src:ie,alt:"교실 배치"}),h.jsx("button",{className:"delete-btn-overlay",onClick:Sr,disabled:ae,title:"이미지 삭제",children:"✕"})]}):h.jsx("div",{className:"no-image",children:h.jsx("p",{children:"업로드된 이미지가 없습니다."})})]})]})]}),a==="pins"&&h.jsxs("div",{className:"form-section",children:[h.jsx("h2",{children:"활성화된 PIN 관리"}),T&&h.jsx("p",{className:"pin-message",children:T}),h.jsxs("div",{className:"pin-info",children:[h.jsxs("p",{children:[h.jsx(fP,{sx:{fontSize:16,marginRight:.5}})," 현재 활성화된 PIN: ",h.jsx("strong",{style:{color:"#007bff",fontSize:"1.2rem"},children:v.length}),"개 / 최대 10개"]}),h.jsxs("p",{className:"realtime-indicator",style:{cursor:"pointer",textDecoration:"underline"},onClick:async()=>{await ee(),N("새로고침 완료"),setTimeout(()=>N(""),2e3)},children:["PIN이 보이지 않으면 ",h.jsx("span",{style:{color:"#007bff",fontWeight:"bold"},children:"여기"}),"를 누르면 새로고침됩니다."]}),v.length>=10&&h.jsxs("p",{className:"pin-warning",children:[h.jsx(Hl,{sx:{fontSize:16,marginRight:.5}})," 최대 PIN 개수에 도달했습니다. 새로운 PIN 생성을 위해 기존 PIN을 제거해주세요."]})]}),v.length===0?h.jsx("p",{children:"현재 활성화된 PIN이 없습니다."}):h.jsx("ul",{className:"pin-list",children:v.map(_e=>h.jsxs("li",{className:"pin-item",children:[h.jsxs("div",{className:"pin-info-section",children:[h.jsxs("div",{className:"pin-main-info",children:[h.jsxs("span",{className:"pin-number",children:["PIN: ",h.jsx("strong",{children:_e.pin})]}),h.jsxs("span",{className:"pin-info",children:["연결 시간: ",_e.connectedAt?.toDate?_e.connectedAt.toDate().toLocaleString():"알 수 없음"]})]}),L&&L.pin===_e.pin?h.jsxs("div",{className:"nickname-edit-section",children:[h.jsx("input",{type:"text",value:H,onChange:je=>G(je.target.value),placeholder:"별명을 입력하세요",className:"nickname-input",maxLength:10}),h.jsx("button",{className:"btn save-nickname-btn",onClick:()=>fe(_e),disabled:H.trim().length===0,children:"저장"}),h.jsx("button",{className:"btn cancel-nickname-btn",onClick:q,children:"취소"})]}):h.jsxs("div",{className:"nickname-display-section",children:[h.jsxs("span",{className:"nickname-label",children:["별명: ",h.jsx("strong",{children:_e.nickname||"없음"})]}),h.jsx("button",{className:"btn edit-nickname-btn",onClick:()=>K(_e),children:_e.nickname?"편집":"추가"})]})]}),h.jsx("button",{className:"btn remove-pin-btn",onClick:()=>ce(_e.pin),children:"PIN 제거"})]},_e.pin))})]}),a==="adminManagement"&&h.jsx("div",{className:"form-section",children:h.jsx(GP,{currentAdmin:t})}),a==="systemManagement"&&h.jsx("div",{className:"form-section",children:h.jsx(KP,{currentAdmin:t})})]})]}):h.jsx(UP,{onSuccess:be})})}function QP(){const[n,e]=k.useState(!1),t=Pi();k.useEffect(()=>{if(new URLSearchParams(t.search).get("admin")==="true"){e(!1);return}let u=()=>{};return(async()=>{await i(),u=Ce.subscribeToSchoolBlockingStatus(g=>{e(g)})})(),()=>{u&&u()}},[t.pathname]);const i=async()=>{try{const a=await Ce.getSchoolBlockingStatus();e(a)}catch(a){console.error("차단 상태 확인 실패:",a)}};return n?h.jsx("div",{className:"school-blocking-screen",children:h.jsxs("div",{className:"blocking-container",children:[h.jsx("div",{className:"blocking-icon",children:h.jsx(Bv,{sx:{fontSize:80}})}),h.jsx("h1",{className:"blocking-title",children:"학교 생활 도우미 일시 중단"}),h.jsxs("p",{className:"blocking-message",children:["현재 시스템 점검 및 업데이트 작업으로 인하여",h.jsx("br",{}),"학교 생활 도우미 서비스가 일시적으로 중단됩니다."]}),h.jsxs("div",{className:"blocking-details",children:[h.jsxs("div",{className:"detail-item",children:[h.jsx("span",{className:"detail-icon",children:h.jsx(tP,{sx:{fontSize:24}})}),h.jsx("span",{children:"시스템 점검 및 업그레이드"})]}),h.jsxs("div",{className:"detail-item",children:[h.jsx("span",{className:"detail-icon",children:h.jsx(mP,{sx:{fontSize:24}})}),h.jsx("span",{children:"더 나은 서비스를 위한 준비"})]}),h.jsxs("div",{className:"detail-item",children:[h.jsx("span",{className:"detail-icon",children:h.jsx(Q6,{sx:{fontSize:24}})}),h.jsx("span",{children:"곧 다시 만나요!"})]})]}),h.jsxs("div",{className:"blocking-footer",children:[h.jsx("p",{children:"감사합니다."}),h.jsx("p",{className:"contact-info",children:"문의사항이 있으시면 관리자에게 연락바랍니다."})]})]})}):null}function XP(){const n=es();return k.useEffect(()=>{document.body.style.background="#f5f5f5"},[]),h.jsxs("div",{className:"notfound-page",children:[h.jsxs("div",{className:"background-decoration",children:[h.jsx("div",{className:"decoration-circle circle-1"}),h.jsx("div",{className:"decoration-circle circle-2"}),h.jsx("div",{className:"decoration-circle circle-3"})]}),h.jsxs("div",{className:"notfound-card",children:[h.jsx("div",{className:"notfound-icon",children:h.jsx(wy,{sx:{fontSize:64,color:"#d32f2f"}})}),h.jsx("h2",{children:"페이지를 찾을 수 없습니다"}),h.jsx("p",{children:"요청하신 주소가 올바르지 않거나, 이동되었을 수 있어요."}),h.jsxs("button",{className:"notfound-home-btn",onClick:()=>n("/"),children:[h.jsx(_x,{sx:{fontSize:20,marginRight:6}})," 메인으로 돌아가기"]})]})]})}function WP(){const n=Pi();return new URLSearchParams(n.search).get("admin")==="true"?h.jsx(YP,{}):h.jsx(bx,{})}function JP(){return h.jsx(wN,{basename:"/simpleInfo/",children:h.jsxs("div",{className:"app",children:[h.jsx(QP,{}),h.jsxs(Cy,{children:[h.jsx(dn,{path:"/",element:h.jsx(WP,{})}),h.jsx(dn,{path:"/control/*",element:h.jsx(NP,{})}),h.jsx(dn,{path:"/output/*",element:h.jsx(MP,{})}),h.jsx(dn,{path:"/admin",element:h.jsx(bx,{})}),h.jsx(dn,{path:"*",element:h.jsx(XP,{})})]})]})})}uC.createRoot(document.getElementById("root")).render(h.jsx(k.StrictMode,{children:h.jsx(JP,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/simpleInfo/sw.js").catch(()=>{})});
