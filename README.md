# 학교생활도우미 (School Life Helper)

광주동신여자고등학교를 위한 학생 생활 지원 시스템입니다. 출력용 디스플레이와 제어용 디바이스가 실시간으로 연결되어 학사일정, 급식, 교실 배치, 공지사항 등을 효율적으로 관리할 수 있습니다.

## 🌟 주요 기능

### 📱 듀얼 디바이스 시스템
- **출력용 디바이스**: 대형 화면에 정보 표시
- **제어용 디바이스**: 터치스크린으로 출력 내용 제어
- **실시간 연결**: Firebase를 통한 실시간 데이터 동기화
- **PIN 기반 연결**: 6자리 PIN 코드로 안전한 디바이스 페어링
- **자동 감지**: 관리자 접속 전 연결된 디바이스 자동 인식

### 📅 학사일정 관리
- **월간/주간 뷰**: 달력 형태로 학사일정 표시 (기본값: 주간)
- **학년별 표시**: 1학년, 2학년, 3학년 대상 일정 구분
- **네비게이션**: 이번주/다음주, 이번달/다음달 자동 전환
- **현재 월만 표시**: 월간 뷰에서 다음 달 날짜 숨김 처리
- **실시간 업데이트**: 관리자가 추가/수정한 일정 즉시 반영

### 🍽️ 급식 정보
- **포스터 스타일**: 시각적으로 매력적인 급식 정보 디스플레이
- **일별 급식**: 오늘, 어제, 내일 급식 메뉴 표시
- **알레르기 정보**: 알레르기 유발 식품 정보 제공
- **메뉴 상세**: 점심, 저녁 메뉴를 구분하여 표시
- **실시간 전환**: 점심/저녁 자동 전환 기능

### 🗺️ 교실 배치
- **캠퍼스 맵**: 학교 내 건물 및 교실 위치 안내
- **이미지 업로드**: 관리자가 직접 캠퍼스 맵 이미지 업로드 가능

### 📢 공지사항
- **실시간 공지**: 새로운 공지사항 즉시 표시
- **조회수 추적**: 공지사항별 조회수 자동 증가
- **페이지네이션**: 이전/다음 공지사항 이동
- **줄바꿈 지원**: 공지사항 내용 줄바꿈 표시

### 🚨 메인 공지사항 (NEW!)
- **PIN별 타겟팅**: 특정 출력 디바이스에만 표시되는 중요 공지사항
- **전체 화면 표시**: 정상 화면을 덮고 전체 화면으로 공지사항 표시
- **실시간 편집**: 활성화된 공지사항 실시간 수정 가능
- **제어 차단**: 공지사항 표시 중 다른 조작 일시 중단

### 🔄 패치노트 및 버전 관리
- **모달 시스템**: 메인 페이지에서 클릭 시 패치노트 모달 표시
- **자동 버전 생성**: Minor+1, Patch+1 버튼으로 스마트 버전 업데이트
- **날짜 오류 수정**: Firebase DB 날짜 필드 올바른 처리
- **폼 초기화**: 작성 완료 후 자동적으로 깨끗한 상태로 리셋
- **타입별 표시**: Major/Minor/Security/Fix 버전 타입 지정
- **PWA 알림**: 새로운 패치노트 등록 시 실시간 알림 발송

### 🚫 학교 차단 시스템 (NEW!)
- **포괄적 차단**: 관리자 페이지 제외 모든 URL과 페이지 접근 차단
- **최강 실시간**: 연결 상태와 관계없이 모든 디바이스 즉시 적용
- **관리자 전용**: 차단 중에도 관리자 페이지는 정상 접근 가능
- **아름다운 차단 화면**: 시스템 점검 메시지와 함께 사용자 친화적 안내
- **실시간 제어**: 관리자가 언제든지 차단/해제 가능
- **확인 절차**: 중요한 차단 작업에 대한 이중 확인 시스템

### 🔐 관리자 시스템
- **데이터 관리**: 학사일정, 급식, 공지사항 CRUD 기능
- **연결 관리**: 활성 연결 상태 모니터링 및 관리
- **이미지 관리**: 캠퍼스 맵 이미지 업로드/관리
- **상태 제어**: 학교 차단 시스템 관리 및 모니터링
- **보안 인증**: 모던한 비밀번호 입력 및 인증 시스템
- **실시간 알림**: 관리자 액션에 대한 즉시 피드백 및 알림

## 🛠️ 기술 스택

### Frontend
- **React 19.1.1**: 최신 React 버전으로 개발
- **React Router DOM 7.9.3**: 클라이언트 사이드 라우팅
- **Vite 7.1.7**: 빠른 개발 서버 및 빌드 도구

### Backend & Database
- **Firebase 12.3.0**: 
  - Firestore: 실시간 데이터베이스
  - Storage: 이미지 파일 저장
  - Authentication: 관리자 인증

### PWA & 알림 기능
- **Progressive Web App**: 모바일 앱처럼 설치 및 오프라인 사용
- **Service Worker**: 오프라인 캐싱 및 성능 최적화
- **Manifest 파일**: 앱 메타데이터 및 설치 정보
- **웹 알림 API**: 패치노트 및 공지사항 실시간 푸시 알림
- **백그라운드 동기화**: 네트워크 복구 시 데이터 동기화

### Development Tools
- **ESLint**: 코드 품질 관리
- **GitHub Pages**: 정적 사이트 호스팅
- **gh-pages**: 자동 배포 도구

## 🚀 설치 및 실행

### 1. 프로젝트 클론
```bash
git clone https://github.com/swon8468/simpleInfo.git
cd simpleInfo
```

### 2. 의존성 설치
```bash
npm install
```

### 3. Firebase 설정
1. Firebase 프로젝트 생성
2. Firestore Database 활성화
3. Storage 활성화
4. `src/firebase.js` 파일에 Firebase 설정 정보 입력

### 4. 개발 서버 실행
```bash
npm run dev
```
- 로컬 서버: `http://localhost:3000/simpleInfo/`
- 네트워크 접근: `http://0.0.0.0:3000/simpleInfo/`

### 5. 프로덕션 빌드
```bash
npm run build
```

## 📱 사용 방법

### 출력용 디바이스 설정
1. 브라우저에서 `http://localhost:3000/simpleInfo/` 접속
2. "출력용" 버튼 클릭
3. 생성된 PIN 코드 확인
4. 제어용 디바이스에서 PIN 코드 입력하여 연결

### 제어용 디바이스 설정
1. 브라우저에서 `http://localhost:3000/simpleInfo/` 접속
2. "제어용" 버튼 클릭
3. 출력용 디바이스의 PIN 코드 입력
4. 연결 완료 후 원하는 기능 선택

### 관리자 모드 접속
1. URL에 `?admin=true` 추가: `http://localhost:3000/simpleInfo/?admin=true`
2. 관리자 비밀번호 입력: `swon8468`
3. 데이터 관리 및 시스템 설정

### 학교 차단 시스템 제어
1. 관리자 페이지 접속 후 "학교 차단" 탭 클릭
2. 현재 상태 확인 (정상 운영 중 / 차단됨)
3. 차단 시작 시 모든 사용자 접속 차단 (관리자 제외)
4. 차단 해제 시 정상 서비스 복구

## 🔧 주요 컴포넌트

### 출력용 컴포넌트
- `OutputMain.jsx`: 메인 출력 화면
- `OutputLoading.jsx`: 연결 대기 화면

### 제어용 컴포넌트
- `ControlMain.jsx`: 제어 메인 화면
- `ControlSchedule.jsx`: 학사일정 제어
- `ControlMeal.jsx`: 급식 정보 제어
- `ControlAnnouncement.jsx`: 공지사항 제어
- `ControlRoadmap.jsx`: 교실 배치 제어

### 서비스
- `ConnectionDB.js`: 실시간 연결 관리 및 차단 상태 제어
- `DataService.js`: Firebase 데이터 관리 및 패치노트 CRUD
- `NotificationService.js`: PWA 알림 및 푸시 알림 발송

## 🌐 배포

### GitHub Pages 배포
```bash
npm run deploy
```

### 수동 배포
```bash
npm run build
# dist 폴더를 웹 서버에 업로드
```

## 📊 데이터베이스 구조

### Collections
- `schedules`: 학사일정 데이터
- `meals`: 급식 메뉴 데이터
- `announcements`: 공지사항 데이터
- `connections`: 디바이스 연결 상태
- `settings`: 시스템 설정 (알레르기 정보 등)

### 주요 필드
- **학사일정**: `eventDate`, `title`, `target` (학년)
- **급식**: `date`, `lunch`, `dinner` (메뉴 배열)
- **공지사항**: `title`, `content`, `views`, `createdAt`

## 🔒 보안

- 관리자 인증 시스템
- 세션 기반 연결 관리
- Firebase 보안 규칙 적용

## 📝 라이선스

이 프로젝트는 교육 목적으로 개발되었습니다.

## 👥 개발자

- **개발자**: swon8468
- **GitHub**: [https://github.com/swon8468/simpleInfo](https://github.com/swon8468/simpleInfo)
- **라이브 데모**: [https://swon8468.github.io/simpleInfo](https://swon8468.github.io/simpleInfo)

## 🆕 최근 업데이트

### v2.1.2 (2025-10-04) - 알레르기 자동 입력 및 PIN 표시 오류 수정
- 📝 **알레르기 자동 입력**: 쉼표로 구분된 항목을 자동으로 배열로 변환하여 추가
- 🔄 **실시간 항목 추가**: 입력 시 쉼표 감지하여 즉시 개별 항목으로 분리
- 🔧 **PIN 표시 오류 수정**: 관리자 페이지에서 PIN이 보이지 않는 JavaScript 오류 해결
- 💡 **입력 힌트**: 쉼표로 구분 입력 방법 안내 메시지 추가
- 🚀 **성능 최적화**: 중복 항목 검사 및 기존 항목 보호 로직 추가

### v2.1.1 (2025-10-04) - 알레르기 관리 개선 및 PIN 별명 오류 수정
- ✏️ **알레르기 개별 편집**: 알레르기 항목 개별 수정/삭제 기능 추가
- ➕ **알레르기 항목 추가**: 새 알레르기 항목 쉽게 추가/삭제 가능
- 🔧 **PIN 별명 저장 수정**: PIN 별명 저장 실패 오류 완전 해결
- 🎨 **직관적 인터페이스**: 각 알레르기 항목별 개별 관리 인터페이스
- 💾 **안정적 저장**: Firebase 문서 존재 여부 확인 후 저장/업데이트

### v2.1.0 (2025-10-04) - PIN 별명 관리 및 실시간 업데이트 개선
- 🏷️ **PIN 별명 기능**: 관리자 페이지에서 각 PIN에 별명 설정 기능 추가
- ⚡ **실시간 별명 반영**: 메인 공지사항에서 PIN 번호 별로 설정된 별명 표시
- 🔄 **완전한 실시간 업데이트**: 관리자 페이지 접속 전 연결된 PIN도 실시간으로 감지
- 💫 **향상된 UX**: PIN 관리 인터페이스에서 직관적인 별명 편집 기능
- 🎯 **일관된 표시**: 편집 모달과 목록에서 모두 별명 정보 통합 표시

### v2.0.2 (2025-10-04) - 패치 노트 폼 초기화 개선
- 🔄 **폼 완전 초기화**: 새로운 패치 노트 작성 시 이전 내용 완전 제거
- 🧹 **깔끔한 작성**: 패치 노트 추가/취소 시 폼 필드 초기 상태로 리셋
- 🎯 **인라인 편집 충돌 방지**: 기존 인라인 편집 폼과 새 작성 폼 간 충돌 완전 해결
- ✨ **직관적 UX**: 새 패치 노트 작성 시 항상 깨끗한 빈 폼으로 시작
- 🚀 **자동 버전 생성**: 폼 초기화 후 자동으로 다음 버전 번호 설정

### v2.0.1 (2025-10-04) - 패치 노트 정렬 및 버전 표시 통일
- 📊 **메인화면 정렬 통일**: 메인화면 패치 노트도 최신 버전 순으로 표시
- 🎯 **최신 버전 표시**: 메인화면 버전이 항상 가장 최신 패치 노트 버전으로 업데이트
- 🔄 **일관된 정렬**: 관리자 페이지와 메인화면 패치 노트 정렬 규칙 통일
- ✨ **버전 비교 로직**: Major.Minor.Patch 구조 완전 지원하여 정확한 순서 보장
- 📋 **사용자 경험**: 어떤 화면에서도 일관된 최신 → 이전 순서의 패치 노트 제공

### v2.0.0 (2025-10-04) - 패치 노트 관리 시스템 혁신
- 📊 **버전 순 정렬**: 패치 노트를 버전 역순(v2.0.0 → v1.9.0 → v1.8.0)으로 정렬
- 🎯 **인라인 편집**: 패치 노트 수정 시 해당 항목 아래에 편집 폼 표시
- 🎨 **사용자 경험**: 수정 버튼 토글 기능으로 직관적인 편집 인터페이스
- ✨ **부드러운 애니메이션**: 수정 폼 슬라이드 다운 효과로 자연스러운 UX
- 📱 **모바일 최적화**: 반응형 디자인으로 모든 기기에서 완벽한 편집 경험

### v1.9.0 (2025-10-04) - 동적 버전 시스템 및 브랜딩 통일
- 🔄 **동적 버전 표시**: 메인 화면 버전을 최신 패치 노트 버전으로 실시간 업데이트
- 📱 **브랜딩 통일**: "학교생활도우미" → "학교 생활 도우미"로 띄어쓰기 표기법 통일
- 🎯 **자동 동기화**: 패치 노트 생성 시 버전 정보 즉시 반영
- 🌟 **사용자 경험**: 일관된 브랜드 표기로 전문성 향상
- ⚡ **실시간 반영**: 페이지 새로고침 없이 최신 버전 정보 표시

### v1.8.0 (2025-10-04) - 관리자 페이지 완전 복구 및 UI 통일
- 🔧 **관리자 페이지 안정화**: 라우팅 문제 완전 해결 및 흰 화면 현상 수정
- 🎨 **배경색 통일**: 관리자 인증 페이지 배경색을 전체 디자인과 일치
- 🖼️ **전체 화면 배경**: 좌우 여백까지 포함한 완전한 배경색 적용
- ⚡ **차단 시스템 최적화**: 깜빡거림 현상 해결로 부드러운 전환
- 🎯 **라우팅 안정성**: 개발/프로덕션 환경 일관된 경로 처리

### v1.7.0 (2025-10-04) - 실시간 차단 시스템 강화 및 관리자 UI 혁신
- ⚡ **강화된 실시간 차단**: 모든 디바이스 즉시 중단 화면 이동 (URL 무관)
- 🎨 **관리자 인증 페이지**: 완전히 새로운 디자인과 애니메이션
- 🔒 **보안 강화**: 암호 표시/숨기기 토글, 에러 방지, 로딩 상태
- 🌟 **모던 UI**: 글래스모피즘, 그라데이션, 부드러운 애니메이션
- 📱 **완벽한 반응형**: 모든 디바이스에서 최적의 사용자 경험
- ✨ **인터랙티브 요소**: 호버 효과, 패턴 배경, 부유하는 장식 요소

### v1.6.0 (2025-10-04) - 학교 차단 시스템 및 UI 개선
- 🆕 **학교 차단 시스템**: 전체 서비스 일시 차단 기능 (관리자 페이지 제외)
- 🆕 **관리자 차단 관리**: 새로운 "학교 차단" 탭으로 차단 제어
- 🔧 **패치노트 날짜 오류**: Firebase DB 날짜 필드 올바른 처리 구현
- 🔧 **자동 버전 업데이트**: 패치노트 작성 시 스마트 버전 생성
- 🎨 **차단 화면**: 아름다운 시스템 점검 안내 화면
- ⚡ **실시간 상태 동기화**: 차단 상태 즉시 반영
- 📱 **반응형 차단 UI**: 모바일 최적화된 차단 관리 인터페이스

### v1.5.0 (2025-10-04) - 주요 기능 개선
- 🆕 **메인 공지사항 시스템**: PIN별 대상 공지사항 전송 및 실시간 표시
- 🆕 **관리자 패널 탭 확장**: 메인 공지사항 관리 새로운 탭 추가
- 🆕 **모바일 최적화**: 관리자 페이지 반응형 디자인 개선
- 🔧 **실시간 스냅샷**: Firebase 스냅샷 리스너로 즉시 데이터 업데이트
- 🔧 **PIN 연결 개선**: 관리자 접속 전 연결된 PIN 자동 감지
- 🎨 **급식 화면**: 포스터 스타일 디자인으로 개선
- 🎨 **캘린더 헤더**: 월간/주간 뷰 일관된 디자인 적용
- ✨ **줄바꿈 지원**: 공지사항 내용 줄바꿈 표시 개선

### v1.4.0 (2025-10-04) - PWA 지원 추가
- 🆕 **Progressive Web App**: 모바일 앱처럼 설치 및 사용 가능
- 🔧 **서비스 워커**: 오프라인 캐싱 및 성능 최적화
- 📱 **모바일 호환성**: 스마트폰/태블릿 최적화

### v1.3.0 (2025-10-04) - 학사일정 개선
- 🔧 **기본 뷰 변경**: 학사일정 기본 뷰를 주간으로 설정
- 🔧 **네비게이션 텍스트**: 이번주/다음주 형태로 변경
- 🎨 **컨트롤 디자인**: 연결됨 상태 표시 일관성 개선

### v1.2.0 (2025-10-04) - 출력화면 개선  
- 🎨 **급식 포스터**: 시각적으로 매력적인 급식 정보 표시
- 🔧 **PIN 표시**: 연결된 PIN 코드 출력화면 표시
- 🎨 **디자인 일관성**: 연결됨 상태 표시 통일

### v1.1.0 (2025-10-04) - 캘린더 최적화
- 🔧 **월간 캘린더**: 현재 월만 표시되도록 개선
- 🔧 **요일 헤더**: 일관된 파란색 배경 적용
- 📏 **최소 너비**: 테이블 셀 최소 너비 설정
- 🔧 **시간대 수정**: 관리자 날짜 등록 로직 개선

### v1.0.0 (2025-10-04)
- ✅ 듀얼 디바이스 실시간 연결 시스템 구현
- ✅ 학사일정 월간/주간 뷰 기능
- ✅ 급식 정보 및 알레르기 안내
- ✅ 교실 배치 이미지 업로드 기능
- ✅ 공지사항 관리 시스템
- ✅ 관리자 대시보드 구현
- ✅ Firebase 실시간 데이터베이스 연동
- ✅ GitHub Pages 자동 배포 설정

---

**학교생활도우미**로 더 나은 학교 생활을 경험해보세요! 🎓✨